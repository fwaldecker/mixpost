import{E as ee}from"./VariableManager-lrk6UaEe.js";import{_ as j}from"./Flex-B0LjVlwe.js";import{B as P,c as $,o as i,e as c,u as te,D as h,H as E,d9 as ae,U as ne,a as n,b as v,cU as N,O as oe,w as a,h as w,j as C,F as I,r as se,k as b,Z as le,t as d,f as A,a9 as ie,q as F,v as U,y as z,m as q,A as re,I as G,X as de,J as me,i as V,ar as K,M as ue,Q as ce}from"./app-C7yQ4yxP.js";import{_ as pe,L as fe}from"./ListItem-D5WRjaC-.js";import{_ as ve}from"./NoResult-BiKMAkVj.js";import{u as Z}from"./useAPIForm-B0dyKPRx.js";import{_ as ge}from"./Select-DMzj8fYH.js";import{_ as $e}from"./Textarea-Cj05CTrn.js";import{_ as R}from"./VerticalGroup-bCSYX3yy.js";import{R as _e}from"./Refresh-LmV19YMu.js";import{_ as ye}from"./ClipboardButton-CuDv6fEO.js";import{u as ke}from"./Variable-BraupYaJ.js";import"./index-la4Rclr_.js";import"./index-B0YDHBcd.js";import"./vue.runtime.esm-bundler-D0TG_Qm6.js";import"./MediaUploads-BPiO_myE.js";import"./nprogress-DktYLWPJ.js";import"./index.browser-OxPLOBIU.js";import"./ExclamationCircle-DNtr2LeT.js";import"./AlertText-DhpZmgf-.js";import"./EllipsisVertical-Cfd6Agro.js";import"./Trash-TUAkcl9a.js";import"./Tab-QSPdE2y6.js";import"./SectionTitle-CrJ6iHdB.js";import"./SearchInput-C73xFZvN.js";import"./Alert-nkqBEIg3.js";import"./Clipboard-C4EFUpKL.js";const be={},xe={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"};function he(o,t){return i(),$("svg",xe,t[0]||(t[0]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"},null,-1)]))}const M=P(be,[["render",he]]),we={},Ce={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"};function Le(o,t){return i(),$("svg",Ce,t[0]||(t[0]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"},null,-1)]))}const H=P(we,[["render",Le]]),ze={},Se={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"};function Be(o,t){return i(),$("svg",Se,t[0]||(t[0]=[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 12h14"},null,-1)]))}const J=P(ze,[["render",Be]]),je=["onKeydown"],Me={class:"mt-xs"},De={key:1,class:"mr-[8px]"},Ie={__name:"Spotlight",emits:["selected-command"],setup(o,{emit:t}){const{t:e}=te(),r=[{name:"rephrase",nameLocalized:e("ai.rephrase"),icon:"Sparkles"},{name:"fix_spelling_grammar",nameLocalized:e("ai.fix_spelling_grammar"),icon:"Sparkles"},{name:"expand",nameLocalized:e("ai.expand"),icon:"PlusSimple"},{name:"shorten",nameLocalized:e("ai.shorten"),icon:"Minus"},{name:"simplify",nameLocalized:e("ai.simplify"),icon:"Sparkles"},{name:"friendly_tone",nameLocalized:e("ai.friendly_tone"),icon:"",emoji:"😊"},{name:"formal_tone",nameLocalized:e("ai.formal_tone"),icon:"",emoji:"🎩"},{name:"edgy_tone",nameLocalized:e("ai.edgy_tone"),icon:"",emoji:"🤘"},{name:"engaging_tone",nameLocalized:e("ai.engaging_tone"),icon:"",emoji:"🤝"},{name:"generate",nameLocalized:e("general.generate_new"),icon:"Sparkles"}],s=t,p=h(""),_=h("improve"),u=h(0),y={Sparkles:M,PlusSimple:H,Minus:J},k=E(()=>r.filter(m=>ae(m.name).toLocaleLowerCase().includes(p.value.toLocaleLowerCase()))),L=m=>{_.value=m.name,s("selected-command",_.value)},g=m=>{m.key==="ArrowDown"||m.key==="Tab"?u.value<k.value.length-1?u.value++:u.value=0:m.key==="ArrowUp"&&(u.value>0?u.value--:u.value=k.value.length-1),_.value=k.value[u.value].name};return ne(p,()=>{k.value.length>0&&(_.value=k.value[0].name)}),(m,f)=>(i(),$("div",{onKeydown:[N(A(g,["prevent"]),["up"]),N(A(g,["prevent"]),["down"]),N(A(g,["prevent"]),["tab"])]},[c("div",Me,[n(oe,{modelValue:p.value,"onUpdate:modelValue":f[0]||(f[0]=x=>p.value=x),onKeydown:f[1]||(f[1]=N(x=>m.$emit("selected-command",_.value),["enter"])),type:"text",autofocus:"",placeholder:v(e)("general.search_jump"),class:"w-full"},null,8,["modelValue","placeholder"])]),n(fe,{class:"mt-xs"},{default:a(()=>[(i(!0),$(I,null,se(k.value,x=>(i(),w(pe,{onClick:D=>L(x),active:_.value===x.name,tabindex:"0",role:"button"},{default:a(()=>[n(j,null,{default:a(()=>[x.icon?(i(),w(le(y[x.icon]),{key:0,class:"text-stone-800"})):(i(),$("div",De,d(x.emoji),1)),b(" "+d(x.nameLocalized),1)]),_:2},1024)]),_:2},1032,["onClick","active"]))),256)),k.value.length?C("",!0):(i(),w(ve,{key:0,class:"p-md"}))]),_:1})],40,je))}},Ne={class:"relative h-10 mt-lg"},O={__name:"Preloader",setup(o){return(t,e)=>(i(),$("div",Ne,[n(ie,null,{default:a(()=>[b(d(t.$t("ai.is_writing")),1)]),_:1})]))}},Ve={class:"p-md rounded-md border border-primary-500"},Q={__name:"GeneratedContent",props:{text:{type:String,required:!0},buttonsDisabled:{type:Boolean,default:!1},insertButtonName:{type:String,default:""}},emits:["clickInsert","clickRetry"],setup(o){const t=h("");return(e,r)=>{const s=F("tooltip");return i(),$("div",Ve,[c("p",{ref_key:"dom",ref:t},d(o.text),513),n(j,{class:"mt-md justify-between items-center"},{default:a(()=>[U(n(ye,{htmlElm:t.value,"show-text":!1,size:"xs",disabled:o.buttonsDisabled,component:"PureButton"},null,8,["htmlElm","disabled"]),[[s,e.$t("system.copy")]]),n(j,null,{default:a(()=>[n(z,{onClick:r[0]||(r[0]=p=>e.$emit("clickRetry")),size:"xs",disabled:o.buttonsDisabled},{icon:a(()=>[n(_e)]),default:a(()=>[b(" "+d(e.$t("general.retry")),1)]),_:1},8,["disabled"]),n(q,{onClick:r[1]||(r[1]=p=>e.$emit("clickInsert")),size:"sm",disabled:o.buttonsDisabled},{default:a(()=>[b(d(o.insertButtonName?o.insertButtonName:e.$t("general.insert")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})])}}},Ee={role:"button",class:"flex justify-between p-sm border border-stone-600 hover:border-stone-700 transition ease-in-out duration-200 w-full rounded-md"},X={__name:"DraftContent",props:{clearable:{type:Boolean,default:!1},expanded:{type:Boolean,default:!1}},emits:["clickClear"],setup(o){return(t,e)=>(i(),$("div",Ee,[c("div",{class:G({"overflow-hidden text-ellipsis truncate":!o.expanded})},[re(t.$slots,"default")],2),o.clearable?(i(),w(me,{key:0,onClick:e[0]||(e[0]=r=>t.$emit("clickClear"))},{default:a(()=>[n(de)]),_:1})):C("",!0)]))}},W={__name:"Commands",props:{disabled:{type:Boolean,default:!1}},emits:["selected-command"],setup(o){return(t,e)=>(i(),w(j,{wrap:!0,class:"justify-end"},{default:a(()=>[n(z,{onClick:e[0]||(e[0]=r=>t.$emit("selected-command","rephrase")),disabled:o.disabled,size:"xs"},{icon:a(()=>[n(M)]),default:a(()=>[b(" "+d(t.$t("ai.rephrase")),1)]),_:1},8,["disabled"]),n(z,{onClick:e[1]||(e[1]=r=>t.$emit("selected-command","expand")),disabled:o.disabled,size:"xs"},{icon:a(()=>[n(H)]),default:a(()=>[b(" "+d(t.$t("ai.expand")),1)]),_:1},8,["disabled"]),n(z,{onClick:e[2]||(e[2]=r=>t.$emit("selected-command","shorten")),disabled:o.disabled,size:"xs"},{icon:a(()=>[n(J)]),default:a(()=>[b(" "+d(t.$t("ai.shorten")),1)]),_:1},8,["disabled"]),n(z,{onClick:e[3]||(e[3]=r=>t.$emit("selected-command","simplify")),disabled:o.disabled,size:"xs"},{icon:a(()=>[n(M)]),default:a(()=>[b(" "+d(t.$t("ai.simplify")),1)]),_:1},8,["disabled"]),n(z,{onClick:e[4]||(e[4]=r=>t.$emit("selected-command","friendly_tone")),disabled:o.disabled,size:"xs"},{icon:a(()=>e[8]||(e[8]=[c("div",{class:"text-lg"},"😊",-1)])),default:a(()=>[b(" "+d(t.$t("ai.more_friendly")),1)]),_:1},8,["disabled"]),n(z,{onClick:e[5]||(e[5]=r=>t.$emit("selected-command","formal_tone")),disabled:o.disabled,size:"xs"},{icon:a(()=>e[9]||(e[9]=[c("div",{class:"text-lg"},"🎩",-1)])),default:a(()=>[b(" "+d(t.$t("ai.more_formal")),1)]),_:1},8,["disabled"]),n(z,{onClick:e[6]||(e[6]=r=>t.$emit("selected-command","edgy_tone")),disabled:o.disabled,size:"xs"},{icon:a(()=>e[10]||(e[10]=[c("div",{class:"text-lg"},"🤘",-1)])),default:a(()=>[b(" "+d(t.$t("ai.more_edgy")),1)]),_:1},8,["disabled"]),n(z,{onClick:e[7]||(e[7]=r=>t.$emit("selected-command","engaging_tone")),disabled:o.disabled,size:"xs"},{icon:a(()=>e[11]||(e[11]=[c("div",{class:"text-lg"},"🤝",-1)])),default:a(()=>[b(" "+d(t.$t("ai.more_engaging")),1)]),_:1},8,["disabled"])]),_:1}))}},Ae={for:"prompt"},Pe={for:"tone"},Te={value:"neutral"},Re={value:"friendly"},Fe={value:"formal"},Ue={value:"edgy"},qe={value:"engaging"},Ge={key:0},Ke={key:1},Ze={__name:"TextGenerator",props:{characterLimit:{type:Number,default:1e3}},emits:["insert"],setup(o){const t=V("routePrefix"),e=V("workspaceCtx"),r=o,s=Z({prompt:"",tone:"neutral",character_limit:r.characterLimit===0||r.characterLimit>1e3?1e3:r.characterLimit,text:"",command:""}),p=h("form"),_=h(!1),u=h(!1),y=h(""),k=E(()=>p.value==="form"),L=l=>{p.value=l},g=()=>{L("form"),u.value=!0},m=()=>{L("result"),u.value=!1},f=()=>{s.reset(),g(),_.value=!1,u.value=!1,y.value=""},{onCatch:x}=K(),D=()=>{m(),s.transform(l=>({prompt:l.prompt,tone:l.tone,character_limit:l.character_limit})).post(route(`${t}.ai.text.generate`,{workspace:e.id}),{onSuccess(l){y.value=l.text,_.value=!0},onError(l){x(l)}})},T=()=>{m(),s.transform(l=>({text:l.text,command:l.command,character_limit:l.character_limit>1e3?1e3:l.character_limit})).post(route(`${t}.ai.text.modify`,{workspace:e.id}),{onSuccess(l){y.value=l.text},onError(l){x(l)}})},Y=()=>{if(!s.command){D();return}T()};return(l,S)=>(i(),$(I,null,[k.value?(i(),$(I,{key:0},[n(R,null,{title:a(()=>[c("label",Ae,d(l.$t("ai.tell_ai")),1)]),default:a(()=>[n($e,{modelValue:v(s).prompt,"onUpdate:modelValue":S[0]||(S[0]=B=>v(s).prompt=B),id:"prompt",rows:"4",autofocus:"",placeholder:l.$t("ai.write_about")},null,8,["modelValue","placeholder"])]),_:1}),n(R,{class:"mt-lg"},{title:a(()=>[c("label",Pe,d(l.$t("ai.tone_")),1)]),default:a(()=>[n(ge,{modelValue:v(s).tone,"onUpdate:modelValue":S[1]||(S[1]=B=>v(s).tone=B),id:"tone"},{default:a(()=>[c("option",Te,d(l.$t("ai.tone.neutral")),1),c("option",Re,"😊 "+d(l.$t("ai.tone.friendly")),1),c("option",Fe,"🎩 "+d(l.$t("ai.tone.formal")),1),c("option",Ue,"🤘 "+d(l.$t("ai.tone.edgy")),1),c("option",qe,"🤝 "+d(l.$t("ai.tone.engaging")),1)]),_:1},8,["modelValue"])]),_:1}),n(j,{class:"mt-lg justify-end"},{default:a(()=>[_.value?(i(),w(z,{key:0,onClick:m},{default:a(()=>[b(d(l.$t("general.cancel")),1)]),_:1})):C("",!0),n(q,{onClick:D,size:"md",isLoading:v(s).processing,disabled:v(s).processing||!v(s).prompt},{icon:a(()=>[n(M)]),default:a(()=>[u.value?(i(),$("span",Ke,d(l.$t("general.generate_new")),1)):(i(),$("span",Ge,d(l.$t("general.generate")),1))]),_:1},8,["isLoading","disabled"])]),_:1})],64)):C("",!0),k.value?C("",!0):(i(),w(X,{key:1,onClick:g,onClickClear:f,clearable:!v(s).processing,class:"mt-xs"},{default:a(()=>[b(d(v(s).prompt),1)]),_:1},8,["clearable"])),v(s).processing?(i(),w(O,{key:2})):C("",!0),_.value&&!v(s).processing?(i(),$(I,{key:3},[n(Q,{onClickInsert:S[2]||(S[2]=B=>l.$emit("insert",y.value)),onClickRetry:Y,text:y.value,buttonsDisabled:u.value,insertButtonName:"Insert",class:G(["mt-lg",{"opacity-50":u.value}])},null,8,["text","buttonsDisabled","class"]),n(W,{onSelectedCommand:S[3]||(S[3]=B=>{v(s).command=B,v(s).text=y.value,T()}),disabled:u.value,class:"mt-lg"},null,8,["disabled"])],64)):C("",!0)],64))}},He={class:"font-medium"},Je={key:1,class:"mt-lg"},Oe={class:"font-medium"},Qe={__name:"TextModifier",props:{text:{type:String,required:!0},command:{type:String,required:!0},characterLimit:{type:Number,default:1e3}},emits:["replace"],setup(o){const t=V("routePrefix"),e=V("workspaceCtx"),r=o,s=Z({text:r.text,command:r.command,character_limit:r.characterLimit===0||r.characterLimit>1e3?1e3:r.characterLimit}),{getTextFromHtmlString:p}=ke(),_=E(()=>p(r.text)),u=h(!1),y=h(""),{onCatch:k}=K();ue(()=>{L()});const L=()=>{s.post(route(`${t}.ai.text.modify`,{workspace:e.id}),{onSuccess(g){y.value=g.text},onError(g){k(g)}})};return(g,m)=>(i(),$(I,null,[c("div",null,[c("div",He,d(g.$t("ai.draft_content")),1),n(X,{onClick:m[0]||(m[0]=f=>u.value=!u.value),expanded:u.value,class:"mt-xs"},{default:a(()=>[b(d(_.value),1)]),_:1},8,["expanded"])]),v(s).processing?(i(),w(O,{key:0})):C("",!0),y.value&&!v(s).processing?(i(),$("div",Je,[c("div",Oe,d(g.$t("ai.generated_content")),1),n(Q,{onClickInsert:m[1]||(m[1]=f=>g.$emit("replace",y.value)),onClickRetry:L,text:y.value,insertButtonName:g.$t("general.replace"),class:"mt-xs"},null,8,["text","insertButtonName"]),n(W,{onSelectedCommand:m[2]||(m[2]=f=>{v(s).command=f,v(s).text=y.value,L()}),class:"mt-lg"})])):C("",!0)],64))}},wt={__name:"AIAssist",props:{text:{type:String,required:!0},characterLimit:{type:Number,default:1e3}},emits:["insert","replace","close"],setup(o,{emit:t}){const e=t,r=o,s=h(!1),p=h("spotlight"),_=h(""),u=E(()=>r.text===""||r.text==="<div></div>"),y=()=>{u.value&&(p.value="generator"),s.value=!0},k=()=>{s.value=!1,p.value="spotlight"},L=f=>{if(f!=="generate"){p.value="modifier",_.value=f;return}p.value="generator"},g=f=>{e("insert",f),k()},m=f=>{e("replace",f),k()};return(f,x)=>{const D=F("tooltip");return i(),$("div",null,[U((i(),w(ee,{onClick:y},{default:a(()=>[n(M)]),_:1})),[[D,"AI Assist"]]),n(ce,{show:s.value,onClose:k,"max-width":"md",closeable:!0,"scrollable-body":!0},{header:a(()=>[n(j,{class:"items-center"},{default:a(()=>[n(M,{class:"text-stone-800"}),b(" "+d(f.$t("ai.ai_assist")),1)]),_:1})]),body:a(()=>[p.value==="spotlight"?(i(),w(Ie,{key:0,onSelectedCommand:L})):C("",!0),p.value==="generator"?(i(),w(Ze,{key:1,onInsert:g,characterLimit:o.characterLimit},null,8,["characterLimit"])):C("",!0),p.value==="modifier"?(i(),w(Qe,{key:2,onReplace:m,text:o.text,characterLimit:o.characterLimit,command:_.value},null,8,["text","characterLimit","command"])):C("",!0)]),_:1},8,["show"])])}}};export{wt as default};
