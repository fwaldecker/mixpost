import{u as w,i as d,D as P,h as B,o as N,w as s,a as t,_ as y,e as c,J as h,k as r,s as k,t as m,b as u,m as V,a1 as S,n as C}from"./app-C7yQ4yxP.js";import{N as g}from"./nprogress-DktYLWPJ.js";import{_ as K}from"./Panel-DHnLtGhx.js";import{_ as j}from"./ReadDocHelp-C28ZNuNm.js";import{_ as D}from"./InputHidden-DUFFO3NU.js";import{_ as G}from"./Checkbox-hSITjV1n.js";import{_ as L}from"./Flex-B0LjVlwe.js";import{_ as U}from"./Label-BGGeTryo.js";import{_ as q}from"./LabelSuffix-CW5l7-lp.js";import{_ as E}from"./ProviderIcon-H9joOgZv.js";import"./Admin-2kdh7iq6.js";import"./QueueList-DM6iDr1_.js";import"./Eye-16K59JCb.js";const F={class:"flex items-center"},I={class:"mr-xs"},J={for:"private_key"},se={__name:"BlueskyServiceForm",props:{form:{required:!0,type:Object}},setup(o){const{t:i}=w(),p=d("routePrefix"),$=d("confirmation"),f=o,{notify:_}=C(),n=P({}),b=async()=>{if(!f.form.configuration.private_key){await v();return}$().title("Generate new private key").description(i("page.are_you_sure")).onConfirm(async a=>{a.isLoading(!0),v().then(()=>{a.isLoading(!1),a.close()})}).show()},v=()=>new Promise((a,e)=>{g.start(),axios.post(route(`${p}.services.generateBlueskyPrivateKey`)).then(l=>{f.form.configuration.private_key=l.data.private_key,_("success","New private key generated.<br/> Please save the form to apply the changes."),a()}).catch(e).finally(()=>g.done())}),x=()=>{n.value={},S.put(route(`${p}.services.update`,{service:"bluesky"}),f.form,{preserveScroll:!0,onSuccess(){_("success",i("service.service_saved",{service:"Bluesky"}))},onError:a=>{n.value=a}})};return(a,e)=>(N(),B(K,{class:"mt-lg"},{title:s(()=>[c("div",F,[c("span",I,[t(E,{provider:"bluesky"})]),e[2]||(e[2]=c("span",null,"Bluesky",-1))])]),description:s(()=>[t(j,{href:`${a.$page.props.mixpost.docs_link}/services/social/bluesky/`},null,8,["href"])]),default:s(()=>[t(y,{class:"mt-lg"},{title:s(()=>[c("label",J,[e[4]||(e[4]=r("Private Key ")),t(q,{danger:""},{default:s(()=>e[3]||(e[3]=[r("*")])),_:1})])]),footer:s(()=>[t(k,{message:n.value["configuration.private_key"]},null,8,["message"])]),default:s(()=>[c("div",null,[t(D,{modelValue:o.form.configuration.private_key,"onUpdate:modelValue":e[0]||(e[0]=l=>o.form.configuration.private_key=l),error:n.value["configuration.private_key"]!==void 0,disabled:!0,id:"private_key",class:"mb-xs",autocomplete:"off"},null,8,["modelValue","error"]),t(h,{onClick:b,linkStyle:!0},{default:s(()=>e[5]||(e[5]=[r("Generate new private key")])),_:1})])]),_:1}),t(y,{class:"mt-lg"},{title:s(()=>[r(m(u(i)("general.status")),1)]),footer:s(()=>[t(k,{message:n.value.active},null,8,["message"])]),default:s(()=>[t(L,{responsive:!1,class:"items-center"},{default:s(()=>[t(G,{checked:o.form.active,"onUpdate:checked":e[1]||(e[1]=l=>o.form.active=l),id:"active"},null,8,["checked"]),t(U,{for:"active",class:"mb-0!"},{default:s(()=>[r(m(u(i)("general.active")),1)]),_:1})]),_:1})]),_:1}),t(V,{onClick:x,class:"mt-lg"},{default:s(()=>[r(m(u(i)("general.save")),1)]),_:1})]),_:1}))}};export{se as default};
