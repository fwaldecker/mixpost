import{ay as x,az as C,aA as I,aB as me,aC as be,aD as ee,H as f,c,o as i,t as $,a as u,e as m,w as S,k as H,y as z,J as L,l as q,F as M,r as F,i as V,aE as ye,D as W,q as xe,j as Z,ab as te,v as Oe,h as j,Q as Me,aF as ve,aG as O,I as B,b as T,P as pe,aH as P,a1 as ae,aI as ne,A as fe,aJ as Te,V as oe,aK as le,W as Ce,a8 as qe,aL as Ze,U as ie,g as Fe,aM as K}from"./app-C7yQ4yxP.js";import{u as he}from"./useSettings-CBnkeriJ.js";import{C as ge,a as _e}from"./ChevronLeft-Dhng4OHZ.js";import{p as A,C as Ie}from"./ChevronDown-MHc45VJ-.js";import{W as we}from"./constants-BK-AY4Ot.js";import{u as Ne,_ as de,a as We}from"./VerticallyScrollableContent-uywc3QKz.js";import{u as je}from"./AlertText-DhpZmgf-.js";import{_ as Pe}from"./ProviderIcon-H9joOgZv.js";import{_ as Ae,a as Ve}from"./PostsFilter-DkQcdVAR.js";import{C as He}from"./Clock-m0ihuH3g.js";import"./Variable-BraupYaJ.js";import"./index-la4Rclr_.js";import"./Panel-DHnLtGhx.js";import"./EditorReadOnly-BtH5TmE6.js";import"./Alert-nkqBEIg3.js";import"./Flex-B0LjVlwe.js";import"./Refresh-LmV19YMu.js";import"./SearchInput-C73xFZvN.js";import"./ArrowTopRightOnSquare-509xbi7A.js";import"./ColorPicker-DL_0ehOi.js";import"./Trash-TUAkcl9a.js";import"./PureButtonLink-PaYLzY0E.js";import"./EllipsisVertical-Cfd6Agro.js";import"./Eye-16K59JCb.js";import"./Checkbox-hSITjV1n.js";import"./NoResult-BiKMAkVj.js";function R(a,t){x(2,arguments);var e=C(a),s=I(t);return isNaN(s)?new Date(NaN):(s&&e.setDate(e.getDate()+s),e)}function se(a,t){x(2,arguments);var e=C(a),s=I(t);if(isNaN(s))return new Date(NaN);if(!s)return e;var r=e.getDate(),o=new Date(e.getTime());o.setMonth(e.getMonth()+s+1,0);var d=o.getDate();return r>=d?o:(e.setFullYear(o.getFullYear(),o.getMonth(),r),e)}function re(a,t){var e,s,r,o,d,n,y,p;x(1,arguments);var h=me(),_=I((e=(s=(r=(o=t==null?void 0:t.weekStartsOn)!==null&&o!==void 0?o:t==null||(d=t.locale)===null||d===void 0||(n=d.options)===null||n===void 0?void 0:n.weekStartsOn)!==null&&r!==void 0?r:h.weekStartsOn)!==null&&s!==void 0?s:(y=h.locale)===null||y===void 0||(p=y.options)===null||p===void 0?void 0:p.weekStartsOn)!==null&&e!==void 0?e:0);if(!(_>=0&&_<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var w=C(a),D=w.getDay(),v=(D<_?7:0)+D-_;return w.setDate(w.getDate()-v),w.setHours(0,0,0,0),w}var Be=6e4;function Y(a,t){x(2,arguments);var e=I(t);return be(a,e*Be)}function De(a,t){x(2,arguments);var e=I(t),s=e*7;return R(a,s)}function ce(a){x(1,arguments);var t=C(a);return t.setDate(1),t.setHours(0,0,0,0),t}function Ee(a,t){var e,s,r,o,d,n,y,p;x(1,arguments);var h=me(),_=I((e=(s=(r=(o=t==null?void 0:t.weekStartsOn)!==null&&o!==void 0?o:t==null||(d=t.locale)===null||d===void 0||(n=d.options)===null||n===void 0?void 0:n.weekStartsOn)!==null&&r!==void 0?r:h.weekStartsOn)!==null&&s!==void 0?s:(y=h.locale)===null||y===void 0||(p=y.options)===null||p===void 0?void 0:p.weekStartsOn)!==null&&e!==void 0?e:0);if(!(_>=0&&_<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var w=C(a),D=w.getDay(),v=(D<_?-7:0)+6-(D-_);return w.setDate(w.getDate()+v),w.setHours(23,59,59,999),w}function X(a){x(1,arguments);var t=C(a),e=t.getDate();return e}function Ue(a){x(1,arguments);var t=C(a),e=t.getDay();return e}function Le(a){x(1,arguments);var t=C(a),e=t.getFullYear(),s=t.getMonth(),r=new Date(0);return r.setFullYear(e,s+1,0),r.setHours(0,0,0,0),r.getDate()}function Ye(a){x(1,arguments);var t=C(a),e=t.getHours();return e}function G(a){x(1,arguments);var t=C(a),e=t.getMonth();return e}function ze(a){x(1,arguments);var t=C(a),e=t.getMonth();return t.setFullYear(t.getFullYear(),e+1,0),t.setHours(0,0,0,0),t}function Q(a){return x(1,arguments),C(a).getFullYear()}function Re(a,t){x(2,arguments);var e=I(t);return R(a,-e)}function ke(a,t){x(2,arguments);var e=I(t);return se(a,-e)}function Je(a,t){x(2,arguments);var e=I(t);return De(a,-e)}const Ke={class:"text-gray-700 font-semibold text-lg"},Ge={__name:"DateIndicator",props:{selectedDate:{type:Date,required:!0}},setup(a){const{translatedFormat:t}=ee(),e=a,s=f(()=>t(e.selectedDate,"MMMM yyyy"));return(r,o)=>(i(),c("div",Ke,$(s.value),1))}},Qe={class:"flex items-center"},Xe={class:"flex items-center"},et={__name:"DateSelector",props:{currentDate:{type:[String,Date],required:!0},selectedDate:{type:Date,required:!0}},emits:["dateSelected"],setup(a,{emit:t}){const e=a,s=t,r=()=>{let n=ce(ke(e.selectedDate,1));s("dateSelected",n)},o=()=>{const n=typeof e.currentDate=="string"?A(e.currentDate):e.currentDate;s("dateSelected",n)},d=()=>{let n=ce(se(e.selectedDate,1));s("dateSelected",n)};return(n,y)=>(i(),c("div",Qe,[u(z,{onClick:o,class:"mr-xs"},{default:S(()=>[H($(n.$t("calendar.today")),1)]),_:1}),m("div",Xe,[u(L,{onClick:r,class:"mr-xs"},{default:S(()=>[u(ge)]),_:1}),u(L,{onClick:d},{default:S(()=>[u(_e)]),_:1})])]))}},tt={class:"grid grid-cols-7"},at={class:"hidden sm:block"},st={class:"block sm:hidden"},rt={__name:"Weekdays",props:{weekStartsOn:{required:!1,type:Number,default:0}},setup(a){const t=a,e=f(()=>{const s=q.clone(we);return s.splice(t.weekStartsOn?0:6).concat(s)});return(s,r)=>(i(),c("div",tt,[(i(!0),c(M,null,F(e.value,(o,d)=>(i(),c("div",{key:d,class:"p-sm border-t border-r last:border-r-0 border-gray-200 text-center font-semibold"},[m("span",at,$(s.$t(`calendar.weekdays.${o.key}.short`)),1),m("span",st,$(s.$t(`calendar.weekdays.${o.key}.shortest`)),1)]))),128))]))}},nt={key:0,class:"flex flex-col h-full"},ot={class:"w-full h-full p-1 md:p-sm bg-white"},lt={class:"text-left text-sm md:text-base"},it={key:0,class:"flex flex-wrap gap-xs items-center mt-xs"},dt={class:"flex items-center justify-between mt-xs"},ct={class:"flex items-center text-gray-500"},ut={class:"text-sm"},mt={class:"mr-xs"},Se={__name:"CalendarPostItem",props:{item:{type:Object,required:!0}},setup(a){const t=a,e=V("calendarFilter"),{timeFormat:s}=he(),{getOriginalVersion:r,getAccountVersion:o}=je(),{setupURLMetaForAllVersions:d}=Ne(),n=f(()=>{if(!t.item.versions.length)return{excerpt:""};let D=t.item.accounts;e.value.accounts.length&&(D=D.filter(l=>e.value.accounts.includes(l.id)));const v=D.map(l=>{const k=o(t.item.versions,l.id);return k?k.content[0]:r(t.item.versions).content[0]});return{excerpt:(v.length?v[0]:t.item.versions[0].content[0]).excerpt}}),y=f(()=>q.uniqBy(t.item.accounts,"provider")),p=f(()=>s===12?ye(t.item.scheduled_at.time):t.item.scheduled_at.time),h=W(!1),_=()=>{h.value=!0,d(t.item.versions)},w=()=>{h.value=!1};return(D,v)=>{const g=xe("tooltip");return i(),c(M,null,[m("div",{class:"w-full relative flex rounded-md overflow-hidden border border-gray-200 hover:border-primary-500 transition-colors ease-in-out duration-200",onClick:_,role:"button","aria-pressed":"false",tabindex:"0"},[a.item.tags.length?(i(),c("div",nt,[(i(!0),c(M,null,F(a.item.tags,l=>(i(),c("div",{class:"w-sm h-full first:rounded-tl-md last:rounded-bl-md",style:te({backgroundColor:l.hex_color})},null,4))),256))])):Z("",!0),m("div",ot,[m("div",lt,$(n.value.excerpt),1),y.value.length?(i(),c("div",it,[(i(!0),c(M,null,F(y.value,l=>(i(),c("div",{key:l.id},[Oe(u(Pe,{provider:l.provider,class:"w-4! h-4!"},null,8,["provider"]),[[g,`${l.name}`]])]))),128))])):Z("",!0),m("div",dt,[m("div",ct,[u(He,{class:"hidden md:block mr-1 w-5! h-5!"}),m("span",ut,$(p.value),1)]),u(de,{value:a.item.status,showName:!1,class:"hidden md:block"},null,8,["value"])])])]),u(Me,{show:h.value,scrollableBody:!0,onClose:w},{body:S(()=>[u(de,{value:a.item.status,class:"mb-lg"},null,8,["value"]),h.value?(i(),j(We,{key:0,accounts:a.item.accounts,versions:a.item.versions},null,8,["accounts","versions"])):Z("",!0)]),footer:S(()=>[h.value?(i(),c(M,{key:0},[m("div",mt,[u(Ae,{"item-id":a.item.id},null,8,["item-id"])]),u(z,{onClick:w},{default:S(()=>[H($(D.$t("general.close")),1)]),_:1})],64)):Z("",!0)]),_:1},8,["show"])],64)}}},$e="/vendor/mixpost/assets/calendar-disabled-item-DXCfE7-A.svg",yt={class:"absolute w-full top-0 left-0 mt-xs text-center"},vt={key:0,class:"absolute mt-xs right-0 mr-sm rtl:mr-0 rtl:ml-sm opacity-0 group-hover:opacity-100 transition-opacity ease-in-out duration-300"},pt={key:1,class:"mt-xl pb-xl h-full overflow-hidden"},ft={class:"relative p-0.5 md:p-sm overflow-y-auto mixpost-scroll-style h-full"},ht={class:"flex flex-wrap space-y-xs w-full"},gt={__name:"MonthDayItem",props:{day:{type:Object,required:!0},isToday:{type:Boolean,default:!1},timeZone:{required:!1,type:String,default:"UTC"}},setup(a){const t=V("workspaceCtx"),e=a,{isWorkspaceEditorRole:s}=ve(),r=f(()=>O(new Date(`${e.day.date}T00:00:00`),"d")),o=f(()=>e.day.isDisabled?{backgroundImage:`url('${$e}')`}:{}),d=()=>{if(!s.value)return;const n=P.utcToZonedTime(new Date().toISOString(),e.timeZone);let y=`${e.day.date} ${O(n,"HH:mm")}`;ae.visit(route("mixpost.posts.create",{workspace:t.id,schedule_at:y}))};return(n,y)=>(i(),c("div",{class:"relative min-h-[100px] overflow-hidden bg-white border-r border-b border-gray-200 group",style:te(o.value)},[m("div",yt,[m("span",{class:B(["w-7 h-7 inline-flex items-center justify-center p-1 mr-xs rtl:mr-0 rtl:ml-xs rounded-full text-gray-700",{"bg-primary-500 text-white":a.isToday,"text-gray-400":a.day.isDisabled}])},$(r.value),3)]),!a.day.isDisabled&&T(s)?(i(),c("div",vt,[m("button",{onClick:d,type:"button",class:"text-gray-400 hover:text-primary-500 transition-colors ease-in-out duration-200"},[u(pe)])])):Z("",!0),a.day.posts.length?(i(),c("div",pt,[m("div",ft,[m("div",ht,[(i(!0),c(M,null,F(a.day.posts,p=>(i(),j(Se,{key:p.id,item:p},null,8,["item"]))),128))])])])):Z("",!0)],4))}},_t={class:"bg-white"},wt={class:"flex flex-col md:flex-row md:items-center md:justify-between py-lg row-px"},Dt={class:"flex items-center space-x-xs mb-xs md:mb-0"},kt={class:"calendar-month-height grid grid-cols-7 relative border-t border-t-gray-200"},St={__name:"CalendarMonth",props:{timeZone:{required:!1,type:String,default:"UTC"},initialDate:{required:!1,type:[String,Date],default:a=>O(P.utcToZonedTime(new Date().toISOString(),a.timeZone),"yyyy-MM-dd")},weekStartsOn:{required:!1,type:Number,default:0},posts:{required:!1,type:Array,default:[]}},emits:["dateSelected"],setup(a,{emit:t}){const e=a,s=t,r=W(new Date(`${e.initialDate}T00:00:00`)),o=f(()=>[...h.value,..._.value,...w.value]),d=f(()=>O(P.utcToZonedTime(new Date().toISOString(),e.timeZone),"yyyy-MM-dd")),n=f(()=>(G(r.value)+1).toString().padStart(2,"0")),y=f(()=>Q(r.value)),p=f(()=>Le(r.value)),h=f(()=>{const l=D(_.value[0].date),k=l?l-e.weekStartsOn:e.weekStartsOn?6:0,b=X(Re(new Date(`${_.value[0].date}T00:00:00`),k)),N=ke(r.value,1);return[...Array(k)].map((E,U)=>{const J=new Date(`${Q(N)}-${(G(N)+1).toString().padStart(2,"0")}-${(b+U).toString().padStart(2,"0")}T00:00:00`);return{date:O(J,"yyyy-MM-dd"),isDisabled:ne(J,e.timeZone),posts:v(J)}})}),_=f(()=>[...Array(p.value)].map((l,k)=>{const b=new Date(`${y.value}-${n.value}-${(k+1).toString().padStart(2,"0")}T00:00:00`);return{date:O(b,"yyyy-MM-dd"),isDisabled:ne(b,e.timeZone),posts:v(b)}})),w=f(()=>{const l=D(ze(r.value)),k=l&&(e.weekStartsOn?7:6)-l,b=se(r.value,1);return[...Array(k)].map((N,E)=>{const U=new Date(`${Q(b)}-${(G(b)+1).toString().padStart(2,"0")}-${(E+1).toString().padStart(2,"0")}T00:00:00`);return{date:O(U,"yyyy-MM-dd"),isDisabled:!1,posts:v(U)}})}),D=l=>Ue(typeof l=="string"?new Date(`${l}T00:00:00`):l),v=l=>e.posts.filter(k=>O(l,"yyyy-MM-dd")===k.scheduled_at.date),g=l=>{r.value=l,s("dateSelected",l)};return(l,k)=>(i(),c("div",_t,[m("div",wt,[m("div",Dt,[u(et,{"current-date":d.value,"selected-date":r.value,onDateSelected:g},null,8,["current-date","selected-date"]),u(Ge,{"selected-date":r.value},null,8,["selected-date"])]),fe(l.$slots,"header")]),u(rt,{weekStartsOn:a.weekStartsOn},null,8,["weekStartsOn"]),m("div",kt,[(i(!0),c(M,null,F(o.value,b=>(i(),j(gt,{key:b.date,day:b,isToday:b.date===d.value,timeZone:a.timeZone},null,8,["day","isToday","timeZone"]))),128))])]))}},$t={class:"text-gray-700 font-semibold text-lg"},bt={__name:"DateIndicator",props:{selectedDate:{type:Date,required:!0},weekStartsOn:{required:!1,type:Number,default:0}},setup(a){const t=a,{translatedFormat:e}=ee(),s=f(()=>{const r=re(t.selectedDate,{weekStartsOn:t.weekStartsOn}),o=Ee(t.selectedDate,{weekStartsOn:t.weekStartsOn});return`${e(r,"MMM do")} - ${e(o,"MMM do")}`});return(r,o)=>(i(),c("div",$t,$(s.value),1))}},xt={class:"flex items-center"},Ot={class:"flex items-center"},Mt={__name:"DateSelector",props:{currentDate:{type:[String,Date],required:!0},selectedDate:{type:Date,required:!0}},emits:["dateSelected"],setup(a,{emit:t}){const e=a,s=t,r=()=>{let n=Je(e.selectedDate,1);s("dateSelected",n)},o=()=>{const n=typeof e.currentDate=="string"?A(e.currentDate):e.currentDate;s("dateSelected",n)},d=()=>{let n=De(e.selectedDate,1);s("dateSelected",n)};return(n,y)=>(i(),c("div",xt,[u(z,{onClick:o,class:"mr-xs"},{default:S(()=>[H($(n.$t("calendar.today")),1)]),_:1}),m("div",Ot,[u(L,{onClick:r,class:"mr-xs"},{default:S(()=>[u(ge)]),_:1}),u(L,{onClick:d},{default:S(()=>[u(_e)]),_:1})])]))}},Tt={class:"flex flex-row sticky top-0 bg-white z-10"},Ct={class:"w-full grid grid-cols-week-time-sm md:grid-cols-week-time"},qt={class:"text-base md:text-xl"},Zt={class:"hidden sm:block"},Ft={class:"block sm:hidden"},It={__name:"Weekdays",props:{timeZone:{required:!1,type:String,default:"UTC"},weekStartsOn:{required:!1,type:Number,default:0},selectedDate:{type:Date,required:!0},scrolled:{type:Boolean,required:!1,default:!1}},setup(a){const t=a,e=f(()=>re(t.selectedDate,{weekStartsOn:t.weekStartsOn})),s=f(()=>X(P.utcToZonedTime(new Date().toISOString(),t.timeZone))),r=f(()=>{const o=q.clone(we);return o.splice(t.weekStartsOn?0:6).concat(o).map((n,y)=>{const p=y===0?e.value:R(e.value,y),h=X(p);return Object.assign(n,{date:h,isToday:s.value===h})})});return(o,d)=>(i(),c("div",Tt,[m("div",Ct,[d[0]||(d[0]=m("div",null,null,-1)),(i(!0),c(M,null,F(r.value,(n,y)=>(i(),c("div",{key:y,class:B([{"text-primary-500":n.isToday,"border-b-gray-200":a.scrolled,"border-b-white":!a.scrolled},"p-xs border-t border-b border-l border-gray-200 text-center font-semibold"])},[m("div",qt,$(n.date),1),m("span",{class:B({"text-gray-500":!n.isToday})},[m("span",Zt,$(o.$t(`calendar.weekdays.${n.key}.short`)),1),m("span",Ft,$(o.$t(`calendar.weekdays.${n.key}.shortest`)),1)],2)],2))),128))])]))}},Nt={key:0,class:"absolute mt-xs right-0 mr-sm z-10 opacity-0 group-hover:opacity-100 transition-opacity ease-in-out duration-300"},Wt={class:"mr-xs text-sm"},jt={class:"relative p-0.5 md:p-sm overflow-y-auto mixpost-scroll-style h-full"},Pt={class:"flex flex-wrap space-y-xs w-full"},At={__name:"WeekDayTimeItem",props:{dateSlot:{type:String,required:!0},timeSlot:{type:String,required:!0},minuteSlot:{type:Object,required:!0},timeZone:{required:!1,type:String,default:"UTC"},timeFormat:{required:!1,type:Number,default:12},posts:{type:Array,required:!0}},setup(a){const t=V("workspaceCtx"),e=a,{translatedFormat:s}=ee(),{isWorkspaceEditorRole:r}=ve(),o=f(()=>{const p=Y(A(`${e.dateSlot} ${e.timeSlot}`),e.minuteSlot.end);return Te(p,e.timeZone)}),d=f(()=>{const p=Y(A(`${e.dateSlot} ${e.timeSlot}`),e.minuteSlot.start);return s(p,`${e.timeFormat===12?"h:mm aaa":"H:mm"}`)}),n=f(()=>o.value?{backgroundImage:`url('${$e}')`}:{}),y=()=>{if(!r.value)return;let p=`${e.dateSlot} ${e.timeSlot}`;const h=P.utcToZonedTime(new Date().toISOString(),e.timeZone);`${O(h,"yyyy-MM-dd")} ${Ye(h)}:00`===p&&(p=O(h,"yyyy-MM-dd H:mm")),ae.visit(route("mixpost.posts.create",{workspace:t.id,schedule_at:p}))};return(p,h)=>(i(),c("div",{class:"relative min-h-[50px] group",style:te(n.value)},[!o.value&&T(r)?(i(),c("div",Nt,[m("button",{onClick:y,type:"button",class:"flex items-center text-gray-400 hover:text-primary-500 transition-colors ease-in-out duration-200"},[m("span",Wt,$(d.value),1),u(pe)])])):Z("",!0),a.posts.length?(i(),c("div",{key:1,class:B([{"mt-lg":!o.value},"h-full overflow-hidden"])},[m("div",jt,[m("div",Pt,[(i(!0),c(M,null,F(a.posts,_=>(i(),j(Se,{key:_.id,item:_},null,8,["item"]))),128))])])],2)):Z("",!0)],4))}},Vt={class:"bg-white"},Ht={class:"flex flex-col md:flex-row md:items-center md:justify-between py-lg row-px"},Bt={class:"flex items-center space-x-xs mb-xs md:mb-0"},Et={class:"w-full grid grid-cols-week-time-sm md:grid-cols-week-time"},Ut={class:"text-center text-gray-400 text-sm font-semibold"},Lt={__name:"CalendarWeek",props:{timeZone:{required:!1,type:String,default:"UTC"},initialDate:{required:!1,type:[String,Date],default:a=>O(P.utcToZonedTime(new Date().toISOString(),a.timeZone),"yyyy-MM-dd")},weekStartsOn:{required:!1,type:Number,default:0},timeFormat:{required:!1,type:Number,default:12},posts:{required:!1,type:Array,default:[]}},emits:["dateSelected"],setup(a,{emit:t}){const e=a,s=t,r=W(new Date(e.initialDate)),o=f(()=>O(P.utcToZonedTime(new Date().toISOString(),e.timeZone),"yyyy-MM-dd")),d=f(()=>re(r.value,{weekStartsOn:e.weekStartsOn})),n=f(()=>q.range(7).map(v=>{const g=v===0?d.value:R(d.value,v);return O(g,"yyyy-MM-dd")})),y=f(()=>{let v=[];for(let g=0;g<24;g++){const l=(g+":00").padStart(5,"0");v.push({12:ye(l,"h aaa"),24:l})}return v}),p=[{start:0,end:59}],h=(v,g,l)=>e.posts.filter(k=>{const b=O(Y(A(`${v} ${g}`),l.start),"kk:mm"),N=O(Y(A(`${v} ${g}`),l.end),"kk:mm");return v===k.scheduled_at.date&&k.scheduled_at.time>=b&&k.scheduled_at.time<=N}),_=v=>{r.value=v,s("dateSelected",v)},w=W(!1),D=q.throttle(v=>{w.value=v.target.scrollTop>0},100);return(v,g)=>(i(),c("div",Vt,[m("div",Ht,[m("div",Bt,[u(Mt,{currentDate:o.value,selectedDate:r.value,onDateSelected:_},null,8,["currentDate","selectedDate"]),u(bt,{selectedDate:r.value,weekStartsOn:a.weekStartsOn},null,8,["selectedDate","weekStartsOn"])]),fe(v.$slots,"header")]),m("div",{onScroll:g[0]||(g[0]=(...l)=>T(D)&&T(D)(...l)),class:"calendar-week-height-sm md:calendar-week-height-md xl:calendar-week-height overflow-y-auto"},[u(It,{timeZone:a.timeZone,weekStartsOn:a.weekStartsOn,selectedDate:r.value,scrolled:w.value},null,8,["timeZone","weekStartsOn","selectedDate","scrolled"]),m("div",Et,[(i(!0),c(M,null,F(y.value,l=>(i(),c(M,null,[(i(),c(M,null,F(p,(k,b)=>(i(),c(M,null,[m("div",Ut,$(b===0?l[a.timeFormat]:""),1),(i(!0),c(M,null,F(n.value,(N,E)=>(i(),c("div",{key:E,class:B([{"border-t-gray-100!":b!==0},"grid grid-cols-1 border-l border-t border-gray-200 text-center bg-white"])},[u(At,{dateSlot:N,timeSlot:l[24],minuteSlot:k,timeZone:a.timeZone,timeFormat:a.timeFormat,posts:h(N,l[24],k)},null,8,["dateSlot","timeSlot","minuteSlot","timeZone","timeFormat","posts"])],2))),128))],64))),64))],64))),256))])],32)]))}},Yt={class:"inline-block mr-xs"},zt={__name:"CalendarSwitchType",setup(a){const t=V("calendarType"),e=s=>{t.value=s};return(s,r)=>(i(),j(Ce,{placement:"bottom"},{trigger:S(()=>[u(z,{size:"sm"},{default:S(()=>[m("span",Yt,$(T(t)==="month"?s.$t("calendar.month"):s.$t("calendar.week")),1),u(Ie)]),_:1})]),content:S(()=>[u(oe,{as:"button",onClick:r[0]||(r[0]=o=>e("month"))},{icon:S(()=>[u(le)]),default:S(()=>[H(" "+$(s.$t("calendar.month")),1)]),_:1}),u(oe,{as:"button",onClick:r[1]||(r[1]=o=>e("week"))},{icon:S(()=>[u(le)]),default:S(()=>[H(" "+$(s.$t("calendar.week")),1)]),_:1})]),_:1}))}},Rt={class:"flex items-center space-x-md rtl:space-x-reverse"},ue={__name:"CalendarToolbar",setup(a){const t=V("calendarFilter");return(e,s)=>(i(),c("div",Rt,[u(zt),u(Ve,{modelValue:T(t),"onUpdate:modelValue":s[0]||(s[0]=r=>qe(t)?t.value=r:null)},null,8,["modelValue"])]))}},Da={__name:"Calendar",props:{posts:{required:!0,type:Object},type:{required:!0,type:String},selected_date:{required:!0,type:[String,Date]},filter:{type:Object,default:{}}},setup(a){const t=a,e=V("workspaceCtx"),{timeZone:s,timeFormat:r,weekStartsOn:o}=he(),d=W(t.type),n=W(t.selected_date),y=W({keyword:t.filter.keyword,status:t.filter.status,tags:t.filter.tags,accounts:t.filter.accounts});K("calendarType",d),K("calendarFilter",y);const p=Ze({urlMeta:{}});K("postCtx",p);const h=f(()=>d.value==="month"),_=f(()=>d.value==="week"),w=g=>{const l=O(g,"yyyy-MM-dd");n.value=l,v(Object.assign({date:l},q.pickBy(y.value)))};ie(d,()=>{D(Object.assign({date:n.value,type:d.value},q.pickBy(y.value)))}),ie(()=>q.cloneDeep(y.value),q.throttle(()=>{D(Object.assign({date:n.value},q.pickBy(y.value)))},300));const D=g=>{ae.get(route("mixpost.calendar",Object.assign({workspace:e.id},g)),{},{preserveState:!0,only:["posts"]})},v=q.throttle(g=>{D(g)},300);return(g,l)=>(i(),c(M,null,[u(T(Fe),{title:g.$t("post.schedule")},null,8,["title"]),h.value?(i(),j(St,{key:0,initialDate:n.value,weekStartsOn:T(o),timeZone:T(s),posts:a.posts.data,onDateSelected:w},{header:S(()=>[u(ue)]),_:1},8,["initialDate","weekStartsOn","timeZone","posts"])):Z("",!0),_.value?(i(),j(Lt,{key:1,initialDate:n.value,weekStartsOn:T(o),timeZone:T(s),timeFormat:T(r),posts:a.posts.data,onDateSelected:w},{header:S(()=>[u(ue)]),_:1},8,["initialDate","weekStartsOn","timeZone","timeFormat","posts"])):Z("",!0)],64))}};export{Da as default};
