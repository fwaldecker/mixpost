const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AIAssist-D7VVWK8D.js","assets/VariableManager-lrk6UaEe.js","assets/index-la4Rclr_.js","assets/app-C7yQ4yxP.js","assets/app-FfqdtCYP.css","assets/Variable-BraupYaJ.js","assets/index-B0YDHBcd.js","assets/vue.runtime.esm-bundler-D0TG_Qm6.js","assets/MediaUploads-BPiO_myE.js","assets/nprogress-DktYLWPJ.js","assets/index.browser-OxPLOBIU.js","assets/ExclamationCircle-DNtr2LeT.js","assets/AlertText-DhpZmgf-.js","assets/EllipsisVertical-Cfd6Agro.js","assets/Trash-TUAkcl9a.js","assets/Textarea-Cj05CTrn.js","assets/Tab-QSPdE2y6.js","assets/SectionTitle-CrJ6iHdB.js","assets/SearchInput-C73xFZvN.js","assets/NoResult-BiKMAkVj.js","assets/Alert-nkqBEIg3.js","assets/Flex-B0LjVlwe.js","assets/ListItem-D5WRjaC-.js","assets/VerticalGroup-bCSYX3yy.js","assets/useAPIForm-B0dyKPRx.js","assets/Select-DMzj8fYH.js","assets/Refresh-LmV19YMu.js","assets/ClipboardButton-CuDv6fEO.js","assets/Clipboard-C4EFUpKL.js"])))=>i.map(i=>d[i]);
import{u as q,l as G,i as H,D as W,x as J,H as K,c as N,o as n,a,e as f,b as e,g as Q,w as o,h as _,j as y,m as E,k as m,t as c,S as X,y as Y,z as Z,f as h,O as ee,F as T,r as te,E as ae,n as se,a1 as j,G as oe,aM as re}from"./app-C7yQ4yxP.js";import{N as k}from"./nprogress-DktYLWPJ.js";import{u as le}from"./AlertText-DhpZmgf-.js";import{u as ie}from"./Variable-BraupYaJ.js";import{u as ne}from"./useTemplate-Bjf1Ix63.js";import{_ as me}from"./PageHeader-L61bBZJ1.js";import{_ as de}from"./Panel-DHnLtGhx.js";import{_ as pe}from"./LabelSuffix-CW5l7-lp.js";import{_ as ue}from"./VerticalGroup-bCSYX3yy.js";import{_ as fe,a as _e,b as ce,c as xe,d as ve,e as ye}from"./VariableManager-lrk6UaEe.js";import{T as we}from"./Trash-TUAkcl9a.js";import{_ as I}from"./Flex-B0LjVlwe.js";import"./index-la4Rclr_.js";import"./index-B0YDHBcd.js";import"./vue.runtime.esm-bundler-D0TG_Qm6.js";import"./MediaUploads-BPiO_myE.js";import"./index.browser-OxPLOBIU.js";import"./ExclamationCircle-DNtr2LeT.js";import"./EllipsisVertical-Cfd6Agro.js";import"./Textarea-Cj05CTrn.js";import"./Tab-QSPdE2y6.js";import"./SectionTitle-CrJ6iHdB.js";import"./SearchInput-C73xFZvN.js";import"./NoResult-BiKMAkVj.js";import"./Alert-nkqBEIg3.js";import"./ListItem-D5WRjaC-.js";const be={class:"w-full mx-auto row-py"},ke={class:"flex"},ge={class:"mt-lg row-px w-full"},Ee={for:"template_name"},Ie={class:"form-field"},Ye={__name:"CreateEdit",props:["template"],setup(A){const S=ae(()=>oe(()=>import("./AIAssist-D7VVWK8D.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28]))),{t:l}=q(),d=A,i=d.template?G.cloneDeep(d.template):null;re("postCtx",{});const x=H("workspaceCtx"),{notify:g}=se(),{versionContentObject:D}=le(),{insertEmoji:P,insertContent:w,replaceContent:U,focusEditor:B}=ie(),{createPost:F,formatTemplateContent:L,deleteTemplate:O}=ne(),p=W(!1),v=J({name:i?i.name:"",content:i?i.content:[D()]}),$=K(()=>d.template?l("template.edit_template"):l("template.create_new_template")),b=()=>({name:v.name,content:L(v.content)}),z=()=>{d.template||C(b()),d.template&&M(b())},C=(u,t=!1)=>{k.start(),p.value=!0,axios.post(route("mixpost.templates.api.store",{workspace:x.id}),u).then(r=>{if(g("success",l("template.template_created")),!t){j.get(route("mixpost.templates.edit",{workspace:x.id,template:r.data.id}),{},{preserveScroll:!0});return}j.get(route("mixpost.templates.create",{workspace:x.id}))}).finally(()=>{k.done(),p.value=!1})},M=u=>{k.start(),p.value=!0,axios.put(route("mixpost.templates.api.update",{workspace:x.id,template:d.template.id}),u).then(()=>{g("success",l("template.template_updated"))}).catch(t=>{g("error",t)}).finally(()=>{k.done(),p.value=!1})};return(u,t)=>(n(),N(T,null,[a(e(Q),{title:$.value},null,8,["title"]),f("div",be,[a(me,{title:$.value},{default:o(()=>[f("div",ke,[e(i)?(n(),_(E,{key:0,onClick:t[0]||(t[0]=()=>{e(F)(b().content)}),class:"mr-xs"},{default:o(()=>[m(c(e(l)("template.use_template")),1)]),_:1})):y("",!0),e(i)?(n(),_(e(X),{key:1,href:u.route("mixpost.templates.create",{workspace:e(x).id})},{default:o(()=>[a(Y,{class:"mr-xs"},{default:o(()=>[m(c(e(l)("template.create_new")),1)]),_:1})]),_:1},8,["href"])):y("",!0),e(i)?(n(),_(Z,{key:2,onClick:t[1]||(t[1]=()=>{e(O)(e(i))}),size:"sm"},{default:o(()=>[a(we)]),_:1})):y("",!0)])]),_:1},8,["title"]),f("div",ge,[f("form",{onSubmit:h(z,["prevent"])},[a(de,null,{title:o(()=>[m(c(e(l)("general.details")),1)]),default:o(()=>[a(ue,{class:"mb-lg max-w-full!"},{title:o(()=>[f("label",Ee,[m(c(e(l)("template.template_name"))+" ",1),a(pe,{danger:!0},{default:o(()=>t[10]||(t[10]=[m("*")])),_:1})])]),default:o(()=>[a(ee,{type:"text",modelValue:e(v).name,"onUpdate:modelValue":t[2]||(t[2]=r=>e(v).name=r),id:"template_name",required:""},null,8,["modelValue"])]),_:1}),f("div",Ie,[(n(!0),N(T,null,te(e(v).content,(r,R)=>(n(),_(fe,{key:R,id:"templateEditor",value:r.body,editable:!0,onUpdate:V=>r.body=V},{default:o(V=>[a(_e,{media:r.media,onUpdated:s=>r.media=s},null,8,["media","onUpdated"]),a(I,{responsive:!1,class:"relative justify-between border-t border-gray-200 pt-md mt-md"},{default:o(()=>[a(I,{responsive:!1},{default:o(()=>[a(ce,{onSelected:t[3]||(t[3]=s=>e(P)({editorId:"templateEditor",emoji:s})),onClose:t[4]||(t[4]=s=>e(B)({editorId:"templateEditor"}))}),a(xe,{onInsert:s=>{r.media=[...r.media,...s.items],s.crediting&&e(w)({editorId:"templateEditor",text:s.crediting})}},null,8,["onInsert"]),a(ve,{editAllowed:!0,onInsert:t[5]||(t[5]=s=>e(w)({editorId:"templateEditor",text:s}))}),a(ye,{editAllowed:!0,onInsert:t[6]||(t[6]=s=>e(w)({editorId:"templateEditor",text:s}))}),u.$page.props.ai_is_ready_to_use?(n(),_(e(S),{key:0,onInsert:t[7]||(t[7]=s=>e(w)({editorId:"templateEditor",text:s})),onReplace:t[8]||(t[8]=s=>e(U)({editorId:"templateEditor",text:s})),text:r.body},null,8,["text"])):y("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["value","onUpdate"]))),128))]),a(I,{responsive:!1,class:"items-center mt-lg"},{default:o(()=>[a(E,{disabled:p.value,type:"submit",class:"mr-xs"},{default:o(()=>[m(c(e(l)("template.save_template")),1)]),_:1},8,["disabled"]),e(i)?y("",!0):(n(),_(E,{key:0,onClick:t[9]||(t[9]=()=>{C(b(),!0)}),disabled:p.value,type:"button"},{default:o(()=>[m(c(e(l)("template.save_create_new")),1)]),_:1},8,["disabled"]))]),_:1})]),_:1})],32)])])],64))}};export{Ye as default};
