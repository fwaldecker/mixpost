import{d as z,u as B,i as y,a6 as F,H as I,x as O,c as g,o as v,a as r,e as n,b as e,g as P,w as a,j as $,S as L,y as M,k as m,t as l,z as A,f as D,_ as f,O as k,s as w,m as H,F as W,a1 as G,n as J}from"./app-C7yQ4yxP.js";import{u as K}from"./usePageMode-geRxYpZm.js";import{_ as Q}from"./Admin-2kdh7iq6.js";import{_ as R}from"./PageHeader-L61bBZJ1.js";import{_ as S}from"./Panel-DHnLtGhx.js";import{_ as U}from"./Radio-BputZrd1.js";import{E as X}from"./Eye-16K59JCb.js";import{T as Y}from"./Trash-TUAkcl9a.js";import{_ as C}from"./InputHidden-DUFFO3NU.js";import"./QueueList-DM6iDr1_.js";import"./Flex-B0LjVlwe.js";const Z={class:"row-py w-full mx-auto"},ee={key:0,class:"flex"},se={class:"row-px"},re={for:"name"},ae={for:"email"},te={class:"flex items-center space-x-sm rtl:space-x-reverse"},oe={key:0},le={for:"password"},ie={for:"password_confirmation"},ne=z({layout:Q}),be=Object.assign(ne,{__name:"CreateEdit",props:{mode:{type:String,default:"create"},user:{type:Object}},setup(_){const{t}=B(),h=y("routePrefix"),q=y("confirmation"),c=_,{notify:b}=J(),{user:x}=F(),V=I(()=>p.value?t("user.create_user"):"Edit user"),{isCreate:p,isEdit:u}=K(),s=O({name:u.value?c.user.name:"",email:u.value?c.user.email:"",is_admin:u.value?c.user.is_admin:!1,password:"",password_confirmation:""}),E=()=>{s.post(route("mixpost.users.store"),{preserveScroll:!0,preserveState:!0})},j=()=>{s.put(route("mixpost.users.update",{user:c.user.id}),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{const d=[t("user.user_has_been_updated"),t("auth.password_has_been_changed")];b("success",s.password?d.join(`
`):d[0])}})},N=()=>{p.value&&E(),u.value&&j()},T=()=>{q().title(t("user.delete_user")).description(t("user.confirm_delete_user")).destructive().onConfirm(d=>{d.isLoading(!0),G.delete(route(`${h}.users.delete`,{user:c.user.id}),{onSuccess(o){o.props.flash.error||b("success",t("user.delete_user"))},onFinish(){d.isLoading(!1)}})}).show()};return(d,o)=>(v(),g(W,null,[r(e(P),{title:V.value},null,8,["title"]),n("div",Z,[r(R,{title:V.value},{default:a(()=>[e(u)?(v(),g("div",ee,[r(e(L),{href:d.route(`${e(h)}.users.view`,{user:_.user.id}),class:"mr-xs rtl:mr-0 rtl:ml-xs"},{default:a(()=>[r(M,{size:"sm"},{icon:a(()=>[r(X)]),default:a(()=>[m(" "+l(e(t)("general.view")),1)]),_:1})]),_:1},8,["href"]),r(A,{onClick:T,size:"sm"},{icon:a(()=>[r(Y)]),_:1})])):$("",!0)]),_:1},8,["title"]),n("div",se,[n("form",{method:"post",onSubmit:D(N,["prevent"])},[r(S,null,{title:a(()=>[m(l(e(t)("user.user_details")),1)]),default:a(()=>[r(f,null,{title:a(()=>[n("label",re,l(e(t)("general.name")),1)]),footer:a(()=>[r(w,{message:e(s).errors.name},null,8,["message"])]),default:a(()=>[r(k,{modelValue:e(s).name,"onUpdate:modelValue":o[0]||(o[0]=i=>e(s).name=i),error:e(s).errors.name,type:"text",id:"name",class:"w-full",autofocus:"",required:""},null,8,["modelValue","error"])]),_:1}),r(f,{class:"mt-lg"},{title:a(()=>[n("label",ae,l(e(t)("general.email")),1)]),footer:a(()=>[r(w,{message:e(s).errors.email},null,8,["message"])]),default:a(()=>[r(k,{modelValue:e(s).email,"onUpdate:modelValue":o[1]||(o[1]=i=>e(s).email=i),error:e(s).errors.email,type:"email",id:"email",class:"w-full",autocomplete:"off",required:""},null,8,["modelValue","error"])]),_:1}),r(f,{class:"mt-lg"},{title:a(()=>[m(l(e(t)("user.system_admin")),1)]),default:a(()=>[n("div",te,[n("label",null,[r(U,{checked:e(s).is_admin,"onUpdate:checked":o[2]||(o[2]=i=>e(s).is_admin=i),value:!1,disabled:e(u)&&_.user.id===e(x).id},null,8,["checked","disabled"]),m(" "+l(e(t)("general.no")),1)]),n("label",null,[r(U,{checked:e(s).is_admin,"onUpdate:checked":o[3]||(o[3]=i=>e(s).is_admin=i),value:!0,disabled:e(u)&&_.user.id===e(x).id},null,8,["checked","disabled"]),m(" "+l(e(t)("general.yes")),1)])])]),_:1})]),_:1}),r(S,{class:"mt-lg"},{title:a(()=>[m(l(e(t)("auth.password")),1)]),description:a(()=>[e(u)?(v(),g("span",oe,l(e(t)("auth.leave_blank_password")),1)):$("",!0)]),default:a(()=>[r(f,null,{title:a(()=>[n("label",le,l(e(t)("auth.password")),1)]),footer:a(()=>[r(w,{message:e(s).errors.password},null,8,["message"])]),default:a(()=>[r(C,{modelValue:e(s).password,"onUpdate:modelValue":o[4]||(o[4]=i=>e(s).password=i),error:e(s).errors.password,id:"password",required:e(p),autocomplete:"new-password"},null,8,["modelValue","error","required"])]),_:1}),r(f,{class:"mt-lg"},{title:a(()=>[n("label",ie,l(e(t)("auth.confirm_password")),1)]),footer:a(()=>[r(w,{message:e(s).errors.password_confirmation},null,8,["message"])]),default:a(()=>[r(C,{modelValue:e(s).password_confirmation,"onUpdate:modelValue":o[5]||(o[5]=i=>e(s).password_confirmation=i),error:e(s).errors.password_confirmation,id:"password_confirmation",required:!!e(s).password,autocomplete:"new-password"},null,8,["modelValue","error","required"])]),_:1})]),_:1}),r(H,{type:"submit",disabled:e(s).processing,class:"mt-lg"},{default:a(()=>[m(l(e(p)?e(t)("general.create"):e(t)("general.update")),1)]),_:1},8,["disabled"])],32)])])],64))}});export{be as default};
