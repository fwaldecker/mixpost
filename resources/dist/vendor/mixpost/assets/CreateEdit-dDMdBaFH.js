import{B as S,c as k,o as h,e as d,H as D,q as _e,h as I,w as u,v as F,I as H,b as i,a,J as ue,K as We,D as B,L as Ke,M as Je,j,F as Z,r as Xe,N as Ye,y as G,k as y,t as v,m as ne,O as ee,Q as ce,R as Qe,T as et,U as Ie,V as N,W as Ve,Y as tt,s as U,Z as st,u as ye,i as K,$ as Be,x as ke,l as oe,a0 as nt,z as Re,n as we,a1 as Ee,a2 as ot,a3 as rt,a4 as it,P as lt,d as at,g as ut,f as dt}from"./app-C7yQ4yxP.js";import{_ as ct}from"./Admin-2kdh7iq6.js";import{u as pt}from"./usePageMode-geRxYpZm.js";import{_ as mt}from"./PageHeader-L61bBZJ1.js";import{_ as me}from"./Panel-DHnLtGhx.js";import{T as xe}from"./Trash-TUAkcl9a.js";import{A as ft}from"./ArrowTopRightOnSquare-509xbi7A.js";import{_ as R}from"./VerticalGroup-bCSYX3yy.js";import{_ as de}from"./Select-DMzj8fYH.js";import{_ as ge}from"./LabelSuffix-CW5l7-lp.js";import{_ as Oe}from"./Textarea-Cj05CTrn.js";import{H as gt,D as ht}from"./index-B0YDHBcd.js";import{n as Pe}from"./index.browser-OxPLOBIU.js";import{_ as vt,L as bt}from"./ListItem-D5WRjaC-.js";import{_ as Ne}from"./NoResult-BiKMAkVj.js";import{N as q,w as te,m as V,M as re,a as J,b as X,P as Ae,c as _t,T as W,t as he,S as se,d as yt,E as pe,k as kt,F as ve,e as Ce,f as $e,D as wt,g as xt,h as At,i as Ct,n as De,j as $t,l as Mt,o as Lt,p as be,q as Ht,r as Tt,V as zt,s as St,u as It,L as Vt,v as Bt}from"./index-la4Rclr_.js";import{H as Rt}from"./index-BGLc40gU.js";import{_ as Et}from"./UploadButton-B8Zy_vG0.js";import"./QueueList-DM6iDr1_.js";import"./Flex-B0LjVlwe.js";import"./vue.runtime.esm-bundler-D0TG_Qm6.js";import"./nprogress-DktYLWPJ.js";const Ot={},Pt={xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",viewBox:"0 0 7 18"};function Nt(e,t){return h(),k("svg",Pt,t[0]||(t[0]=[d("path",{d:"M2.10477 13.5C1.48483 13.5 0.982269 12.9963 0.982269 12.375C0.982269 11.7537 1.48483 11.25 2.10477 11.25C2.72472 11.25 3.22728 11.7537 3.22728 12.375C3.22728 12.9963 2.72472 13.5 2.10477 13.5ZM2.10477 6C1.48483 6 0.982269 5.49632 0.982269 4.875C0.982269 4.25368 1.48483 3.75 2.10477 3.75C2.72472 3.75 3.22728 4.25368 3.22728 4.875C3.22728 5.49632 2.72472 6 2.10477 6ZM2.10477 2.25C1.48483 2.25 0.982269 1.74632 0.982269 1.125C0.982269 0.50368 1.48483 0 2.10477 0C2.72472 0 3.22728 0.50368 3.22728 1.125C3.22728 1.74632 2.72472 2.25 2.10477 2.25ZM2.10477 17.25C1.48483 17.25 0.982269 16.7463 0.982269 16.125C0.982269 15.5037 1.48483 15 2.10477 15C2.72472 15 3.22728 15.5037 3.22728 16.125C3.22728 16.7463 2.72472 17.25 2.10477 17.25ZM2.10477 9.75C1.48483 9.75 0.982269 9.24632 0.982269 8.625C0.982269 8.00368 1.48483 7.5 2.10477 7.5C2.72472 7.5 3.22728 8.00368 3.22728 8.625C3.22728 9.24632 2.72472 9.75 2.10477 9.75ZM5.84646 13.5C5.22652 13.5 4.72395 12.9963 4.72395 12.375C4.72395 11.7537 5.22652 11.25 5.84646 11.25C6.4664 11.25 6.96897 11.7537 6.96897 12.375C6.96897 12.9963 6.4664 13.5 5.84646 13.5ZM5.84646 6C5.22652 6 4.72395 5.49632 4.72395 4.875C4.72395 4.25368 5.22652 3.75 5.84646 3.75C6.4664 3.75 6.96897 4.25368 6.96897 4.875C6.96897 5.49632 6.4664 6 5.84646 6ZM5.84646 2.25C5.22652 2.25 4.72395 1.74632 4.72395 1.125C4.72395 0.50368 5.22652 0 5.84646 0C6.4664 0 6.96897 0.50368 6.96897 1.125C6.96897 1.74632 6.4664 2.25 5.84646 2.25ZM5.84646 17.25C5.22652 17.25 4.72395 16.7463 4.72395 16.125C4.72395 15.5037 5.22652 15 5.84646 15C6.4664 15 6.96897 15.5037 6.96897 16.125C6.96897 16.7463 6.4664 17.25 5.84646 17.25ZM5.84646 9.75C5.22652 9.75 4.72395 9.24632 4.72395 8.625C4.72395 8.00368 5.22652 7.5 5.84646 7.5C6.4664 7.5 6.96897 8.00368 6.96897 8.625C6.96897 9.24632 6.4664 9.75 5.84646 9.75Z",fill:"currentColor"},null,-1)]))}const Dt=S(Ot,[["render",Nt]]),Ft=/^\s*>\s$/,qt=q.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:e}){return["blockquote",V(this.options.HTMLAttributes,e),0]},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[te({find:Ft,type:this.type})]}}),Ut=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,jt=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,Zt=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,Gt=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Wt=re.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return["strong",V(this.options.HTMLAttributes,e),0]},addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[X({find:Ut,type:this.type}),X({find:Zt,type:this.type})]},addPasteRules(){return[J({find:jt,type:this.type}),J({find:Gt,type:this.type})]}}),Kt="listItem",Le="textStyle",He=/^\s*([-+*])\s$/,Jt=q.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:e}){return["ul",V(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleBulletList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Kt,this.editor.getAttributes(Le)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=te({find:He,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=te({find:He,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Le),editor:this.editor})),[e]}}),Xt=/(^|[^`])`([^`]+)`(?!`)/,Yt=/(^|[^`])`([^`]+)`(?!`)/g,Qt=re.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:e}){return["code",V(this.options.HTMLAttributes,e),0]},addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[X({find:Xt,type:this.type})]},addPasteRules(){return[J({find:Yt,type:this.type})]}}),es=/^```([a-z]+)?[\s\n]$/,ts=/^~~~([a-z]+)?[\s\n]$/,ss=q.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:e=>{var t;const{languageClassPrefix:s}=this.options,o=[...((t=e.firstElementChild)===null||t===void 0?void 0:t.classList)||[]].filter(p=>p.startsWith(s)).map(p=>p.replace(s,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:e,HTMLAttributes:t}){return["pre",V(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,s=t.pos===1;return!e||t.parent.type.name!==this.name?!1:s||!t.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=e,{selection:s}=t,{$from:r,empty:l}=s;if(!l||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,p=r.parent.textContent.endsWith(`

`);return!o||!p?!1:e.chain().command(({tr:m})=>(m.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=e,{selection:s,doc:r}=t,{$from:l,empty:o}=s;if(!o||l.parent.type!==this.type||!(l.parentOffset===l.parent.nodeSize-2))return!1;const m=l.after();return m===void 0?!1:r.nodeAt(m)?e.commands.command(({tr:n})=>(n.setSelection(se.near(r.resolve(m))),!0)):e.commands.exitCode()}}},addInputRules(){return[he({find:es,type:this.type,getAttributes:e=>({language:e[1]})}),he({find:ts,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new Ae({key:new _t("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;const s=t.clipboardData.getData("text/plain"),r=t.clipboardData.getData("vscode-editor-data"),l=r?JSON.parse(r):void 0,o=l==null?void 0:l.mode;if(!s||!o)return!1;const{tr:p,schema:m}=e.state,f=m.text(s.replace(/\r\n?/g,`
`));return p.replaceSelectionWith(this.type.create({language:o},f)),p.selection.$from.parent.type!==this.type&&p.setSelection(W.near(p.doc.resolve(Math.max(0,p.selection.from-2)))),p.setMeta("paste",!0),e.dispatch(p),!0}}})]}});function ns(e={}){return new Ae({view(t){return new os(t,e)}})}class os{constructor(t,s){var r;this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=s.width)!==null&&r!==void 0?r:1,this.color=s.color===!1?void 0:s.color||"black",this.class=s.class,this.handlers=["dragover","dragend","drop","dragleave"].map(l=>{let o=p=>{this[l](p)};return t.dom.addEventListener(l,o),{name:l,handler:o}})}destroy(){this.handlers.forEach(({name:t,handler:s})=>this.editorView.dom.removeEventListener(t,s))}update(t,s){this.cursorPos!=null&&s.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t=this.editorView.state.doc.resolve(this.cursorPos),s=!t.parent.inlineContent,r,l=this.editorView.dom,o=l.getBoundingClientRect(),p=o.width/l.offsetWidth,m=o.height/l.offsetHeight;if(s){let c=t.nodeBefore,x=t.nodeAfter;if(c||x){let A=this.editorView.nodeDOM(this.cursorPos-(c?c.nodeSize:0));if(A){let z=A.getBoundingClientRect(),M=c?z.bottom:z.top;c&&x&&(M=(M+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let b=this.width/2*m;r={left:z.left,right:z.right,top:M-b,bottom:M+b}}}}if(!r){let c=this.editorView.coordsAtPos(this.cursorPos),x=this.width/2*p;r={left:c.left-x,right:c.left+x,top:c.top,bottom:c.bottom}}let f=this.editorView.dom.offsetParent;this.element||(this.element=f.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",s),this.element.classList.toggle("prosemirror-dropcursor-inline",!s);let n,g;if(!f||f==document.body&&getComputedStyle(f).position=="static")n=-pageXOffset,g=-pageYOffset;else{let c=f.getBoundingClientRect(),x=c.width/f.offsetWidth,A=c.height/f.offsetHeight;n=c.left-f.scrollLeft*x,g=c.top-f.scrollTop*A}this.element.style.left=(r.left-n)/p+"px",this.element.style.top=(r.top-g)/m+"px",this.element.style.width=(r.right-r.left)/p+"px",this.element.style.height=(r.bottom-r.top)/m+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),t)}dragover(t){if(!this.editorView.editable)return;let s=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),r=s&&s.inside>=0&&this.editorView.state.doc.nodeAt(s.inside),l=r&&r.type.spec.disableDropCursor,o=typeof l=="function"?l(this.editorView,s,t):l;if(s&&!o){let p=s.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let m=yt(this.editorView.state.doc,p,this.editorView.dragging.slice);m!=null&&(p=m)}this.setCursor(p),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)}}const rs=pe.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[ns(this.options)]}});class C extends se{constructor(t){super(t,t)}map(t,s){let r=t.resolve(s.map(this.head));return C.valid(r)?new C(r):se.near(r)}content(){return Ce.empty}eq(t){return t instanceof C&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,s){if(typeof s.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new C(t.resolve(s.pos))}getBookmark(){return new Me(this.anchor)}static valid(t){let s=t.parent;if(s.isTextblock||!is(t)||!ls(t))return!1;let r=s.type.spec.allowGapCursor;if(r!=null)return r;let l=s.contentMatchAt(t.index()).defaultType;return l&&l.isTextblock}static findGapCursorFrom(t,s,r=!1){e:for(;;){if(!r&&C.valid(t))return t;let l=t.pos,o=null;for(let p=t.depth;;p--){let m=t.node(p);if(s>0?t.indexAfter(p)<m.childCount:t.index(p)>0){o=m.child(s>0?t.indexAfter(p):t.index(p)-1);break}else if(p==0)return null;l+=s;let f=t.doc.resolve(l);if(C.valid(f))return f}for(;;){let p=s>0?o.firstChild:o.lastChild;if(!p){if(o.isAtom&&!o.isText&&!$e.isSelectable(o)){t=t.doc.resolve(l+o.nodeSize*s),r=!1;continue e}break}o=p,l+=s;let m=t.doc.resolve(l);if(C.valid(m))return m}return null}}}C.prototype.visible=!1;C.findFrom=C.findGapCursorFrom;se.jsonID("gapcursor",C);class Me{constructor(t){this.pos=t}map(t){return new Me(t.map(this.pos))}resolve(t){let s=t.resolve(this.pos);return C.valid(s)?new C(s):se.near(s)}}function is(e){for(let t=e.depth;t>=0;t--){let s=e.index(t),r=e.node(t);if(s==0){if(r.type.spec.isolating)return!0;continue}for(let l=r.child(s-1);;l=l.lastChild){if(l.childCount==0&&!l.inlineContent||l.isAtom||l.type.spec.isolating)return!0;if(l.inlineContent)return!1}}return!0}function ls(e){for(let t=e.depth;t>=0;t--){let s=e.indexAfter(t),r=e.node(t);if(s==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let l=r.child(s);;l=l.firstChild){if(l.childCount==0&&!l.inlineContent||l.isAtom||l.type.spec.isolating)return!0;if(l.inlineContent)return!1}}return!0}function as(){return new Ae({props:{decorations:ps,createSelectionBetween(e,t,s){return t.pos==s.pos&&C.valid(s)?new C(s):null},handleClick:ds,handleKeyDown:us,handleDOMEvents:{beforeinput:cs}}})}const us=kt({ArrowLeft:le("horiz",-1),ArrowRight:le("horiz",1),ArrowUp:le("vert",-1),ArrowDown:le("vert",1)});function le(e,t){const s=e=="vert"?t>0?"down":"up":t>0?"right":"left";return function(r,l,o){let p=r.selection,m=t>0?p.$to:p.$from,f=p.empty;if(p instanceof W){if(!o.endOfTextblock(s)||m.depth==0)return!1;f=!1,m=r.doc.resolve(t>0?m.after():m.before())}let n=C.findGapCursorFrom(m,t,f);return n?(l&&l(r.tr.setSelection(new C(n))),!0):!1}}function ds(e,t,s){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!C.valid(r))return!1;let l=e.posAtCoords({left:s.clientX,top:s.clientY});return l&&l.inside>-1&&$e.isSelectable(e.state.doc.nodeAt(l.inside))?!1:(e.dispatch(e.state.tr.setSelection(new C(r))),!0)}function cs(e,t){if(t.inputType!="insertCompositionText"||!(e.state.selection instanceof C))return!1;let{$from:s}=e.state.selection,r=s.parent.contentMatchAt(s.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let l=ve.empty;for(let p=r.length-1;p>=0;p--)l=ve.from(r[p].createAndFill(null,l));let o=e.state.tr.replace(s.pos,s.pos,new Ce(l,0,0));return o.setSelection(W.near(o.doc.resolve(s.pos+1))),e.dispatch(o),!1}function ps(e){if(!(e.selection instanceof C))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",wt.create(e.doc,[xt.widget(e.selection.head,t,{key:"gapcursor"})])}const ms=pe.create({name:"gapCursor",addProseMirrorPlugins(){return[as()]},extendNodeSchema(e){var t;const s={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:(t=At(Ct(e,"allowGapCursor",s)))!==null&&t!==void 0?t:null}}}),fs=q.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,V(this.options.HTMLAttributes,t),0]},addCommands(){return{setHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.setNode(this.name,e):!1,toggleHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.toggleNode(this.name,"paragraph",e):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>he({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}}),gs=q.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:e}){return["hr",V(this.options.HTMLAttributes,e)]},addCommands(){return{setHorizontalRule:()=>({chain:e,state:t})=>{const{selection:s}=t,{$from:r,$to:l}=s,o=e();return r.parentOffset===0?o.insertContentAt({from:Math.max(r.pos-1,0),to:l.pos},{type:this.name}):$t(s)?o.insertContentAt(l.pos,{type:this.name}):o.insertContent({type:this.name}),o.command(({tr:p,dispatch:m})=>{var f;if(m){const{$to:n}=p.selection,g=n.end();if(n.nodeAfter)n.nodeAfter.isTextblock?p.setSelection(W.create(p.doc,n.pos+1)):n.nodeAfter.isBlock?p.setSelection($e.create(p.doc,n.pos)):p.setSelection(W.create(p.doc,n.pos));else{const c=(f=n.parent.type.contentMatch.defaultType)===null||f===void 0?void 0:f.create();c&&(p.insert(g,c),p.setSelection(W.create(p.doc,g+1)))}p.scrollIntoView()}return!0}).run()}}},addInputRules(){return[De({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),hs=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,vs=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,bs=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,_s=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,ys=re.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>e.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",V(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[X({find:hs,type:this.type}),X({find:bs,type:this.type})]},addPasteRules(){return[J({find:vs,type:this.type}),J({find:_s,type:this.type})]}}),ks=q.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",V(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),ws="listItem",Te="textStyle",ze=/^(\d+)\.\s$/,xs=q.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1},type:{default:null,parseHTML:e=>e.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:e}){const{start:t,...s}=e;return t===1?["ol",V(this.options.HTMLAttributes,s),0]:["ol",V(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleOrderedList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(ws,this.editor.getAttributes(Te)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=te({find:ze,type:this.type,getAttributes:t=>({start:+t[1]}),joinPredicate:(t,s)=>s.childCount+s.attrs.start===+t[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=te({find:ze,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:t=>({start:+t[1],...this.editor.getAttributes(Te)}),joinPredicate:(t,s)=>s.childCount+s.attrs.start===+t[1],editor:this.editor})),[e]}}),As=q.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:e}){return["p",V(this.options.HTMLAttributes,e),0]},addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Cs=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,$s=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Ms=re.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["s",V(this.options.HTMLAttributes,e),0]},addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[X({find:Cs,type:this.type})]},addPasteRules(){return[J({find:$s,type:this.type})]}}),Ls=pe.create({name:"starterKit",addExtensions(){const e=[];return this.options.bold!==!1&&e.push(Wt.configure(this.options.bold)),this.options.blockquote!==!1&&e.push(qt.configure(this.options.blockquote)),this.options.bulletList!==!1&&e.push(Jt.configure(this.options.bulletList)),this.options.code!==!1&&e.push(Qt.configure(this.options.code)),this.options.codeBlock!==!1&&e.push(ss.configure(this.options.codeBlock)),this.options.document!==!1&&e.push(Mt.configure(this.options.document)),this.options.dropcursor!==!1&&e.push(rs.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&e.push(ms.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&e.push(Rt.configure(this.options.hardBreak)),this.options.heading!==!1&&e.push(fs.configure(this.options.heading)),this.options.history!==!1&&e.push(gt.configure(this.options.history)),this.options.horizontalRule!==!1&&e.push(gs.configure(this.options.horizontalRule)),this.options.italic!==!1&&e.push(ys.configure(this.options.italic)),this.options.listItem!==!1&&e.push(ks.configure(this.options.listItem)),this.options.orderedList!==!1&&e.push(xs.configure(this.options.orderedList)),this.options.paragraph!==!1&&e.push(As.configure(this.options.paragraph)),this.options.strike!==!1&&e.push(Ms.configure(this.options.strike)),this.options.text!==!1&&e.push(Lt.configure(this.options.text)),e}}),Hs=re.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["u",V(this.options.HTMLAttributes,e),0]},addCommands(){return{setUnderline:()=>({commands:e})=>e.setMark(this.name),toggleUnderline:()=>({commands:e})=>e.toggleMark(this.name),unsetUnderline:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),Ts=pe.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:e=>{const t=e.style.textAlign;return this.options.alignments.includes(t)?t:this.options.defaultAlignment},renderHTML:e=>e.textAlign?{style:`text-align: ${e.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:e=>({commands:t})=>this.options.alignments.includes(e)?this.options.types.map(s=>t.updateAttributes(s,{textAlign:e})).every(s=>s):!1,unsetTextAlign:()=>({commands:e})=>this.options.types.map(t=>e.resetAttributes(t,"textAlign")).every(t=>t),toggleTextAlign:e=>({editor:t,commands:s})=>this.options.alignments.includes(e)?t.isActive({textAlign:e})?s.unsetTextAlign():s.setTextAlign(e):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),zs=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,Ss=q.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:e}){return["img",V(this.options.HTMLAttributes,e)]},addCommands(){return{setImage:e=>({commands:t})=>t.insertContent({type:this.name,attrs:e})}},addInputRules(){return[De({find:zs,type:this.type,getAttributes:e=>{const[,,t,s,r]=e;return{src:s,alt:t,title:r}}})]}}),T={INLINE:"inline",CENTER:"center",FLOAT_LEFT:"left",FLOAT_RIGHT:"right"},fe={};function Is(e){return new Promise((t,s)=>{const r={complete:!1,width:0,height:0,src:e};if(!e){s(r);return}if(fe[e]){t({...fe[e]});return}const l=new Image;l.onload=()=>{r.width=l.width,r.height=l.height,r.complete=!0,fe[e]={...r},t(r)},l.onerror=()=>{s(r)},l.src=e})}function Vs(e,t,s){return e<t?t:e>s?s:e}const Bs=/(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})/,Rs=null,Es=T.INLINE,Os={},Ps={xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 fill-current",viewBox:"0 0 24 24"};function Ns(e,t){return h(),k("svg",Ps,t[0]||(t[0]=[d("path",{d:"M4 19h16v2H4zm5-4h11v2H9zm-5-4h16v2H4zm0-8h16v2H4zm5 4h11v2H9z"},null,-1)]))}const Fe=S(Os,[["render",Ns]]),Ds={},Fs={xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 fill-current",viewBox:"0 0 24 24"};function qs(e,t){return h(),k("svg",Fs,t[0]||(t[0]=[d("path",{d:"M4 19h16v2H4zm3-4h10v2H7zm-3-4h16v2H4zm0-8h16v2H4zm3 4h10v2H7z"},null,-1)]))}const qe=S(Ds,[["render",qs]]),Us={},js={xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 fill-current",viewBox:"0 0 24 24"};function Zs(e,t){return h(),k("svg",js,t[0]||(t[0]=[d("path",{d:"M4 19h16v2H4zm0-4h11v2H4zm0-4h16v2H4zm0-8h16v2H4zm0 4h11v2H4z"},null,-1)]))}const Ue=S(Us,[["render",Zs]]),Gs={class:"p-md bg-white"},Ws={class:"editorClassicMenu flex gap-xs"},Ks={__name:"ImageMenu",props:{editor:{required:!0,type:Ht},node:be.node,updateAttributes:be.updateAttributes,deleteNode:{required:!0,type:Function},selected:{required:!0,type:Boolean}},setup(e){const t=e,s=D(()=>t.node.attrs.display),r=o=>{if(o===s.value){t.updateAttributes({display:T.INLINE});return}t.updateAttributes({display:o})},l=()=>{t.deleteNode()};return(o,p)=>{const m=_e("tooltip");return h(),I(i(We),{triggers:[],shown:e.selected,autoHide:!1},{popper:u(({hide:f})=>[d("div",Gs,[d("div",Ws,[F((h(),k("button",{onClick:p[0]||(p[0]=n=>r(i(T).FLOAT_LEFT)),class:H({"is-active":i(T).FLOAT_LEFT===s.value}),type:"button"},[a(Ue)],2)),[[m,o.$t("editor.align_left")]]),F((h(),k("button",{onClick:p[1]||(p[1]=n=>r(i(T).CENTER)),class:H({"is-active":i(T).CENTER===s.value}),type:"button"},[a(qe)],2)),[[m,o.$t("editor.align_center")]]),F((h(),k("button",{onClick:p[2]||(p[2]=n=>r(i(T).FLOAT_RIGHT)),class:H({"is-active":i(T).FLOAT_RIGHT===s.value}),type:"button"},[a(Fe)],2)),[[m,o.$t("editor.align_right")]]),F((h(),I(ue,{onClick:l,destructive:""},{default:u(()=>[a(xe)]),_:1})),[[m,o.$t("editor.remove_image")]])])])]),_:1},8,["shown"])}}},Js={class:"drag-handle",contentEditable:"false",draggable:"true","data-drag-handle":""},Xs=["src","title","alt","width","height","data-display"],Ys={key:0,class:"border border-primary-500 h-full left-0 absolute top-0 w-full z-10"},Qs=["onMousedown"],ae=20,Se=1e5,en={__name:"Image",props:{...be},setup(e){const t=e,s={TOP_LEFT:"tl",TOP_RIGHT:"tr",BOTTOM_LEFT:"bl",BOTTOM_RIGHT:"br"},r=D(()=>t.node.attrs.src),l=D(()=>t.node.attrs.width),o=D(()=>t.node.attrs.height),p=D(()=>t.node.attrs.display),m=D(()=>({"float-none inline-block":p.value===T.INLINE,"flex justify-center":p.value===T.CENTER,"float-left ml-0 mr-md":p.value===T.FLOAT_LEFT,"float-right ml-xs mr-0":p.value===T.FLOAT_RIGHT})),f=B({width:0,height:0}),n=B({width:Se,height:Se}),g=B(!1);Ke(async()=>{const w=await Is(r.value);w.complete||(w.width=ae,w.height=ae),f.value={width:w.width,height:w.height}});const c=()=>{const{width:w}=getComputedStyle(t.editor.view.dom);n.value=parseInt(w,10)},x=()=>{t.editor.commands.setNodeSelection(t.getPos())};Je(()=>{c()});const A=B({x:0,y:0,w:0,h:0,dir:""}),z=(w,ie)=>{w.preventDefault(),w.stopPropagation(),A.value.x=w.clientX,A.value.y=w.clientY;const O=f.value.width,Y=f.value.height,Q=O/Y;let{width:L,height:P}=t.node.attrs;const E=n.value.width;L&&!P?(L=L>E?E:L,P=Math.round(L/Q)):P&&!L?(L=Math.round(P*Q),L=L>E?E:L):!L&&!P?(L=O>E?E:O,P=Math.round(L/Q)):L=L>E?E:L,A.value.w=L,A.value.h=P,A.value.dir=ie,g.value=!0,_()},M=w=>{if(w.preventDefault(),w.stopPropagation(),!g.value)return;const{x:ie,y:O,w:Y,h:Q,dir:L}=A.value,P=(w.clientX-ie)*(/l/.test(L)?-1:1),E=(w.clientY-O)*(/t/.test(L)?-1:1);t.updateAttributes({width:Vs(Y+P,ae,n.value.width),height:Math.max(Q+E,ae)})},b=w=>{w.preventDefault(),w.stopPropagation(),g.value&&(g.value=!1,A.value={x:0,y:0,w:0,h:0,dir:""},$(),x())},_=()=>{document.addEventListener("mousemove",M,!0),document.addEventListener("mouseup",b,!0)},$=()=>{document.removeEventListener("mousemove",M,!0),document.removeEventListener("mouseup",b,!0)};return(w,ie)=>(h(),I(i(Tt),{as:"span",class:H([m.value,"leading-none max-w-full select-none align-baseline"])},{default:u(()=>[d("figure",Js,[d("div",{class:H(["relative inline-block clear-both max-w-full outline-solid outline-1",{"outline-primary-500":w.selected}])},[d("img",{src:r.value,title:w.node.attrs.title,alt:w.node.attrs.alt,width:l.value,height:o.value,"data-display":w.node.attrs.display,class:"cursor-pointer m-0",onClick:x},null,8,Xs),w.editor.isEditable?F((h(),k("div",Ys,[(h(),k(Z,null,Xe(s,O=>d("span",{key:O,class:H(["bg-primary-500 border border-white rounded-sm box-border block h-sm w-sm absolute z-10",{tl:"left-[-6px] top-[-6px] cursor-nwse-resize",tr:"right-[-6px] top-[-6px] cursor-nesw-resize",bl:"left-[-6px] bottom-[-6px] cursor-nesw-resize",br:"right-[-6px] bottom-[-6px] cursor-nwse-resize"}[O]]),onMousedown:Y=>z(Y,O)},null,42,Qs)),64))],512)),[[Ye,w.selected||g.value]]):j("",!0),a(Ks,{editor:w.editor,node:w.node,selected:w.selected,updateAttributes:w.updateAttributes,deleteNode:w.deleteNode},null,8,["editor","node","selected","updateAttributes","deleteNode"])],2)])]),_:1},8,["class"]))}},tn=Ss.extend({inline(){return!0},group(){return"inline"},addAttributes(){var e;return{...(e=this.parent)==null?void 0:e.call(this),width:{default:Rs,parseHTML:t=>{const s=t.style.width||t.getAttribute("width")||null;return s==null?null:parseInt(s,10)},renderHTML:t=>({width:t.width})},height:{default:null,parseHTML:t=>{const s=t.style.height||t.getAttribute("height")||null;return s==null?null:parseInt(s,10)},renderHTML:t=>({height:t.height})},display:{default:Es,parseHTML:t=>{const{cssFloat:s,display:r}=t.style;let l=t.getAttribute("data-display")||t.getAttribute("display");return l?l=/(inline|center|left|right)/.test(l)?l:T.INLINE:s==="left"&&!r?l=T.FLOAT_LEFT:s==="right"&&!r?l=T.FLOAT_RIGHT:!s&&r==="center"?l=T.CENTER:l=T.INLINE,l},renderHTML:t=>({"data-display":t.display})}}},addOptions(){var e;return{...(e=this.parent)==null?void 0:e.call(this),inline:!0,urlPattern:Bs}},addNodeView(){return zt(en)},parseHTML(){return[{tag:"img[src]"}]}}),sn={},nn={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"w-6 h-6 fill-current"};function on(e,t){return h(),k("svg",nn,t[0]||(t[0]=[d("path",{d:"M17.061,11.22C17.641,10.462,18,9.526,18,8.5C18,6.019,15.981,4,13.5,4H6v15h8c2.481,0,4.5-2.019,4.5-4.5 C18.5,13.203,17.94,12.042,17.061,11.22z M13.5,7C14.327,7,15,7.673,15,8.5S14.327,10,13.5,10H9V7H13.5z M14,16H9v-3h5 c0.827,0,1.5,0.673,1.5,1.5S14.827,16,14,16z"},null,-1)]))}const rn=S(sn,[["render",on]]),ln={},an={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"w-6 h-6 fill-current"};function un(e,t){return h(),k("svg",an,t[0]||(t[0]=[d("path",{d:"M19 7L19 4 9 4 9 7 11.868 7 9.012 17 5 17 5 20 15 20 15 17 12.132 17 14.988 7z"},null,-1)]))}const dn=S(ln,[["render",un]]),cn={},pn={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"w-6 h-6 fill-current"};function mn(e,t){return h(),k("svg",pn,t[0]||(t[0]=[d("path",{d:"M5 18H19V20H5zM6 4v6c0 3.309 2.691 6 6 6s6-2.691 6-6V4h-2v6c0 2.206-1.794 4-4 4s-4-1.794-4-4V4H6z"},null,-1)]))}const fn=S(cn,[["render",mn]]),gn={},hn={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"w-6 h-6 fill-current"};function vn(e,t){return h(),k("svg",hn,t[0]||(t[0]=[d("path",{d:"M20 11h-8c-4 0-4-1.816-4-2.5C8 7.882 8 6 12 6c2.8 0 2.99 1.678 3 2.014L16 8h1c0-1.384-1.045-4-5-4C6.584 4 6 7.147 6 8.5c0 .728.148 1.667.736 2.5H4v2h8 5.227H20V11zM12 18c-3.793 0-3.99-1.815-4-2H6c0 .04.069 4 6 4 5.221 0 6-2.819 6-4.5 0-.146-.009-.317-.028-.5h-2.006C15.998 15.2 16 15.376 16 15.5 16 16.184 16 18 12 18z"},null,-1)]))}const bn=S(gn,[["render",vn]]),_n={},yn={xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 fill-current",viewBox:"0 0 24 24"};function kn(e,t){return h(),k("svg",yn,t[0]||(t[0]=[d("path",{d:"M4 6h2v2H4zm0 5h2v2H4zm0 5h2v2H4zm16-8V6H8.023v2H18.8zM8 11h12v2H8zm0 5h12v2H8z"},null,-1)]))}const wn=S(_n,[["render",kn]]),xn={},An={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"w-6 h-6 fill-current"};function Cn(e,t){return h(),k("svg",An,t[0]||(t[0]=[d("path",{d:"M5.282 12.064c-.428.328-.72.609-.875.851-.155.24-.249.498-.279.768h2.679v-.748H5.413c.081-.081.152-.151.212-.201.062-.05.182-.142.361-.27.303-.218.511-.42.626-.604.116-.186.173-.375.173-.578 0-.189-.05-.363-.151-.512-.1-.153-.237-.268-.412-.341-.174-.076-.419-.111-.733-.111-.3 0-.537.038-.706.114-.172.078-.302.19-.396.338-.094.143-.159.346-.194.604l.894.076c.025-.188.074-.317.147-.394.072-.073.166-.108.279-.108.11 0 .2.035.272.108.073.071.108.156.108.258 0 .091-.037.19-.108.297C5.711 11.713 5.544 11.865 5.282 12.064zM5.337 18.45c-.114 0-.208-.036-.282-.105-.074-.07-.128-.195-.162-.378L4 18.085c.059.204.142.372.251.506.109.133.248.235.417.306C4.836 18.966 5.067 19 5.36 19c.3 0 .541-.047.725-.14.185-.096.325-.228.424-.403.098-.175.146-.354.146-.544 0-.152-.029-.282-.088-.393-.06-.107-.142-.195-.249-.261-.066-.042-.161-.078-.286-.11.155-.085.268-.183.345-.299.076-.115.113-.24.113-.383 0-.239-.093-.437-.281-.596-.187-.159-.49-.238-.909-.238-.365 0-.648.072-.847.219-.2.143-.334.353-.404.626l.844.151c.023-.162.067-.274.133-.338s.151-.098.257-.098c.103 0 .183.032.241.089.059.06.087.139.087.238 0 .104-.038.193-.117.27s-.177.112-.293.112c-.028 0-.066-.004-.116-.011L5.04 17.54c.123-.036.22-.056.289-.056.132 0 .237.041.313.126.077.082.115.199.115.352 0 .146-.04.266-.119.354C5.558 18.403 5.458 18.45 5.337 18.45zM6.285 8.367V5H5.546C5.451 5.208 5.319 5.383 5.152 5.523 4.984 5.665 4.748 5.785 4.444 5.888v.754C4.65 6.577 4.821 6.509 4.958 6.438c.137-.069.277-.162.423-.276v2.206H6.285zM9 6H20V8H9zM9 11H20V13H9zM9 16H20V18H9z"},null,-1)]))}const $n=S(xn,[["render",Cn]]),Mn={},Ln={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"w-6 h-6 fill-current"};function Hn(e,t){return h(),k("svg",Ln,t[0]||(t[0]=[d("path",{d:"M3.691 6.292C5.094 4.771 7.217 4 10 4h1v2.819L10.196 6.98c-1.37.274-2.323.813-2.833 1.604C7.05 9.071 6.947 9.591 6.925 10H9h1c.553 0 1 .447 1 1v7c0 1.103-.897 2-2 2H3c-.553 0-1-.447-1-1v-5l.003-2.919C1.994 10.97 1.804 8.34 3.691 6.292zM20 20h-6c-.553 0-1-.447-1-1v-5l.003-2.919c-.009-.111-.199-2.741 1.688-4.789C16.094 4.771 18.217 4 21 4h1v2.819L21.196 6.98c-1.37.274-2.323.813-2.833 1.604C18.05 9.071 17.947 9.591 17.925 10H20h1c.553 0 1 .447 1 1v7C22 19.103 21.103 20 20 20z"},null,-1)]))}const Tn=S(Mn,[["render",Hn]]),zn={},Sn={viewBox:"0 0 20 20",class:"w-6 h-6 fill-current"};function In(e,t){return h(),k("svg",Sn,t[0]||(t[0]=[d("path",{d:"M3.598.687h1.5v5h-1.5zm14.5 0h1.5v5h-1.5z"},null,-1),d("path",{d:"M19.598 4.187v1.5h-16v-1.5zm-16 14.569h1.5v-5h-1.5zm14.5 0h1.5v-5h-1.5z"},null,-1),d("path",{d:"M19.598 15.256v-1.5h-16v1.5zM5.081 9h6v2h-6zm8 0h6v2h-6zm-9.483 1L0 12.5v-5z"},null,-1)]))}const Vn=S(zn,[["render",In]]),Bn={},Rn={xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 fill-current",viewBox:"0 0 24 24"};function En(e,t){return h(),k("svg",Rn,t[0]||(t[0]=[d("path",{d:"M4 7h16v2H4zm0-4h16v2H4zm0 8h16v2H4zm0 4h16v2H4zm2 4h12v2H6z"},null,-1)]))}const On=S(Bn,[["render",En]]),Pn={},Nn={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"};function Dn(e,t){return h(),k("svg",Nn,t[0]||(t[0]=[d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"},null,-1)]))}const je=S(Pn,[["render",Dn]]),Fn={},qn={xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 fill-current",viewBox:"0 0 24 24"};function Un(e,t){return h(),k("svg",qn,t[0]||(t[0]=[d("path",{d:"M16.949 14.121 19.071 12a5.008 5.008 0 0 0 0-7.071 5.006 5.006 0 0 0-7.071 0l-.707.707 1.414 1.414.707-.707a3.007 3.007 0 0 1 4.243 0 3.005 3.005 0 0 1 0 4.243l-2.122 2.121a2.723 2.723 0 0 1-.844.57L13.414 12l1.414-1.414-.707-.707a4.965 4.965 0 0 0-3.535-1.465c-.235 0-.464.032-.691.066L3.707 2.293 2.293 3.707l18 18 1.414-1.414-5.536-5.536c.277-.184.538-.396.778-.636zm-6.363 3.536a3.007 3.007 0 0 1-4.243 0 3.005 3.005 0 0 1 0-4.243l1.476-1.475-1.414-1.414L4.929 12a5.008 5.008 0 0 0 0 7.071 4.983 4.983 0 0 0 3.535 1.462A4.982 4.982 0 0 0 12 19.071l.707-.707-1.414-1.414-.707.707z"},null,-1)]))}const jn=S(Fn,[["render",Un]]),Zn={class:"w-full flex"},Gn={for:"target"},Wn={value:"_self"},Kn={value:"_blank"},Jn={__name:"InsertLink",props:{editor:{required:!0}},emits:["insert"],setup(e,{emit:t}){const s=e,r=B(!1),l=B(""),o=B("_self"),p=()=>{r.value=!0;const{href:g,target:c}=s.editor.getAttributes("link");g&&(l.value=g),c&&(o.value=c)},m=()=>{r.value=!1,l.value="",o.value="_self"},f=()=>{s.editor.commands.setLink({href:l.value,target:o.value}),m()},n=()=>{s.editor.chain().focus().unsetLink().run(),m()};return(g,c)=>(h(),k(Z,null,[d("button",{onClick:p,class:H([{"is-active":e.editor.isActive("link")},"flex"]),type:"button"},[a(je)],2),a(ce,{show:r.value,"max-width":"sm",closeable:!0,"scrollable-body":!0,onClose:m},{header:u(()=>[y(v(g.$t("general.insert"))+"/"+v(g.$t("editor.edit_link")),1)]),body:u(()=>[a(R,null,{title:u(()=>c[2]||(c[2]=[d("label",{for:"href"},"URL",-1)])),default:u(()=>[d("div",Zn,[a(ee,{type:"text",modelValue:l.value,"onUpdate:modelValue":c[0]||(c[0]=x=>l.value=x),id:"href",class:"mr-xs"},null,8,["modelValue"]),a(G,{onClick:n,size:"md",disabled:!e.editor.isActive("link")},{icon:u(()=>[a(jn)]),_:1},8,["disabled"])])]),_:1}),a(R,{class:"mt-lg"},{title:u(()=>[d("label",Gn,v(g.$t("editor.open_link_in")),1)]),default:u(()=>[a(de,{modelValue:o.value,"onUpdate:modelValue":c[1]||(c[1]=x=>o.value=x),id:"target"},{default:u(()=>[d("option",Wn,v(g.$t("editor.current_window")),1),d("option",Kn,v(g.$t("editor.new_window")),1)]),_:1},8,["modelValue"])]),_:1})]),footer:u(()=>[a(G,{onClick:m,class:"mr-xs"},{default:u(()=>[y(v(g.$t("general.cancel")),1)]),_:1}),a(ne,{onClick:f},{default:u(()=>[y(v(g.$t("general.insert")),1)]),_:1})]),_:1},8,["show"])],64))}},Xn={},Yn={xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 fill-current"};function Qn(e,t){return h(),k("svg",Yn,t[0]||(t[0]=[d("path",{d:"M4 11h16v2H4z","fill-rule":"evenodd"},null,-1)]))}const eo=S(Xn,[["render",Qn]]),to=(e,t,s)=>{const r=e.replace().split(/(?:\r\n?|\n)/),l=[];r.forEach(p=>{const m={type:"paragraph"};p.length>0&&(m.content=[{type:"text",text:p}]);const f=St.fromJSON(t.doc.type.schema,m);l.push(f)});const o=ve.fromArray(l);return Ce.maxOpen(o)},so={key:0,class:"editorClassicMenu text-stone-800 flex flex-wrap gap-xs border-b border-gray-200 pb-md mb-md"},no={type:"button",class:"w-28 text-left h-full"},oo=["disabled"],ro=["disabled"],io=["disabled"],lo=["disabled"],ao={type:"button"},uo={__name:"EditorClassic",props:{value:{required:!0},editable:{type:Boolean,default:!0},placeholder:{type:String,default:""}},emits:["update"],setup(e,{emit:t}){Qe();const s=e,r=t;B();const l=B(!1),o=It({editable:s.editable,content:s.value,extensions:[Ls,Hs,Ts.configure({types:["heading","paragraph"]}),tn,Vt.configure({openOnClick:!1})],editorProps:{attributes:{class:"focus:outline-hidden min-h-[150px]"},clipboardTextParser:to},onUpdate:()=>{r("update",o.value.getHTML())},onFocus:()=>{l.value=!0},onBlur:()=>{l.value=!1}});et(()=>{o.value.destroy()}),Ie(()=>s.value,f=>{f!==o.value.getHTML()&&o.value.commands.setContent(f)});const p=D(()=>o.value.isActive("heading",{level:1})?"Heading 1":o.value.isActive("heading",{level:2})?"Heading 2":o.value.isActive("heading",{level:3})?"Heading 3":o.value.isActive("heading",{level:4})?"Heading 4":o.value.isActive("heading",{level:5})?"Heading 5":o.value.isActive("heading",{level:6})?"Heading 6":"Paragraph"),m=f=>{o.value.chain().focus().setImage({src:f}).run()};return(f,n)=>{const g=_e("tooltip");return h(),k("div",{class:H([{"border-primary-200 ring-3 ring-primary-200/50":l.value},"editorClassic border border-gray-200 rounded-lg p-md pb-xs text-base transition-colors ease-in-out duration-200"])},[i(o)?(h(),k("div",so,[a(Ve,{"width-classes":"w-40",placement:"bottom-start"},{trigger:u(()=>[d("button",no,v(p.value),1)]),content:u(()=>[a(N,{onClick:n[0]||(n[0]=c=>i(o).chain().focus().setParagraph().run()),isActive:i(o).isActive("paragraph"),size:"xs",as:"button"},{default:u(()=>n[21]||(n[21]=[y(" Paragraph ")])),_:1},8,["isActive"]),a(N,{onClick:n[1]||(n[1]=c=>i(o).chain().focus().toggleHeading({level:1}).run()),isActive:i(o).isActive("heading",{level:1}),size:"xs",as:"button"},{default:u(()=>n[22]||(n[22]=[d("span",{class:"text-2xl"},"Heading 1",-1)])),_:1},8,["isActive"]),a(N,{onClick:n[2]||(n[2]=c=>i(o).chain().focus().toggleHeading({level:2}).run()),isActive:i(o).isActive("heading",{level:2}),size:"xs",as:"button"},{default:u(()=>n[23]||(n[23]=[d("span",{class:"text-xl"},"Heading 2",-1)])),_:1},8,["isActive"]),a(N,{onClick:n[3]||(n[3]=c=>i(o).chain().focus().toggleHeading({level:3}).run()),isActive:i(o).isActive("heading",{level:3}),size:"xs",as:"button"},{default:u(()=>n[24]||(n[24]=[d("span",{class:"text-lg"},"Heading 3",-1)])),_:1},8,["isActive"]),a(N,{onClick:n[4]||(n[4]=c=>i(o).chain().focus().toggleHeading({level:4}).run()),isActive:i(o).isActive("heading",{level:4}),size:"xs",as:"button"},{default:u(()=>n[25]||(n[25]=[d("span",{class:"text-md"},"Heading 4",-1)])),_:1},8,["isActive"]),a(N,{onClick:n[5]||(n[5]=c=>i(o).chain().focus().toggleHeading({level:5}).run()),isActive:i(o).isActive("heading",{level:5}),size:"xs",as:"button"},{default:u(()=>n[26]||(n[26]=[d("span",{class:"text-base"},"Heading 5",-1)])),_:1},8,["isActive"]),a(N,{onClick:n[6]||(n[6]=c=>i(o).chain().focus().toggleHeading({level:6}).run()),isActive:i(o).isActive("heading",{level:6}),size:"xs",as:"button"},{default:u(()=>n[27]||(n[27]=[d("span",{class:"text-sm"},"Heading 6",-1)])),_:1},8,["isActive"])]),_:1}),d("button",{onClick:n[7]||(n[7]=c=>i(o).chain().focus().toggleBold().run()),disabled:!i(o).can().chain().focus().toggleBold().run(),class:H({"is-active":i(o).isActive("bold")}),type:"button"},[a(rn)],10,oo),d("button",{onClick:n[8]||(n[8]=c=>i(o).chain().focus().toggleItalic().run()),disabled:!i(o).can().chain().focus().toggleItalic().run(),class:H({"is-active":i(o).isActive("italic")}),type:"button"},[a(dn)],10,ro),d("button",{onClick:n[9]||(n[9]=c=>i(o).chain().focus().toggleUnderline().run()),disabled:!i(o).can().chain().focus().toggleItalic().run(),class:H({"is-active":i(o).isActive("underline")}),type:"button"},[a(fn)],10,io),d("button",{onClick:n[10]||(n[10]=c=>i(o).chain().focus().toggleStrike().run()),disabled:!i(o).can().chain().focus().toggleStrike().run(),class:H([{"is-active":i(o).isActive("strike")},"mr-sm"]),type:"button"},[a(bn)],10,lo),d("button",{onClick:n[11]||(n[11]=c=>i(o).chain().focus().setTextAlign("left").run()),class:H({"is-active":i(o).isActive({textAlign:"left"})}),type:"button"},[a(Ue)],2),d("button",{onClick:n[12]||(n[12]=c=>i(o).chain().focus().setTextAlign("center").run()),class:H({"is-active":i(o).isActive({textAlign:"center"})}),type:"button"},[a(qe)],2),d("button",{onClick:n[13]||(n[13]=c=>i(o).chain().focus().setTextAlign("right").run()),class:H({"is-active":i(o).isActive({textAlign:"right"})}),type:"button"},[a(Fe)],2),d("button",{onClick:n[14]||(n[14]=c=>i(o).chain().focus().setTextAlign("justify").run()),class:H([{"is-active":i(o).isActive({textAlign:"justify"})},"mr-sm"]),type:"button"},[a(On)],2),d("button",{onClick:n[15]||(n[15]=c=>i(o).chain().focus().toggleBulletList().run()),class:H({"is-active":i(o).isActive("bulletList")}),type:"button"},[a(wn)],2),d("button",{onClick:n[16]||(n[16]=c=>i(o).chain().focus().toggleOrderedList().run()),class:H([{"is-active":i(o).isActive("orderedList")},"mr-sm"]),type:"button"},[a($n)],2),d("button",{onClick:n[17]||(n[17]=c=>i(o).chain().focus().toggleBlockquote().run()),class:H({"is-active":i(o).isActive("blockquote")}),type:"button"},[a(Tn)],2),F((h(),k("button",{onClick:n[18]||(n[18]=c=>i(o).chain().focus().setHardBreak().run()),type:"button"},[a(Vn)])),[[g,f.$t("editor.hard_break")]]),F((h(),k("button",{onClick:n[19]||(n[19]=c=>i(o).chain().focus().setHorizontalRule().run()),class:"mr-sm",type:"button"},[a(eo)])),[[g,f.$t("editor.horizontal_line")]]),a(Et,{onUpload:n[20]||(n[20]=c=>{if(c.is_local_driver){m(`/storage/${c.path}`);return}m(c.url)}),class:"flex"},{default:u(()=>[F((h(),k("button",ao,[a(tt)])),[[g,f.$t("post.add_image")]])]),_:1}),a(Jn,{editor:i(o)},null,8,["editor"])])):j("",!0),a(i(Bt),{editor:i(o),class:"editor-classic-format max-h-96 overflow-y-auto p-xs"},null,8,["editor"])],2)}}},co={__name:"Editor",props:{content:{required:!0,type:Object}},setup(e){return(t,s)=>(h(),I(uo,{value:e.content.body,onUpdate:s[0]||(s[0]=r=>e.content.body=r)},null,8,["value"]))}},po={__name:"Html",props:{content:{required:!0,type:Object}},setup(e){return(t,s)=>(h(),I(R,null,{title:u(()=>s[1]||(s[1]=[d("label",{for:"m_html"},"HTML",-1)])),default:u(()=>[a(Oe,{id:"m_html",modelValue:e.content.body,"onUpdate:modelValue":s[0]||(s[0]=r=>e.content.body=r),class:"min-h-[350px]"},null,8,["modelValue"])]),_:1}))}},Ze=()=>({modules:{Editor:{content:{body:""},component:co},Html:{content:{body:""},component:po}}}),mo={class:"flex items-center mb-lg gap-lg"},fo={class:"w-full md:w-1/2"},go={for:"m_name"},ho={class:"w-full md:w-1/2"},vo={for:"m_status"},bo={value:1},_o={value:0},Ge={__name:"FormBlock",props:{form:{required:!0},moduleComponent:{required:!0}},setup(e){return(t,s)=>(h(),k(Z,null,[d("div",mo,[d("div",fo,[a(R,null,{title:u(()=>[d("label",go,[y(v(t.$t("general.name"))+" ",1),a(ge,{danger:!0},{default:u(()=>s[2]||(s[2]=[y("*")])),_:1})])]),footer:u(()=>[a(U,{message:e.form.errors.name},null,8,["message"])]),default:u(()=>[a(ee,{modelValue:e.form.name,"onUpdate:modelValue":s[0]||(s[0]=r=>e.form.name=r),type:"text",id:"m_name",class:"w-full",autofocus:!0,error:e.form.errors.name!==void 0,required:""},null,8,["modelValue","error"])]),_:1})]),d("div",ho,[a(R,null,{title:u(()=>[d("label",vo,v(t.$t("general.status")),1)]),footer:u(()=>[a(U,{message:e.form.errors.status},null,8,["message"])]),default:u(()=>[a(de,{modelValue:e.form.status,"onUpdate:modelValue":s[1]||(s[1]=r=>e.form.status=r),error:e.form.errors.status!==void 0,id:"m_status"},{default:u(()=>[d("option",bo,v(t.$t("general.enabled")),1),d("option",_o,v(t.$t("general.disabled")),1)]),_:1},8,["modelValue","error"])]),_:1})])]),(h(),I(st(e.moduleComponent),{content:e.form.content},null,8,["content"]))],64))}},yo={class:"font-semibold capitalize"},ko={class:"mt-xs"},wo={__name:"EditBlock",props:{block:{required:!0,type:Object}},emits:["update","delete"],setup(e,{emit:t}){const{t:s}=ye(),r=K("routePrefix"),l=K("confirmation"),o=e,p=t,{notify:m}=we(),{modules:f}=Ze(),n=B(!1),g=Be(null),c=ke(oe.cloneDeep(o.block)),x=()=>{const _=f[o.block.module];if(_===void 0){m("error",s("page.module_not_found"));return}g.value=_.component,n.value=!0},A=()=>{n.value=!1,c.reset()},z=()=>{if(!c.isDirty){A();return}l().title(s("page.are_you_sure")).description(s("page.unsaved_will_lost")).btnConfirmName(s("general.discard")).onConfirm(_=>{_.close(),A()}).show()},M=()=>{c.put(route(`${r}.blocks.update`,{block:o.block.id}),{preserveScroll:!0,preserveState:!0,only:["blocks"],onSuccess:_=>{const $=_.props.blocks.data.find(w=>w.id===o.block.id);$&&p("update",$),m("success",s("page.block_updated"))}})},b=()=>{l().title(s("page.delete_block")).description(s("page.confirm_delete_block")).destructive().onConfirm(_=>{_.isLoading(!0),Ee.delete(route(`${r}.blocks.delete`,{block:o.block.id}),{only:["blocks"],onSuccess(){m("success",s("page.block_deleted")),p("delete"),_.reset(),A()},onFinish(){_.isLoading(!1)}})}).show()};return(_,$)=>(h(),k(Z,null,[a(ue,{onClick:x,class:"group-visible"},{icon:u(()=>[a(nt)]),_:1}),a(ce,{show:n.value,"max-width":"5xl","scrollable-body":!0,closeable:!0,onClose:z},{header:u(()=>[d("span",null,[y(v(i(s)("page.edit_block"))+"[",1),d("span",yo,v(i(c).module),1),$[0]||($[0]=y("]"))])]),body:u(()=>[d("div",ko,[n.value?(h(),I(Ge,{key:0,form:i(c),moduleComponent:g.value},null,8,["form","moduleComponent"])):j("",!0)])]),footer:u(()=>[a(G,{onClick:z,class:"mr-xs rtl:mr-0 rtl:ml-xs"},{default:u(()=>[y(v(i(s)("general.cancel")),1)]),_:1}),a(Re,{onClick:b,class:"mr-xs rtl:mr-0 rtl:ml-xs"},{default:u(()=>[y(v(i(s)("general.delete")),1)]),_:1}),a(ne,{onClick:M,disabled:i(c).processing,isLoading:i(c).processing},{default:u(()=>[y(v(i(s)("general.update")),1)]),_:1},8,["disabled","isLoading"])]),_:1},8,["show"])],64))}},xo={class:"flex items-center justify-between"},Ao={class:"w-full"},Co={class:"flex"},$o={class:"flex"},Mo={class:"font-medium"},Lo={class:"font-medium text-gray-400"},Ho={class:"flex justify-end"},To={class:"flex mr-xs rtl:mr-0 rtl:ml-xs"},zo={__name:"PageAttachedBlocks",props:{modelValue:{required:!0,type:Array}},emits:["update:modelValue"],setup(e,{emit:t}){const s=e,r=t,l=(m,f,n)=>{const g=s.modelValue.map(c=>c.id===f?Object.assign(c,Object.assign(n,{random_key:c.random_key===m?m:Pe()})):c);r("update:modelValue",g)},o=m=>{const f=oe.cloneDeep(s.modelValue).filter(n=>n.id!==m);r("update:modelValue",f)},p=m=>{r("update:modelValue",s.modelValue.filter((f,n)=>n!==m))};return(m,f)=>{const n=_e("tooltip");return e.modelValue.length?(h(),I(bt,{key:0},{default:u(()=>[a(i(ht),ot({list:e.modelValue},{animation:200,group:"blocks"},{handle:".handle","item-key":"random_key"}),{item:u(({element:g,index:c})=>[a(vt,{class:"group"},{default:u(()=>[d("div",xo,[d("div",Ao,[d("div",Co,[a(ue,{class:"handle mr-xs cursor-move"},{icon:u(()=>[a(Dt)]),_:1}),d("div",null,[d("div",$o,[d("div",Mo,v(g.name),1)]),d("div",Lo,v(g.module),1)])])]),d("div",Ho,[g.status?j("",!0):(h(),I(rt,{key:0,variant:"error",class:"mr-xs rtl:mr-0 rtl:ml-xs"},{default:u(()=>[y(v(m.$t("general.disabled")),1)]),_:1})),d("div",To,[a(wo,{block:g,onDelete:x=>o(g.id),onUpdate:x=>l(g.random_key,g.id,x)},null,8,["block","onDelete","onUpdate"])]),F((h(),I(ue,{onClick:x=>p(c),destructive:!0,class:"group-visible"},{icon:u(()=>[a(xe)]),_:2},1032,["onClick"])),[[n,m.$t("page.remove_from_page")]])])])]),_:2},1024)]),_:1},16,["list"])]),_:1})):(h(),I(Ne,{key:1},{default:u(()=>[y(v(m.$t("page.page_no_blocks_added")),1)]),_:1}))}}},So={class:"relative"},Io={__name:"AddExistingBlock",props:{modelValue:{required:!0,type:Array},blocks:{required:!0,type:Object,default:[]}},emits:["update:modelValue"],setup(e,{emit:t}){const s=B(!1),r=B(null),l=e,o=t,p=D(()=>l.blocks.data.map(c=>({key:c.id,label:c.name}))),m=()=>{const c=l.blocks.data.find(x=>x.id===r.value.key);return c?oe.cloneDeep(c):null},f=()=>{const c=m();c&&(o("update:modelValue",[...l.modelValue,Object.assign(c,{random_key:Pe()})]),g())},n=()=>{s.value=!0},g=()=>{s.value=!1,r.value=null};return(c,x)=>{const A=it("v-select");return h(),k(Z,null,[a(G,{onClick:n,size:"sm",class:"mr-xs"},{icon:u(()=>[a(je)]),default:u(()=>[y(" "+v(c.$t("page.add_existing_block")),1)]),_:1}),a(ce,{show:s.value,"max-width":"sm","scrollable-body":!0,closeable:!0,onClose:g},{header:u(()=>[y(v(c.$t("page.add_existing_block")),1)]),body:u(()=>[d("div",So,[p.value.length?(h(),k(Z,{key:0},[s.value?(h(),I(A,{key:0,modelValue:r.value,"onUpdate:modelValue":x[0]||(x[0]=z=>r.value=z),options:p.value,filterable:!1,clearable:!1,"close-on-select":!0,placeholder:c.$t("page.search_blocks"),"append-to-body":""},{"no-options":u(({search:z,searching:M,loading:b})=>[y(v(c.$t("general.list_empty")),1)]),_:1},8,["modelValue","options","placeholder"])):j("",!0)],64)):(h(),I(Ne,{key:1},{default:u(()=>[y(v(c.$t("page.no_blocks_created")),1)]),_:1}))])]),footer:u(()=>[a(G,{onClick:g,class:"mr-xs"},{default:u(()=>[y(v(c.$t("general.cancel")),1)]),_:1}),p.value.length?(h(),I(ne,{key:0,onClick:f,disabled:!r.value},{default:u(()=>[y(v(c.$t("page.add_to_page")),1)]),_:1},8,["disabled"])):j("",!0)]),_:1},8,["show"])],64)}}},Vo={class:"font-semibold capitalize"},Bo={class:"mt-xs"},Ro={__name:"CreateBlock",emits:["add"],setup(e,{emit:t}){const{t:s}=ye(),r=K("routePrefix"),l=K("confirmation"),o=t,{notify:p}=we(),{modules:m}=Ze(),f=B(!1),n=Be(null),g=ke({name:"",module:null,content:{},status:1}),c=M=>{const b=m[M];if(b===void 0){p("error",s("page.module_not_found"));return}n.value=b.component,g.content=oe.cloneDeep(b.content),g.module=M,f.value=!0},x=()=>{f.value=!1,g.reset()},A=()=>{if(!g.isDirty){x();return}l().title(s("page.are_you_sure")).description(s("page.unsaved_will_lost")).btnConfirmName(s("general.discard")).onConfirm(M=>{M.close(),x()}).show()},z=()=>{g.post(route(`${r}.blocks.store`),{preserveScroll:!0,preserveState:!0,only:["blocks"],onSuccess:M=>{o("add",M.props.blocks.data[0]),x(),p("success",s("page.block_created")+`
`+s("page.save_page"))}})};return(M,b)=>(h(),k(Z,null,[a(Ve,{placement:"bottom"},{trigger:u(()=>[a(G,{size:"sm",class:"mr-xs"},{icon:u(()=>[a(lt)]),default:u(()=>[y(" "+v(i(s)("page.create_block")),1)]),_:1})]),content:u(()=>[a(N,{as:"button",onClick:b[0]||(b[0]=_=>c("Editor"))},{default:u(()=>b[2]||(b[2]=[y(" Editor ")])),_:1}),a(N,{as:"button",onClick:b[1]||(b[1]=_=>c("Html"))},{default:u(()=>b[3]||(b[3]=[y(" Html ")])),_:1})]),_:1}),a(ce,{show:f.value,"max-width":"5xl","scrollable-body":!0,closeable:!0,onClose:A},{header:u(()=>[d("span",null,[y(v(i(s)("page.create_block"))+" [",1),d("span",Vo,v(i(g).module),1),b[4]||(b[4]=y("]"))])]),body:u(()=>[d("div",Bo,[f.value?(h(),I(Ge,{key:0,form:i(g),moduleComponent:n.value},null,8,["form","moduleComponent"])):j("",!0)])]),footer:u(()=>[a(G,{onClick:A,class:"mr-xs"},{default:u(()=>[y(v(i(s)("general.cancel")),1)]),_:1}),a(ne,{onClick:z,disabled:i(g).processing,isLoading:i(g).processing},{default:u(()=>[y(v(i(s)("page.create_add_to_page")),1)]),_:1},8,["disabled","isLoading"])]),_:1},8,["show"])],64))}},Eo={class:"flex items-center mt-lg"},Oo={__name:"PageBlocks",props:{page:{required:!0,type:Object}},setup(e){const t=e,s=r=>{t.page.blocks.push(r)};return(r,l)=>(h(),k("div",null,[a(zo,{modelValue:e.page.blocks,"onUpdate:modelValue":l[0]||(l[0]=o=>e.page.blocks=o)},null,8,["modelValue"]),d("div",Eo,[a(Io,{modelValue:e.page.blocks,"onUpdate:modelValue":l[1]||(l[1]=o=>e.page.blocks=o),blocks:r.$page.props.blocks},null,8,["modelValue","blocks"]),a(Ro,{onAdd:s})])]))}},Po={class:"row-py w-full mx-auto"},No={key:0,class:"flex"},Do=["href"],Fo={class:"row-px"},qo={class:"flex gap-lg"},Uo={class:"w-2/3"},jo={for:"name"},Zo={for:"meta_title"},Go={for:"meta_description"},Wo={class:"w-1/3"},Ko={for:"slug"},Jo=["innerHTML"],Xo={for:"layout"},Yo={value:"default"},Qo={value:"medium"},er={value:"small"},tr={for:"status"},sr={value:1},nr={value:0},or={class:"flex items-center mt-lg"},rr=at({layout:ct}),Lr=Object.assign(rr,{__name:"CreateEdit",props:{mode:{required:!0,type:String,default:"create"},page:{type:[Object,null]}},setup(e){const{t}=ye(),s=e,{notify:r}=we(),l=K("routePrefix"),o=K("confirmation"),p=D(()=>m.value?t("page.create_page"):t("page.edit_page")),{isCreate:m,isEdit:f}=pt(),n=ke(f.value?oe.cloneDeep(s.page):{name:"",meta_title:"",meta_description:"",slug:"",layout:"default",status:1,blocks:[]}),g=()=>{Ie(()=>s.page.blocks,b=>{n.blocks=b})};f.value&&g();const c=()=>{n.slug=s.page.slug},x=b=>{b.post(route(`${l}.pages.store`),{onSuccess:()=>{c(),r("success",t("page.page_created"))}})},A=b=>{b.put(route(`${l}.pages.update`,{page:s.page.uuid}),{preserveScroll:!0,onSuccess:()=>{c(),r("success",t("page.page_updated"))}})},z=()=>{o().title(t("page.delete_page")).description(t("page.confirm_delete_page")).destructive().onConfirm(b=>{b.isLoading(!0),Ee.delete(route(`${l}.pages.delete`,{page:s.page.uuid}),{preserveScroll:!0,onSuccess(){r("success",t("page.page_deleted"))},onFinish(){b.reset()}})}).show()},M=()=>{const b=n.transform(_=>({..._,blocks:_.blocks.map($=>$.id)}));m.value&&x(b),f.value&&A(b)};return(b,_)=>(h(),k(Z,null,[a(i(ut),{title:p.value},null,8,["title"]),d("div",Po,[a(mt,{title:p.value},{description:u(()=>[y(v(i(t)("page.page_desc")),1)]),default:u(()=>[i(f)?(h(),k("div",No,[d("a",{href:b.route(`${i(l)}.pages.show`,{slug:e.page.url_path}),target:"_blank",class:"mr-xs rtl:mr-0 rtl:ml-xs"},[a(G,{size:"sm"},{icon:u(()=>[a(ft)]),default:u(()=>[y(" "+v(i(t)("general.open")),1)]),_:1})],8,Do),a(Re,{onClick:z,size:"sm"},{icon:u(()=>[a(xe)]),_:1})])):j("",!0)]),_:1},8,["title"]),d("div",Fo,[d("form",{method:"post",onSubmit:dt(M,["prevent"])},[d("div",qo,[d("div",Uo,[a(me,null,{title:u(()=>[y(v(i(t)("general.details")),1)]),default:u(()=>[a(R,null,{title:u(()=>[d("label",jo,[y(v(i(t)("general.name"))+" ",1),a(ge,{danger:!0},{default:u(()=>_[6]||(_[6]=[y("*")])),_:1})])]),footer:u(()=>[a(U,{message:i(n).errors.name},null,8,["message"])]),default:u(()=>[a(ee,{modelValue:i(n).name,"onUpdate:modelValue":_[0]||(_[0]=$=>i(n).name=$),error:i(n).errors.name!==void 0,type:"text",id:"name",class:"w-full",autofocus:i(m),required:""},null,8,["modelValue","error","autofocus"])]),_:1}),a(R,{class:"mt-lg"},{title:u(()=>[d("label",Zo,v(i(t)("page.meta_title")),1)]),footer:u(()=>[a(U,{message:i(n).errors.meta_title},null,8,["message"])]),default:u(()=>[a(ee,{modelValue:i(n).meta_title,"onUpdate:modelValue":_[1]||(_[1]=$=>i(n).meta_title=$),error:i(n).errors.meta_title!==void 0,type:"text",id:"meta_title",class:"w-full"},null,8,["modelValue","error"])]),_:1}),a(R,{class:"mt-lg"},{title:u(()=>[d("label",Go,v(i(t)("page.meta_description")),1)]),footer:u(()=>[a(U,{message:i(n).errors.meta_description},null,8,["message"])]),default:u(()=>[a(Oe,{modelValue:i(n).meta_description,"onUpdate:modelValue":_[2]||(_[2]=$=>i(n).meta_description=$),error:i(n).errors.meta_description!==void 0,id:"meta_description",class:"w-full"},null,8,["modelValue","error"])]),_:1})]),_:1}),a(me,{class:"mt-lg"},{title:u(()=>[y(v(i(t)("general.blocks")),1)]),default:u(()=>[a(Oo,{page:i(n)},null,8,["page"])]),_:1})]),d("div",Wo,[a(me,null,{default:u(()=>[a(R,null,{title:u(()=>[d("label",Ko,[y(v(i(t)("page.url_path"))+" ",1),a(ge,{danger:!0},{default:u(()=>_[7]||(_[7]=[y("*")])),_:1}),d("span",{innerHTML:i(t)("page.type_home"),class:"text-sm text-gray-400 inline-block ml-xs font-normal"},null,8,Jo)])]),footer:u(()=>[a(U,{message:i(n).errors.slug},null,8,["message"])]),default:u(()=>[a(ee,{modelValue:i(n).slug,"onUpdate:modelValue":_[3]||(_[3]=$=>i(n).slug=$),error:i(n).errors.slug!==void 0,type:"text",id:"slug",class:"w-full",autocomplete:"off",required:""},null,8,["modelValue","error"])]),_:1}),a(R,{class:"mt-lg"},{title:u(()=>[d("label",Xo,v(i(t)("page.container_width")),1)]),footer:u(()=>[a(U,{message:i(n).errors.layout},null,8,["message"])]),default:u(()=>[a(de,{modelValue:i(n).layout,"onUpdate:modelValue":_[4]||(_[4]=$=>i(n).layout=$),error:i(n).errors.layout!==void 0,id:"layout"},{default:u(()=>[d("option",Yo,v(i(t)("general.default")),1),d("option",Qo,v(i(t)("page.medium")),1),d("option",er,v(i(t)("page.small")),1)]),_:1},8,["modelValue","error"])]),_:1}),a(R,{class:"mt-lg"},{title:u(()=>[d("label",tr,v(i(t)("general.status")),1)]),footer:u(()=>[a(U,{message:i(n).errors.status},null,8,["message"])]),default:u(()=>[a(de,{modelValue:i(n).status,"onUpdate:modelValue":_[5]||(_[5]=$=>i(n).status=$),error:i(n).errors.status!==void 0,id:"status"},{default:u(()=>[d("option",sr,v(i(t)("general.enabled")),1),d("option",nr,v(i(t)("general.disabled")),1)]),_:1},8,["modelValue","error"])]),_:1}),d("div",or,[a(ne,{type:"submit",disabled:i(n).processing,isLoading:i(n).processing},{default:u(()=>[y(v(i(m)?i(t)("general.create"):i(t)("general.update")),1)]),_:1},8,["disabled","isLoading"])])]),_:1})])])],32)])])],64))}});export{Lr as default};
