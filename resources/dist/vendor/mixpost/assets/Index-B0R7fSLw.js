import{d as F,u as L,i as D,D as M,M as W,a5 as C,T as A,U as S,l as p,a1 as R,q,c as h,o as n,a as e,e as O,b as o,g as z,w as t,k as m,t as u,j as P,m as G,P as H,S as J,v as K,h as k,F as T,r as Q,a8 as j}from"./app-C7yQ4yxP.js";import{u as X}from"./useRouter-CKabqmxS.js";import{u as Y}from"./useSelectable-D4eEjBj_.js";import{_ as Z}from"./Admin-2kdh7iq6.js";import{_ as ee}from"./PageHeader-L61bBZJ1.js";import{_ as oe}from"./Panel-DHnLtGhx.js";import{_ as B}from"./Checkbox-hSITjV1n.js";import{T as te,a as se,_ as i}from"./TableCell-Do7VWhok.js";import{_ as ae}from"./PureDangerButton-CTpho9ji.js";import{_ as re}from"./SelectableBar-BMA_UiaG.js";import{_ as le}from"./Pagination-xEfeiBk8.js";import{_ as ce}from"./NoResult-BiKMAkVj.js";import{T as ne}from"./Trash-TUAkcl9a.js";import{_ as ie}from"./WebhookItem-DmL2V4EK.js";import"./QueueList-DM6iDr1_.js";import"./Flex-B0LjVlwe.js";import"./ChevronLeft-Dhng4OHZ.js";import"./PureButtonLink-PaYLzY0E.js";import"./DropdownButton-DdQamZC7.js";import"./EllipsisVertical-Cfd6Agro.js";const de={class:"w-full mx-auto row-py"},me={class:"w-full row-px mt-lg"},ue={key:0,class:"mt-lg"},fe=F({layout:Z}),Ee=Object.assign(fe,{__name:"Index",props:{filter:{type:Object,default:{}},records:{type:Object}},setup(r){const{t:a}=L(),f=r,b=D("routePrefix"),E=D("confirmation"),{selectedRecords:d,putPageRecords:w,toggleSelectRecordsOnPage:_,deselectRecord:v,deselectAllRecords:g}=Y(),{onError:I}=X(),y=M({keyword:f.filter.keyword}),$=()=>f.records.data.map(s=>s.id),N=()=>{E().title(a("webhook.delete_webhooks")).description(a("webhook.delete_webhooks_confirm")).destructive().onConfirm(s=>{x(s)}).show()},x=s=>{s.isLoading(!0),R.delete(route(`${b}.system.webhooks.deleteMultiple`),{data:{webhooks:d.value},preserveScroll:!0,onSuccess(){s.reset(),g()},onError(l){I(l,()=>{x(s)})},onFinish(){s.isLoading(!1)}})};return W(()=>{w($()),C.on("webhookDeleted",s=>{v(s)})}),A(()=>{C.off("webhookDeleted")}),S(()=>p.cloneDeep(y.value),p.throttle(()=>{R.get(route("mixpost.system.webhooks.index"),p.pickBy(y.value),{preserveState:!0,only:["records","filter"]})},300)),S(()=>f.records.data,()=>{w($())}),(s,l)=>{const U=q("tooltip");return n(),h(T,null,[e(o(z),{title:o(a)("webhook.webhooks")},null,8,["title"]),O("div",de,[e(ee,{title:o(a)("webhook.webhooks")},{description:t(()=>[m(u(o(a)("webhook.webhooks_desc")),1)]),_:1},8,["title"]),O("div",me,[e(o(J),{href:s.route(`${o(b)}.system.webhooks.create`)},{default:t(()=>[e(G,{size:"sm"},{icon:t(()=>[e(H)]),default:t(()=>[m(" "+u(o(a)("webhook.create_webhook")),1)]),_:1})]),_:1},8,["href"]),e(re,{count:o(d).length,onClose:o(g)},{default:t(()=>[K((n(),k(ae,{onClick:N},{default:t(()=>[e(ne)]),_:1})),[[U,o(a)("general.delete")]])]),_:1},8,["count","onClose"]),e(oe,{"with-padding":!1,class:"mt-lg"},{default:t(()=>[e(te,null,{head:t(()=>[e(se,null,{default:t(()=>[e(i,{component:"th",scope:"col",class:"w-10"},{default:t(()=>[e(B,{checked:o(_),"onUpdate:checked":l[0]||(l[0]=c=>j(_)?_.value=c:null),disabled:!r.records.meta.total},null,8,["checked","disabled"])]),_:1}),e(i,{component:"th",scope:"col",class:"w-10"}),e(i,{component:"th",scope:"col"},{default:t(()=>[m(u(o(a)("general.name")),1)]),_:1}),e(i,{component:"th",scope:"col"},{default:t(()=>[m(u(o(a)("webhook.callback_url")),1)]),_:1}),e(i,{component:"th",scope:"col"},{default:t(()=>[m(u(o(a)("post.status")),1)]),_:1}),e(i,{component:"th",scope:"col"})]),_:1})]),body:t(()=>[(n(!0),h(T,null,Q(r.records.data,c=>(n(),k(ie,{key:c.id,item:c,onOnDelete:()=>{o(v)(c.id)}},{checkbox:t(()=>[e(B,{checked:o(d),"onUpdate:checked":l[1]||(l[1]=V=>j(d)?d.value=V:null),value:c.id},null,8,["checked","value"])]),_:2},1032,["item","onOnDelete"]))),128))]),_:1}),r.records.meta.total?P("",!0):(n(),k(ce,{key:0,class:"py-md px-md"}))]),_:1}),r.records.meta.links.length>3?(n(),h("div",ue,[e(le,{meta:r.records.meta,links:r.records.links},null,8,["meta","links"])])):P("",!0)])])],64)}}});export{Ee as default};
