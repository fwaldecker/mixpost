import{i as A,D as b,H as y,q as E,c as D,o as u,a,e as f,b as l,g as F,w as s,F as x,r as q,h as _,k as i,t as r,Z as H,v as O,j as W,y as P,P as Z,z as G,aw as J,a5 as K,a1 as Q}from"./app-C7yQ4yxP.js";import{u as R}from"./AlertText-DhpZmgf-.js";import{u as U,_ as X,a as Y,b as ee}from"./MediaUploads-BPiO_myE.js";import{_ as te}from"./PageHeader-L61bBZJ1.js";import{_ as se,T as ae}from"./Tab-QSPdE2y6.js";import{_ as oe}from"./SelectableBar-BMA_UiaG.js";import{_ as le}from"./PureDangerButton-CTpho9ji.js";import{_ as ie}from"./Panel-DHnLtGhx.js";import{T as re}from"./Trash-TUAkcl9a.js";import"./nprogress-DktYLWPJ.js";import"./index.browser-OxPLOBIU.js";import"./ExclamationCircle-DNtr2LeT.js";import"./EllipsisVertical-Cfd6Agro.js";import"./Textarea-Cj05CTrn.js";import"./SectionTitle-CrJ6iHdB.js";import"./SearchInput-C73xFZvN.js";import"./NoResult-BiKMAkVj.js";import"./Alert-nkqBEIg3.js";import"./Flex-B0LjVlwe.js";const ne={class:"w-full mx-auto row-py mb-2xl"},me={class:"w-full row-px"},de={class:"w-full row-px mt-lg"},Be={__name:"Media",setup(ue){const v=A("workspaceCtx"),{activeTab:n,tabs:h,isDownloading:$,isDeleting:w,downloadExternal:T,deletePermanently:L,getMediaCrediting:V}=U("mixpost.media.fetchStock",{workspace:v.id}),B={uploads:ee,stock:Y,gifs:X},m=b(),I=y(()=>B[n.value]),c=y(()=>m.value?m.value.selected:[]),g=()=>{m.value.deselectAll()},N=()=>{const e=n.value!=="uploads";e&&T(c.value.map(t=>{const{id:p,url:o,source:C,author:S,download_data:z}=t;return{id:p,url:o,source:C,author:S,download_data:z}}),t=>{k(t.data)}),e||k(c.value)},{versionObject:j}=R(),k=e=>{Q.post(route("mixpost.posts.store",{workspace:v.id}),{versions:[j(0,!0,V(e),e.map(t=>t.id))]})},d=b(!1),M=()=>{const e=c.value.map(t=>t.id);L(e,()=>{g(),m.value.removeItems(e),K.emit("mediaDelete",e),d.value=!1})};return(e,t)=>{const p=E("tooltip");return u(),D(x,null,[a(l(F),{title:e.$t("media.media_library")},null,8,["title"]),f("div",ne,[a(te,{title:e.$t("media.media_library")},null,8,["title"]),f("div",me,[a(ae,null,{default:s(()=>[(u(!0),D(x,null,q(l(h),o=>(u(),_(se,{key:o,onClick:C=>n.value=o,active:l(n)===o},{default:s(()=>[i(r(e.$t(`media.${o}`)),1)]),_:2},1032,["onClick","active"]))),128))]),_:1})]),f("div",de,[a(ie,null,{default:s(()=>[(u(),_(H(I.value),{ref_key:"sourceProperties",ref:m,columns:4},null,512)),a(oe,{count:c.value.length,onClose:t[1]||(t[1]=o=>g())},{default:s(()=>[a(P,{onClick:N,isLoading:l($),disabled:l($),class:"mr-sm rtl:mr-0 rtl:ml-sm",size:"xs"},{icon:s(()=>[a(Z)]),default:s(()=>[i(" "+r(e.$t("media.create_post")),1)]),_:1},8,["isLoading","disabled"]),l(n)==="uploads"?O((u(),_(le,{key:0,onClick:t[0]||(t[0]=o=>d.value=!0)},{default:s(()=>[a(re)]),_:1})),[[p,e.$t("general.delete")]]):W("",!0)]),_:1},8,["count"])]),_:1})])]),a(J,{show:d.value,variant:"danger",onClose:t[3]||(t[3]=o=>d.value=!1)},{header:s(()=>[i(r(e.$t("media.delete_media")),1)]),body:s(()=>[i(r(e.$t("media.do_you_want_delete")),1)]),footer:s(()=>[a(P,{onClick:t[2]||(t[2]=o=>d.value=!1),class:"mr-xs rtl:mr-0 rtl:ml-xs"},{default:s(()=>[i(r(e.$t("general.cancel")),1)]),_:1}),a(G,{isLoading:l(w),disabled:l(w),onClick:M},{default:s(()=>[i(r(e.$t("general.delete")),1)]),_:1},8,["isLoading","disabled"])]),_:1},8,["show"])],64)}}};export{Be as default};
