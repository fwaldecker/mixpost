import{u as j,i as S,D as M,q as W,c as V,o as c,e as p,v as E,a as t,b as a,h as v,w as e,V as R,k as o,t as r,a0 as Y,W as Z,a1 as G,n as q,a5 as U,A as ee,a3 as A,a6 as te,x as ae,a7 as L,y as N,j as Q,s as w,O as D,Q as se,F as O,d as le,M as oe,T as re,U as ne,g as ie,S as ue,m as de,r as me,a8 as B}from"./app-C7yQ4yxP.js";import{_ as ce}from"./Admin-2kdh7iq6.js";import{u as _e}from"./useSelectable-D4eEjBj_.js";import{_ as fe}from"./PageHeader-L61bBZJ1.js";import{_ as pe}from"./PureDangerButton-CTpho9ji.js";import{_ as ge}from"./Panel-DHnLtGhx.js";import{_ as T}from"./Checkbox-hSITjV1n.js";import{_ as m,a as z,T as he}from"./TableCell-Do7VWhok.js";import{_ as $e}from"./SelectableBar-BMA_UiaG.js";import{_ as be}from"./NoResult-BiKMAkVj.js";import{T as H}from"./Trash-TUAkcl9a.js";import{_ as ve}from"./DropdownButton-DdQamZC7.js";import{_ as ye}from"./PureButtonLink-PaYLzY0E.js";import{A as ke}from"./ArrowTopRightOnSquare-509xbi7A.js";import{_ as P}from"./VerticalGroup-bCSYX3yy.js";import{_ as I}from"./LabelSuffix-CW5l7-lp.js";import{_ as F}from"./SuccessButton-BSd6uewq.js";import{_ as xe}from"./UploadButton-B8Zy_vG0.js";import{_ as we}from"./Flex-B0LjVlwe.js";import"./QueueList-DM6iDr1_.js";import"./EllipsisVertical-Cfd6Agro.js";import"./nprogress-DktYLWPJ.js";const Pe={class:"flex flex-row items-center justify-end gap-xs"},Se={__name:"PageItemAction",props:{itemId:{type:String,required:!0},urlPath:{type:String,required:!0}},emits:["onDelete"],setup(i,{emit:s}){const{t:d}=j(),_=S("routePrefix"),y=S("confirmation"),h=i,x=s,{notify:g}=q(),l=M(!1),b=()=>{y().title(d("page.delete_pages")).description(d("page.confirm_delete_pages")).destructive().onConfirm(f=>{f.isLoading(!0),G.delete(route(`${_}.pages.delete`,{page:h.itemId}),{onSuccess(){l.value=!1,g("success",d("page.page_deleted")),x("onDelete"),U.emit("pageDelete",h.itemId),f.reset()},onFinish(){f.close()}})}).show()};return(f,n)=>{const u=W("tooltip");return c(),V("div",null,[p("div",Pe,[E((c(),v(ye,{href:f.route(`${a(_)}.pages.show`,{slug:i.urlPath}),native:!0,target:"_blank"},{default:e(()=>[t(ke)]),_:1},8,["href"])),[[u,a(d)("general.open")]]),t(Z,{placement:"bottom-end"},{trigger:e(()=>[t(ve)]),content:e(()=>[t(R,{href:f.route(`${a(_)}.pages.edit`,{page:i.itemId})},{icon:e(()=>[t(Y)]),default:e(()=>[o(" "+r(a(d)("general.edit")),1)]),_:1},8,["href"]),t(R,{onClick:b,as:"button"},{icon:e(()=>[t(H,{class:"text-red-500"})]),default:e(()=>[o(" "+r(a(d)("general.delete")),1)]),_:1})]),_:1})])])}}},Ve={__name:"PageItem",props:{item:{type:Object,required:!0}},setup(i){return(s,d)=>(c(),v(z,{hoverable:!0},{default:e(()=>[t(m,{class:"w-10"},{default:e(()=>[ee(s.$slots,"checkbox")]),_:3}),t(m,null,{default:e(()=>[o(r(i.item.name),1)]),_:1}),t(m,null,{default:e(()=>[o(r(i.item.slug),1)]),_:1}),t(m,null,{default:e(()=>[i.item.status?(c(),v(A,{key:0,variant:"success"},{default:e(()=>[o(r(s.$t("general.enabled")),1)]),_:1})):(c(),v(A,{key:1,variant:"error"},{default:e(()=>[o(r(s.$t("general.disabled")),1)]),_:1}))]),_:1}),t(m,null,{default:e(()=>[o(r(i.item.created_at),1)]),_:1}),t(m,null,{default:e(()=>[t(Se,{itemId:i.item.uuid,urlPath:i.item.url_path},null,8,["itemId","urlPath"])]),_:1})]),_:3}))}},Ce={for:"brand_name"},De=["src"],Ie={for:"brand_name"},Ue={for:"email"},Oe={for:"register_url"},Te={class:"ml-xs"},je={__name:"GeneratePageSamples",setup(i){const{t:s}=j(),d=S("routePrefix"),_=M(!1),y=()=>{_.value=!0},h=()=>{_.value=!1},{user:x}=te(),{notify:g}=q(),l=ae({logo_url:L().props.mixpost.theme.logo,brand_name:L().props.app.name,email:x.value.email,register_url:"",destroy:!1}),b=()=>{l.post(route(`${d}.pages.generateSamples`),{preserveScroll:!0,onSuccess(){g("success",s("page.sample_pages_generated")),h(),l.reset()}})};return(f,n)=>(c(),V(O,null,[t(F,{onClick:y},{default:e(()=>[o(r(a(s)("page.generate_samples")),1)]),_:1}),t(se,{show:_.value,"max-width":"sm",closeable:!0,"scrollable-body":!0,onClose:h},{header:e(()=>[o(r(a(s)("page.generate_page_samples")),1)]),body:e(()=>[t(P,null,{title:e(()=>[p("label",Ce,[o(r(a(s)("page.brand_logo"))+" ",1),t(I,{danger:!0},{default:e(()=>n[5]||(n[5]=[o("*")])),_:1})])]),footer:e(()=>[t(w,{message:a(l).errors.logo_url},null,8,["message"])]),default:e(()=>[p("div",null,[t(xe,{withPreload:!0,onUpload:n[0]||(n[0]=u=>{if(u.is_local_driver){a(l).logo_url=`/storage/${u.path}`;return}a(l).logo_url=u.url})},{default:e(()=>[t(N,null,{default:e(()=>[o(r(a(s)("general.upload")),1)]),_:1})]),_:1}),a(l).logo_url?(c(),V("img",{key:0,src:a(l).logo_url,class:"w-auto max-h-20 mt-xs",alt:"Logo"},null,8,De)):Q("",!0)])]),_:1}),t(P,{class:"mt-lg"},{title:e(()=>[p("label",Ie,[o(r(a(s)("page.brand_name"))+" ",1),t(I,{danger:!0},{default:e(()=>n[6]||(n[6]=[o("*")])),_:1})])]),footer:e(()=>[t(w,{message:a(l).errors.brand_name},null,8,["message"])]),default:e(()=>[t(D,{type:"text",modelValue:a(l).brand_name,"onUpdate:modelValue":n[1]||(n[1]=u=>a(l).brand_name=u),error:a(l).errors.brand_name,id:"brand_name"},null,8,["modelValue","error"])]),_:1}),t(P,{class:"mt-lg"},{title:e(()=>[p("label",Ue,[o(r(a(s)("page.contact_email"))+" ",1),t(I,{danger:!0},{default:e(()=>n[7]||(n[7]=[o("*")])),_:1})])]),footer:e(()=>[t(w,{message:a(l).errors.email},null,8,["message"])]),default:e(()=>[t(D,{type:"text",modelValue:a(l).email,"onUpdate:modelValue":n[2]||(n[2]=u=>a(l).email=u),error:a(l).errors.email,id:"email"},null,8,["modelValue","error"])]),_:1}),t(P,{class:"mt-lg"},{title:e(()=>[p("label",Oe,r(a(s)("page.register_url")),1)]),footer:e(()=>[t(w,{message:a(l).errors.register_url},null,8,["message"])]),default:e(()=>[t(D,{type:"text",modelValue:a(l).register_url,"onUpdate:modelValue":n[3]||(n[3]=u=>a(l).register_url=u),error:a(l).errors.register_url,id:"register_url"},null,8,["modelValue","error"])]),_:1}),t(P,{class:"mt-lg"},{footer:e(()=>[t(w,{message:a(l).errors.destroy},null,8,["message"])]),default:e(()=>[p("label",null,[t(T,{checked:a(l).destroy,"onUpdate:checked":n[4]||(n[4]=u=>a(l).destroy=u),value:!1},null,8,["checked"]),p("span",Te,r(a(s)("page.destroy_existing_pages")),1)])]),_:1})]),footer:e(()=>[t(N,{onClick:h,class:"mr-xs"},{default:e(()=>[o(r(a(s)("general.cancel")),1)]),_:1}),t(F,{onClick:b,disabled:a(l).processing,isLoading:a(l).processing},{default:e(()=>[o(r(a(s)("page.generate")),1)]),_:1},8,["disabled","isLoading"])]),_:1},8,["show"])],64))}},qe={class:"w-full mx-auto row-py"},Re={class:"mt-lg row-px w-full"},Ae=le({layout:ce}),rt=Object.assign(Ae,{__name:"Pages",props:{pages:{type:Object}},setup(i){const{t:s}=j(),d=S("routePrefix"),_=i,y=s("page.pages"),{notify:h}=q(),x=S("confirmation"),{selectedRecords:g,putPageRecords:l,toggleSelectRecordsOnPage:b,deselectRecord:f,deselectAllRecords:n}=_e(),u=()=>_.pages.data.map($=>$.uuid);oe(()=>{l(u()),U.on("pageDelete",$=>{f($)})}),re(()=>{U.off("pageDelete")}),ne(()=>_.pages.data,()=>{l(u())});const J=()=>{x().title(s("page.delete_pages")).description(s("page.confirm_delete_pages")).destructive().onConfirm($=>{$.isLoading(!0),G.delete(route(`${d}.pages.deleteMultiple`),{data:{pages:g.value},preserveScroll:!0,onSuccess(){n(),h("success",s("page.pages_deleted"))},onFinish(){$.reset()}})}).show()};return($,C)=>{const K=W("tooltip");return c(),V(O,null,[t(a(ie),{title:a(y)},null,8,["title"]),p("div",qe,[t(fe,{title:a(y)},{description:e(()=>[o(r(a(s)("page.page_desc")),1)]),default:e(()=>[t(je)]),_:1},8,["title"]),p("div",Re,[t($e,{count:a(g).length,onClose:a(n)},{default:e(()=>[E((c(),v(pe,{onClick:J},{default:e(()=>[t(H)]),_:1})),[[K,a(s)("general.delete")]])]),_:1},8,["count","onClose"]),t(we,null,{default:e(()=>[t(a(ue),{href:$.route(`${a(d)}.pages.create`),class:"mb-xs sm:mb-0"},{default:e(()=>[t(de,null,{default:e(()=>[o(r(a(s)("page.create_page")),1)]),_:1})]),_:1},8,["href"])]),_:1}),t(ge,{"with-padding":!1,class:"mt-lg"},{default:e(()=>[t(he,null,{head:e(()=>[t(z,null,{default:e(()=>[t(m,{component:"th",scope:"col",class:"w-10"},{default:e(()=>[t(T,{checked:a(b),"onUpdate:checked":C[0]||(C[0]=k=>B(b)?b.value=k:null),disabled:!i.pages.data.length},null,8,["checked","disabled"])]),_:1}),t(m,{component:"th",scope:"col"},{default:e(()=>[o(r(a(s)("general.name")),1)]),_:1}),t(m,{component:"th",scope:"col"},{default:e(()=>[o(r(a(s)("page.url_path")),1)]),_:1}),t(m,{component:"th",scope:"col"},{default:e(()=>[o(r(a(s)("general.status")),1)]),_:1}),t(m,{component:"th",scope:"col"},{default:e(()=>[o(r(a(s)("general.created_at")),1)]),_:1}),t(m,{component:"th",scope:"col"})]),_:1})]),body:e(()=>[(c(!0),V(O,null,me(i.pages.data,k=>(c(),v(Ve,{key:k.uuid,item:k,onOnDelete:()=>{a(f)(k.uuid)}},{checkbox:e(()=>[t(T,{checked:a(g),"onUpdate:checked":C[1]||(C[1]=X=>B(g)?g.value=X:null),value:k.uuid},null,8,["checked","value"])]),_:2},1032,["item","onOnDelete"]))),128))]),_:1}),i.pages.data.length?Q("",!0):(c(),v(be,{key:0,class:"p-md"},{default:e(()=>[o(r(a(s)("page.no_pages_found")),1)]),_:1}))]),_:1})])])],64)}}});export{rt as default};
