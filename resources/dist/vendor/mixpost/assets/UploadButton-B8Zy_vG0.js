import{N as i}from"./nprogress-DktYLWPJ.js";import{i as v,D as r,c as k,o as l,e as c,A as B,h as j,j as w,a9 as x,n as N}from"./app-C7yQ4yxP.js";const P=["accept"],$={__name:"UploadButton",props:{withPreloader:{type:Boolean,default:!0}},emits:["upload"],setup(u,{emit:f}){const p=f,d=v("routePrefix"),{notify:m}=N(),o=r(null),a=r(!1),s=["image/jpg","image/jpeg","image/gif","image/png"],g=t=>Array.from(t).filter(e=>s.includes(e.type)),_=()=>{o.value.click()},h=t=>{const e=new FormData;e.append("file",t),i.start(),a.value=!0,axios.post(route(`${d}.files.upload`),e).then(function(n){p("upload",n.data)}).catch(function(n){m("error",n)}).finally(()=>{i.done(),a.value=!1})},y=t=>{const e=g(t.target.files);e.length&&(o.value.value=null,h(e[0]))};return(t,e)=>(l(),k("div",null,[c("div",{onClick:_,role:"button",class:"inline-flex relative"},[B(t.$slots,"default"),u.withPreloader&&a.value?(l(),j(x,{key:0,opacity:75})):w("",!0)]),c("input",{ref_key:"input",ref:o,type:"file",accept:s.join(","),class:"hidden",onChange:y},null,40,P)]))}};export{$ as _};
