const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/EmojiMart-DYGDxhJ-.js","assets/app-C7yQ4yxP.js","assets/app-FfqdtCYP.css","assets/EmojiMart-DfNuCDvd.css"])))=>i.map(i=>d[i]);
import{E as F,P as X,c as Z,A as ve,g as _e,D as ge,B as k,s as be,F as $e,e as ye,u as we,v as ke}from"./index-la4Rclr_.js";import{aF as xe,H as A,a7 as J,u as ee,R as Ce,D as x,M as N,a5 as S,aO as Ee,U as Ve,c as C,o as c,a as m,A as te,b as T,I as se,B as j,e as b,h as $,a9 as q,q as O,w as s,E as Te,v as B,W as R,G as Me,Y as Se,a2 as Ae,j as V,y as I,k as w,t as v,z as De,Q as z,F as G,l as P,i as U,r as oe,m as Q,V as L,a0 as ae,J as ne,O as le,f as ie,a3 as Pe}from"./app-C7yQ4yxP.js";import{u as Qe,H as Ie,a as qe,V as Le}from"./Variable-BraupYaJ.js";import{H as He,D as je}from"./index-B0YDHBcd.js";import{d as Oe,e as Be}from"./MediaUploads-BPiO_myE.js";import{N as M}from"./nprogress-DktYLWPJ.js";import{E as re}from"./EllipsisVertical-Cfd6Agro.js";import{T as ue}from"./Trash-TUAkcl9a.js";import{_ as de,L as ce}from"./ListItem-D5WRjaC-.js";import{_ as pe}from"./NoResult-BiKMAkVj.js";import{_ as me}from"./Textarea-Cj05CTrn.js";import{_ as H}from"./VerticalGroup-bCSYX3yy.js";const Ue=()=>{const{isWorkspaceEditorRole:e}=xe(),r=A(()=>J().props.post),l=A(()=>r.value?r.value.id:null),u=A(()=>r.value?["published","failed"].includes(r.value.status):!1),a=A(()=>r.value?r.value.status==="publishing":!1),p=A(()=>r.value?r.value.status==="needs_approval":!1),t=A(()=>!(u.value||a.value||r.value&&r.value.trashed||!e.value)),g=A(()=>J().props.user_can_approve);return{postId:l,isInHistory:u,isScheduleProcessing:a,needsApproval:p,editAllowed:t,userCanApprove:g}},We=F.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something …",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new X({key:new Z("placeholder"),props:{decorations:({doc:e,selection:r})=>{const l=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:u}=r,a=[];if(!l)return null;const p=this.editor.isEmpty;return e.descendants((t,g)=>{const d=u>=g&&u<=g+t.nodeSize,f=!t.isLeaf&&ve(t);if((d||!this.options.showOnlyCurrent)&&f){const o=[this.options.emptyNodeClass];p&&o.push(this.options.emptyEditorClass);const _=_e.node(g,g+t.nodeSize,{class:o.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:t,pos:g,hasAnchor:d}):this.options.placeholder});a.push(_)}return this.options.includeChildren}),ge.create(e,a)}}})]}}),Fe=e=>k({find:/--$/,replace:e??"—"}),Ne=e=>k({find:/\.\.\.$/,replace:e??"…"}),Re=e=>k({find:/(?:^|[\s{[(<'"\u2018\u201C])(")$/,replace:e??"“"}),ze=e=>k({find:/"$/,replace:e??"”"}),Ge=e=>k({find:/(?:^|[\s{[(<'"\u2018\u201C])(')$/,replace:e??"‘"}),Je=e=>k({find:/'$/,replace:e??"’"}),Ke=e=>k({find:/<-$/,replace:e??"←"}),Ye=e=>k({find:/->$/,replace:e??"→"}),Xe=e=>k({find:/\(c\)$/,replace:e??"©"}),Ze=e=>k({find:/\(tm\)$/,replace:e??"™"}),et=e=>k({find:/\(sm\)$/,replace:e??"℠"}),tt=e=>k({find:/\(r\)$/,replace:e??"®"}),st=e=>k({find:/(?:^|\s)(1\/2)\s$/,replace:e??"½"}),ot=e=>k({find:/\+\/-$/,replace:e??"±"}),at=e=>k({find:/!=$/,replace:e??"≠"}),nt=e=>k({find:/<<$/,replace:e??"«"}),lt=e=>k({find:/>>$/,replace:e??"»"}),it=e=>k({find:/\d+\s?([*x])\s?\d+$/,replace:e??"×"}),rt=e=>k({find:/\^2$/,replace:e??"²"}),ut=e=>k({find:/\^3$/,replace:e??"³"}),dt=e=>k({find:/(?:^|\s)(1\/4)\s$/,replace:e??"¼"}),ct=e=>k({find:/(?:^|\s)(3\/4)\s$/,replace:e??"¾"}),pt=F.create({name:"typography",addOptions(){return{closeDoubleQuote:"”",closeSingleQuote:"’",copyright:"©",ellipsis:"…",emDash:"—",laquo:"«",leftArrow:"←",multiplication:"×",notEqual:"≠",oneHalf:"½",oneQuarter:"¼",openDoubleQuote:"“",openSingleQuote:"‘",plusMinus:"±",raquo:"»",registeredTrademark:"®",rightArrow:"→",servicemark:"℠",superscriptThree:"³",superscriptTwo:"²",threeQuarters:"¾",trademark:"™"}},addInputRules(){const e=[];return this.options.emDash!==!1&&e.push(Fe(this.options.emDash)),this.options.ellipsis!==!1&&e.push(Ne(this.options.ellipsis)),this.options.openDoubleQuote!==!1&&e.push(Re(this.options.openDoubleQuote)),this.options.closeDoubleQuote!==!1&&e.push(ze(this.options.closeDoubleQuote)),this.options.openSingleQuote!==!1&&e.push(Ge(this.options.openSingleQuote)),this.options.closeSingleQuote!==!1&&e.push(Je(this.options.closeSingleQuote)),this.options.leftArrow!==!1&&e.push(Ke(this.options.leftArrow)),this.options.rightArrow!==!1&&e.push(Ye(this.options.rightArrow)),this.options.copyright!==!1&&e.push(Xe(this.options.copyright)),this.options.trademark!==!1&&e.push(Ze(this.options.trademark)),this.options.servicemark!==!1&&e.push(et(this.options.servicemark)),this.options.registeredTrademark!==!1&&e.push(tt(this.options.registeredTrademark)),this.options.oneHalf!==!1&&e.push(st(this.options.oneHalf)),this.options.plusMinus!==!1&&e.push(ot(this.options.plusMinus)),this.options.notEqual!==!1&&e.push(at(this.options.notEqual)),this.options.laquo!==!1&&e.push(nt(this.options.laquo)),this.options.raquo!==!1&&e.push(lt(this.options.raquo)),this.options.multiplication!==!1&&e.push(it(this.options.multiplication)),this.options.superscriptTwo!==!1&&e.push(rt(this.options.superscriptTwo)),this.options.superscriptThree!==!1&&e.push(ut(this.options.superscriptThree)),this.options.oneQuarter!==!1&&e.push(dt(this.options.oneQuarter)),this.options.threeQuarters!==!1&&e.push(ct(this.options.threeQuarters)),e}}),mt=F.create({name:"StripLinksOnPaste",addProseMirrorPlugins(){return[new X({key:new Z("StripLinksOnPaste"),props:{transformPastedHTML(e){return e.replace(/<a[^>]*>/g,"").replace(/<\/a>/g,"")}}})]}}),ft=(e,r,l)=>{const u=e.replace().split(/(?:\r\n?|\n)/),a=[];u.forEach(t=>{const g={type:"div"};t.length>0&&(g.content=[{type:"text",text:t}]);const d=be.fromJSON(r.doc.type.schema,g);a.push(d)});const p=$e.fromArray(a);return ye.maxOpen(p)},_s={__name:"Editor",props:{value:{required:!0},editable:{type:Boolean,default:!0},placeholder:{type:String,default:""}},emits:["update"],setup(e,{emit:r}){const{t:l}=ee(),u=Ce(),a=e,p=r,t=x(!1),{defaultExtensions:g}=Qe(),d=we({editable:a.editable,content:a.value,extensions:[...g,He,We.configure({placeholder:a.placeholder?a.placeholder:l("post.start_write")}),pt.configure({openDoubleQuote:!1,closeDoubleQuote:!1,openSingleQuote:!1,closeSingleQuote:!1}),mt,Ie,qe,Le],editorProps:{attributes:{class:"focus:outline-hidden min-h-[150px]"},clipboardTextParser:ft},onUpdate:()=>{p("update",d.value.getHTML())},onFocus:()=>{t.value=!0},onBlur:()=>{t.value=!1}}),f=o=>u.hasOwnProperty("id")&&o===u.id;return N(()=>{S.on("insertEmoji",o=>{f(o.editorId)&&d.value.commands.insertContent(o.emoji.native)}),S.on("insertContent",o=>{f(o.editorId)&&d.value.commands.insertContent(o.text)}),S.on("replaceContent",o=>{f(o.editorId)&&(d.value.commands.clearContent(),d.value.commands.insertContent(o.text))}),S.on("focusEditor",o=>{f(o.editorId)&&d.value.commands.focus()})}),Ee(()=>{d.value.destroy(),S.off("insertEmoji"),S.off("insertContent"),S.off("replaceContent"),S.off("focusEditor")}),Ve(()=>a.value,o=>{o!==d.value.getHTML()&&d.value.commands.setContent(o)}),(o,_)=>(c(),C("div",{class:se([{"border-primary-200 ring-3 ring-primary-200/50":t.value},"border border-gray-200 rounded-lg p-md pb-xs text-base transition-colors ease-in-out duration-200"])},[m(T(ke),{editor:T(d)},null,8,["editor"]),te(o.$slots,"default")],2))}},ht={},vt={xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"};function _t(e,r){return c(),C("svg",vt,r[0]||(r[0]=[b("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))}const gt=j(ht,[["render",_t]]),bt={__name:"EmojiPreloader",setup(e){return(r,l)=>(c(),$(q,{class:"relative! h-24! w-[353px]!"}))}},$t={class:"flex"},yt={type:"button",class:"hover:text-orange-500 transition-colors ease-in-out duration-200 outline-hidden text-stone-800"},gs={__name:"EmojiPicker",props:{closeOnSelect:{type:Boolean,default:!1},tooltip:{type:String,default:"Emoji"}},emits:["selected","close"],setup(e,{emit:r}){const l=Te({loader:()=>Me(()=>import("./EmojiMart-DYGDxhJ-.js"),__vite__mapDeps([0,1,2,3])),loadingComponent:bt}),u=r,a=p=>{u("selected",p)};return(p,t)=>{const g=O("tooltip");return c(),$(R,{placement:"bottom-start","closeable-on-content":e.closeOnSelect,"width-classes":"w-auto",onClose:t[0]||(t[0]=d=>p.$emit("close"))},{trigger:s(()=>[b("div",$t,[B((c(),C("button",yt,[m(gt)])),[[g,e.tooltip]])])]),content:s(()=>[m(T(l),{onSelect:a})]),_:1},8,["closeable-on-content"])}}},wt={type:"button",class:"text-stone-800 hover:text-primary-500 transition-colors ease-in-out duration-200"},bs={__name:"PostAddMedia",emits:["insert"],setup(e){return(r,l)=>{const u=O("tooltip");return c(),$(Oe,{onInsert:l[0]||(l[0]=a=>r.$emit("insert",a))},{default:s(()=>[B((c(),C("button",wt,[m(Se)])),[[u,r.$t("post.media")]])]),_:1})}}},kt={role:"button",class:"cursor-pointer"},xt={class:"mb-xs text-sm"},Ct={key:0,class:"w-auto h-full",controls:""},Et=["src","type"],Vt=["src"],$s={__name:"PostMedia",props:{media:{type:Array,required:!0},showItemDropdownMenu:{type:Boolean,default:!0},videoThumbs:{type:Array,required:!0},enableVideoThumb:{type:Boolean,default:!1},providersWithVideoThumbEnabled:{type:Array,default:()=>[]}},emits:["updated","videoThumbsUpdated"],setup(e,{emit:r}){const l=e,u=r,{editAllowed:a}=Ue(),p=x(!1),t=x({}),g=n=>P.startsWith(n,"video"),d=n=>{t.value=n,p.value=!0},f=()=>{p.value=!1,t.value={}},o=n=>{const i=l.media.findIndex(h=>h.id===n),y=P.clone(l.media);if(y.splice(i,1),l.media.findIndex(h=>h.id===n)){const h=P.clone(l.videoThumbs).filter(D=>D.media_id!==n);u("videoThumbsUpdated",h)}u("updated",y),f()},_=n=>{const i=P.clone(l.media);i.forEach(y=>{y.id===n.id&&(y.alt_text=n.alt_text)}),u("updated",i)},E=(n,i,y={})=>{if(!["add_thumbnail","remove_thumbnail"].includes(i))return;const h=P.clone(l.media);let D=P.clone(l.videoThumbs);h.forEach(W=>{W.id===n.id&&(D=D.filter(he=>he.media_id!==n.id),i==="add_thumbnail"?(W.video_custom_thumb_url=y.url,D.push({media_id:n.id,thumb_id:y.id})):i==="remove_thumbnail"&&(W.video_custom_thumb_url=null))}),u("updated",h),u("videoThumbsUpdated",D)};return(n,i)=>(c(),C(G,null,[b("div",{class:se({"mt-xs":e.media.length})},[m(T(je),Ae({list:e.media,disabled:!T(a)},{animation:200,group:"media"},{"item-key":"id",class:"flex flex-wrap gap-sm"}),{item:s(({element:y})=>[b("div",kt,[m(Be,{media:y,imgHeight:"sm",placeholderHeight:"sm",imgWidthFull:!1,showCaption:!1,editMode:T(a),showDropdownMenu:e.showItemDropdownMenu,enableVideoThumb:e.enableVideoThumb,providersWithVideoThumbEnabled:e.providersWithVideoThumbEnabled,onOpen:h=>d(y),onUpdate:i[0]||(i[0]=h=>_(h)),onRemove:h=>o(y.id),onAddCustomVideoThumb:h=>E(y,"add_thumbnail",h),onRemoveCustomVideoThumb:()=>E(y,"remove_thumbnail")},null,8,["media","editMode","showDropdownMenu","enableVideoThumb","providersWithVideoThumbEnabled","onOpen","onRemove","onAddCustomVideoThumb","onRemoveCustomVideoThumb"])])]),_:1},16,["list","disabled"])],2),m(z,{show:p.value,onClose:f},{header:s(()=>[w(v(n.$t("post.view_media")),1)]),body:s(()=>[b("figure",null,[b("figcaption",xt,v(t.value.name),1),g(t.value.mime_type)?(c(),C("video",Ct,[b("source",{src:t.value.url,type:t.value.mime_type},null,8,Et),w(" "+v(n.$t("error.browser_video_unsupported")),1)])):(c(),C("img",{key:1,src:t.value.url,alt:"Image"},null,8,Vt))])]),footer:s(()=>[m(I,{onClick:f,class:"mr-xs"},{default:s(()=>[w(v(n.$t("general.close")),1)]),_:1}),T(a)?(c(),$(De,{key:0,onClick:i[1]||(i[1]=y=>o(t.value.id))},{default:s(()=>[w(v(n.$t("general.remove")),1)]),_:1})):V("",!0)]),_:1},8,["show"])],64))}},Tt={},Mt={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"};function St(e,r){return c(),C("svg",Mt,r[0]||(r[0]=[b("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5.25 8.25h15m-16.5 7.5h15m-1.8-13.5l-3.9 19.5m-2.1-19.5l-3.9 19.5"},null,-1)]))}const K=j(Tt,[["render",St]]),At={},Dt={type:"button",class:"text-stone-800 hover:text-primary-500 transition-colors ease-in-out duration-200"};function Pt(e,r){return c(),C("button",Dt,[te(e.$slots,"default")])}const fe=j(At,[["render",Pt]]),Qt={class:"relative mt-sm"},It={class:"flex items-center justify-between"},qt={class:"w-full"},Lt={class:"text-gray-500"},Ht={class:"flex justify-end"},jt={__name:"HashtagGroups",props:{groups:{type:Array,default:[]}},emits:["update","edit","insert"],setup(e,{emit:r}){const l=U("workspaceCtx"),u=e,a=r,p=x(!1),t=()=>{M.start(),u.groups.length||(p.value=!0),axios.get(route("mixpost.hashtaggroups.index",{workspace:l.id})).then(d=>{a("update",d.data.data)}).finally(()=>{M.done(),p.value=!1})},g=d=>{axios.delete(route("mixpost.hashtaggroups.delete",{workspace:l.id,hashtaggroup:d.id})),a("update",u.groups.filter(f=>f.id!==d.id))};return N(()=>{t()}),(d,f)=>(c(),C("div",Qt,[!e.groups.length&&p.value?(c(),$(q,{key:0})):V("",!0),!e.groups.length&&!p.value?(c(),$(pe,{key:1},{default:s(()=>[w(v(d.$t("hashtag.dont_have_groups")),1)]),_:1})):(c(),$(ce,{key:2},{default:s(()=>[(c(!0),C(G,null,oe(e.groups,o=>(c(),$(de,{key:o.id,class:"group"},{default:s(()=>[b("div",It,[b("div",qt,[b("div",null,v(o.name),1),b("div",Lt,v(o.content),1)]),b("div",Ht,[m(Q,{onClick:_=>d.$emit("insert",o.content),size:"sm",class:"group-visible mr-xs"},{default:s(()=>[w(v(d.$t("general.insert")),1)]),_:2},1032,["onClick"]),m(R,{placement:"bottom-end"},{trigger:s(()=>[m(ne,{class:"mt-1"},{default:s(()=>[m(re)]),_:1})]),content:s(()=>[m(L,{onClick:_=>d.$emit("edit",o),as:"button"},{default:s(()=>[m(ae,{class:"w-5! h-5! mr-1"}),w(" "+v(d.$t("general.edit")),1)]),_:2},1032,["onClick"]),m(L,{onClick:_=>g(o),as:"button"},{default:s(()=>[m(ue,{class:"w-5! h-5! mr-1 text-red-500"}),w(" "+v(d.$t("general.delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)])])]),_:2},1024))),128))]),_:1}))]))}},Ot={for:"group_name"},Bt={for:"group_content"},Ut={__name:"HashtagGroupForm",props:{group:{type:[Object,null],required:!1}},emits:["store","update"],setup(e,{emit:r}){const l=U("workspaceCtx"),u=e,a=r,p=x(!1),t=x({name:u.group?u.group.name:"",content:u.group?u.group.content:""}),g=()=>{M.start(),p.value=!0,axios.post(route("mixpost.hashtaggroups.store",{workspace:l.id}),t.value).then(o=>{a("store",o.data)}).finally(()=>{M.done(),p.value=!1})},d=()=>{M.start(),p.value=!0,axios.put(route("mixpost.hashtaggroups.update",{workspace:l.id,hashtaggroup:u.group.id}),t.value).then(()=>{a("update",t.value),M.done(),p.value=!1})},f=()=>{if(u.group){d();return}g()};return(o,_)=>(c(),C("form",{onSubmit:ie(f,["prevent"])},[m(H,null,{title:s(()=>[b("label",Ot,v(o.$t("hashtag.hashtag_name")),1)]),default:s(()=>[m(le,{type:"text",modelValue:t.value.name,"onUpdate:modelValue":_[0]||(_[0]=E=>t.value.name=E),id:"group_name",required:""},null,8,["modelValue"])]),_:1}),m(H,{class:"mt-sm"},{title:s(()=>[b("label",Bt,v(o.$t("hashtag.hashtag_content")),1)]),default:s(()=>[m(me,{modelValue:t.value.content,"onUpdate:modelValue":_[1]||(_[1]=E=>t.value.content=E),id:"group_content",rows:"3",class:"resize-none",required:""},null,8,["modelValue"])]),_:1}),m(Q,{type:"submit",isLoading:p.value,class:"mt-sm"},{default:s(()=>[w(v(o.$t("hashtag.save_hashtag_group")),1)]),_:1},8,["isLoading"])],32))}},Wt={class:"flex items-center"},ys={__name:"HashtagManager",props:{editAllowed:{type:Boolean,default:!0}},emits:["insert"],setup(e,{emit:r}){const l=x(!1),u=x(!1),a=x(null),p=x(null),t=x([]),g=()=>{l.value=!0,f()},d=()=>{l.value=!1,a.value=null},f=()=>{a.value="groups"},o=(n=null)=>{p.value=n,a.value="form"},_=n=>{t.value.unshift(n)},E=n=>{const i=t.value.findIndex(y=>y.id===n.id);i!==-1&&(t.value[i]=n)};return(n,i)=>{const y=O("tooltip");return c(),C("div",null,[B((c(),$(fe,{onClick:g},{default:s(()=>[m(K)]),_:1})),[[y,n.$t("hashtag.open_hashtag")]]),m(z,{show:l.value,"max-width":"lg",closeable:!0,"scrollable-body":!0,onClose:d},{header:s(()=>[b("div",Wt,[m(K,{class:"mr-xs"}),w(" "+v(n.$t("hashtag.hashtag_manager")),1)])]),body:s(()=>[u.value?(c(),$(q,{key:0,opacity:50})):V("",!0),a.value==="groups"?(c(),$(jt,{key:1,groups:t.value,onUpdate:i[0]||(i[0]=h=>t.value=h),onEdit:i[1]||(i[1]=h=>o(h)),onInsert:i[2]||(i[2]=h=>{n.$emit("insert",h),d()})},null,8,["groups"])):V("",!0),a.value==="form"?(c(),$(Ut,{key:2,group:p.value,onStore:i[3]||(i[3]=h=>{_(h),f()}),onUpdate:i[4]||(i[4]=h=>{E(h),f()})},null,8,["group"])):V("",!0)]),footer:s(()=>[a.value==="groups"?(c(),$(Q,{key:0,onClick:i[5]||(i[5]=()=>{o()}),class:"mr-xs"},{default:s(()=>[w(v(n.$t("hashtag.new_hashtag_group")),1)]),_:1})):V("",!0),a.value==="form"?(c(),$(I,{key:1,onClick:f,class:"mr-xs"},{default:s(()=>[w(v(n.$t("general.go_back")),1)]),_:1})):V("",!0),m(I,{onClick:d},{default:s(()=>[w(v(n.$t("general.done")),1)]),_:1})]),_:1},8,["show"])])}}},Ft={class:"relative mt-sm"},Nt={class:"flex items-center justify-between"},Rt={class:"w-full"},zt={class:"flex"},Gt={class:"text-primary-500 font-medium mr-xs"},Jt={class:"text-gray-500"},Kt={class:"flex justify-end"},Yt={__name:"VariableList",props:{variables:{type:Array,default:[]}},emits:["update","edit","insert"],setup(e,{emit:r}){const{t:l}=ee(),u=U("workspaceCtx"),a=e,p=r,t=x(!1),g=()=>{M.start(),a.variables.length||(t.value=!0),axios.get(route("mixpost.variables.index",{workspace:u.id})).then(f=>{p("update",[{id:"platform",name:"platform",value:l("variable.platform_post"),default:!0},{id:"account",name:"account",value:l("variable.name_account"),default:!0},...f.data.data])}).finally(()=>{M.done(),t.value=!1})},d=f=>{axios.delete(route("mixpost.variables.delete",{workspace:u.id,variable:f.id})),p("update",a.variables.filter(o=>o.id!==f.id))};return N(()=>{g()}),(f,o)=>(c(),C("div",Ft,[!e.variables.length&&t.value?(c(),$(q,{key:0})):V("",!0),!e.variables.length&&!t.value?(c(),$(pe,{key:1},{default:s(()=>[w(v(T(l)("variable.dont_have_variables")),1)]),_:1})):(c(),$(ce,{key:2},{default:s(()=>[(c(!0),C(G,null,oe(e.variables,_=>(c(),$(de,{key:_.id,class:"group"},{default:s(()=>[b("div",Nt,[b("div",Rt,[b("div",zt,[b("div",Gt," {{"+v(_.name)+"}} ",1),_.default?(c(),$(Pe,{key:0},{default:s(()=>[w(v(T(l)("general.default")),1)]),_:1})):V("",!0)]),b("div",Jt,v(_.value),1)]),b("div",Kt,[m(Q,{onClick:E=>f.$emit("insert",`{{${_.name}}}`),size:"sm",class:"group-visible mr-xs"},{default:s(()=>[w(v(T(l)("general.use")),1)]),_:2},1032,["onClick"]),_.default?V("",!0):(c(),$(R,{key:0,placement:"bottom-end"},{trigger:s(()=>[m(ne,{class:"mt-1"},{default:s(()=>[m(re)]),_:1})]),content:s(()=>[m(L,{onClick:E=>f.$emit("edit",_),as:"button"},{default:s(()=>[m(ae,{class:"w-5! h-5! mr-1"}),w(" "+v(T(l)("general.edit")),1)]),_:2},1032,["onClick"]),m(L,{onClick:E=>d(_),as:"button"},{default:s(()=>[m(ue,{class:"w-5! h-5! mr-1 text-red-500"}),w(" "+v(T(l)("general.delete")),1)]),_:2},1032,["onClick"])]),_:2},1024))])])]),_:2},1024))),128))]),_:1}))]))}},Xt={for:"variable_name"},Zt={for:"variable_value"},es={__name:"VariableForm",props:{variable:{type:[Object,null],required:!1}},emits:["store","update"],setup(e,{emit:r}){const l=U("workspaceCtx"),u=e,a=r,p=x(!1),t=x({name:u.variable?u.variable.name:"",value:u.variable?u.variable.value:""}),g=()=>{M.start(),p.value=!0,axios.post(route("mixpost.variables.store",{workspace:l.id}),t.value).then(o=>{a("store",o.data)}).finally(()=>{M.done(),p.value=!1})},d=()=>{M.start(),p.value=!0,axios.put(route("mixpost.variables.update",{workspace:l.id,variable:u.variable.id}),t.value).then(()=>{a("update",t.value),M.done(),p.value=!1})},f=()=>{if(u.variable){d();return}g()};return(o,_)=>(c(),C("form",{onSubmit:ie(f,["prevent"])},[m(H,null,{title:s(()=>[b("label",Xt,v(o.$t("general.name")),1)]),default:s(()=>[m(le,{type:"text",modelValue:t.value.name,"onUpdate:modelValue":_[0]||(_[0]=E=>t.value.name=E),id:"variable_name",required:""},null,8,["modelValue"])]),_:1}),m(H,{class:"mt-sm"},{title:s(()=>[b("label",Zt,v(o.$t("variable.value")),1)]),default:s(()=>[m(me,{modelValue:t.value.value,"onUpdate:modelValue":_[1]||(_[1]=E=>t.value.value=E),id:"variable_value"},null,8,["modelValue"])]),_:1}),m(Q,{type:"submit",isLoading:p.value,class:"mt-sm"},{default:s(()=>[w(v(o.$t("variable.save_variable")),1)]),_:1},8,["isLoading"])],32))}},ts={},ss={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"};function os(e,r){return c(),C("svg",ss,r[0]||(r[0]=[b("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.745 3A23.933 23.933 0 003 12c0 3.183.62 6.22 1.745 9M19.5 3c.967 2.78 1.5 5.817 1.5 9s-.533 6.22-1.5 9M8.25 8.885l1.444-.89a.75.75 0 011.105.402l2.402 7.206a.75.75 0 001.104.401l1.445-.889m-8.25.75l.213.09a1.687 1.687 0 002.062-.617l4.45-6.676a1.688 1.688 0 012.062-.618l.213.09"},null,-1)]))}const Y=j(ts,[["render",os]]),as={class:"flex items-center"},ws={__name:"VariableManager",props:{editAllowed:{type:Boolean,default:!0}},emits:["insert"],setup(e,{emit:r}){const l=x(!1),u=x(!1),a=x(null),p=x(null),t=x([]),g=()=>{l.value=!0,f()},d=()=>{l.value=!1,a.value=null},f=()=>{a.value="list"},o=(n=null)=>{p.value=n,a.value="form"},_=n=>{t.value.unshift(n)},E=n=>{const i=t.value.findIndex(y=>y.id===n.id);i!==-1&&(t.value[i]=n)};return(n,i)=>{const y=O("tooltip");return c(),C("div",null,[B((c(),$(fe,{onClick:g},{default:s(()=>[m(Y)]),_:1})),[[y,n.$t("variable.open_variable_manager")]]),m(z,{show:l.value,"max-width":"2xl",closeable:!0,"scrollable-body":!0,onClose:d},{header:s(()=>[b("div",as,[m(Y,{class:"mr-xs"}),w(" "+v(n.$t("variable.variable_manager")),1)])]),body:s(()=>[u.value?(c(),$(q,{key:0,opacity:50})):V("",!0),a.value==="list"?(c(),$(Yt,{key:1,variables:t.value,onUpdate:i[0]||(i[0]=h=>t.value=h),onEdit:i[1]||(i[1]=h=>o(h)),onInsert:i[2]||(i[2]=h=>{n.$emit("insert",h),d()})},null,8,["variables"])):V("",!0),a.value==="form"?(c(),$(es,{key:2,variable:p.value,onStore:i[3]||(i[3]=h=>{_(h),f()}),onUpdate:i[4]||(i[4]=h=>{E(h),f()})},null,8,["variable"])):V("",!0)]),footer:s(()=>[a.value==="list"?(c(),$(Q,{key:0,onClick:i[5]||(i[5]=()=>{o()}),class:"mr-xs"},{default:s(()=>[w(v(n.$t("variable.new_variable")),1)]),_:1})):V("",!0),a.value==="form"?(c(),$(I,{key:1,onClick:f,class:"mr-xs"},{default:s(()=>[w(v(n.$t("general.go_back")),1)]),_:1})):V("",!0),m(I,{onClick:d},{default:s(()=>[w(v(n.$t("general.done")),1)]),_:1})]),_:1},8,["show"])])}}};export{fe as E,We as P,mt as S,pt as T,_s as _,$s as a,gs as b,bs as c,ys as d,ws as e,ft as f,Ue as u};
