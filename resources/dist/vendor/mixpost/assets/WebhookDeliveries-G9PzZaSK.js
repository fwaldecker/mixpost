import{d as $,i as f,D as b,M as y,U as C,l as v,a1 as j,c as p,o,a as s,e as r,b as D,g as x,w as a,k as m,t as u,j as k,h as _,F as g,r as B}from"./app-C7yQ4yxP.js";import{_ as N}from"./Admin-2kdh7iq6.js";import{u as O}from"./useRouter-CKabqmxS.js";import{_ as V}from"./PageHeader-L61bBZJ1.js";import{_ as S}from"./WebhookAction-BnGuf1xV.js";import{_ as T}from"./Panel-DHnLtGhx.js";import{_ as E}from"./Flex-B0LjVlwe.js";import{_ as F}from"./Pagination-xEfeiBk8.js";import{_ as I}from"./NoResult-BiKMAkVj.js";import{_ as M,a as P}from"./WebhookDeliveryItemView-DKkcs4Ur.js";import{_ as w,T as W}from"./Tab-QSPdE2y6.js";import"./QueueList-DM6iDr1_.js";import"./Trash-TUAkcl9a.js";import"./ChevronLeft-Dhng4OHZ.js";import"./Clock-m0ihuH3g.js";import"./nprogress-DktYLWPJ.js";import"./SectionTitle-CrJ6iHdB.js";import"./SectionBorder-BpV8jdd1.js";import"./Refresh-LmV19YMu.js";const q={class:"w-full mx-auto row-py"},L={class:"text-gray-500"},R={class:"row-px"},U={class:"w-full mt-lg"},z={class:"w-full md:w-1/2 border-r border-gray-100"},A={class:"w-full md:w-1/2"},G={key:0,class:"mt-lg"},H=$({layout:N}),ve=Object.assign(H,{__name:"WebhookDeliveries",props:{filter:{type:Object,default:{}},webhook:{type:Object,required:!0},deliveries:{type:Object}},setup(e){const c=e;f("routePrefix"),f("confirmation"),f("authPasswordConfirmation"),O();const n=b({status:c.filter.status}),d=b(null);y(()=>{c.deliveries.data.length&&h(c.deliveries.data[0])});const h=t=>{d.value=t};return C(()=>v.cloneDeep(n.value),v.throttle(()=>{j.get(route("mixpost.system.webhooks.deliveries.index",{workspace:workspaceCtx.id,webhook:c.webhook.id}),v.pickBy(n.value),{preserveState:!0,preserveScroll:!0,only:["deliveries","filter"]})},300)),(t,l)=>(o(),p(g,null,[s(D(x),{title:t.$t("webhook.deliveries")},null,8,["title"]),r("div",q,[s(V,{title:t.$t("webhook.deliveries")},{description:a(()=>[m(u(e.webhook.name)+" ",1),r("div",L,u(e.webhook.callback_url),1)]),default:a(()=>[s(S,{record:e.webhook,create:!1,deliveries:!1},null,8,["record"])]),_:1},8,["title"]),r("div",R,[r("div",U,[s(W,null,{default:a(()=>[s(w,{onClick:l[0]||(l[0]=i=>n.value.status=null),active:!t.$page.props.filter.status},{default:a(()=>[m(u(t.$t("general.all")),1)]),_:1},8,["active"]),s(w,{onClick:l[1]||(l[1]=i=>n.value.status="success"),active:t.$page.props.filter.status==="success"},{default:a(()=>[m(u(t.$t("general.succeeded")),1)]),_:1},8,["active"]),s(w,{onClick:l[2]||(l[2]=i=>n.value.status="error"),active:t.$page.props.filter.status==="error"},{default:a(()=>[m(u(t.$t("general.failed")),1)]),_:1},8,["active"])]),_:1})]),s(T,{class:"mt-lg","with-padding":!1},{default:a(()=>[s(E,{gap:"gap-0"},{default:a(()=>[r("div",z,[(o(!0),p(g,null,B(e.deliveries.data,i=>(o(),_(M,{key:i.id,item:i,active:d.value&&d.value.id===i.id,onClick:J=>h(i)},null,8,["item","active","onClick"]))),128)),e.deliveries.meta.total?k("",!0):(o(),_(I,{key:0,class:"py-md px-md"}))]),r("div",A,[d.value?(o(),_(P,{key:0,webhookId:e.webhook.id,delivery:d.value},null,8,["webhookId","delivery"])):k("",!0)])]),_:1})]),_:1}),e.deliveries.meta.links.length>3?(o(),p("div",G,[s(F,{meta:e.deliveries.meta,links:e.deliveries.links},null,8,["meta","links"])])):k("",!0)])])],64))}});export{ve as default};
