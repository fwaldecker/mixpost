import{u as L,i as D,a6 as Y,D as M,q as P,c as g,o as r,e as y,v as S,a as e,b as s,h,w as t,V as q,k as d,t as p,a0 as Z,W as ee,a1 as O,n as z,a5 as W,H as T,l as V,A as te,aa as A,j as x,F as U,r as H,I as se,d as oe,p as ae,M as re,T as le,U as B,g as ne,S as ce,m as ie,a8 as E}from"./app-C7yQ4yxP.js";import{u as ue}from"./useSelectable-D4eEjBj_.js";import{_ as me}from"./Admin-2kdh7iq6.js";import{_ as de}from"./PageHeader-L61bBZJ1.js";import{_ as pe}from"./PureDangerButton-CTpho9ji.js";import{_ as fe}from"./Panel-DHnLtGhx.js";import{_ as F}from"./Checkbox-hSITjV1n.js";import{_ as i,a as G,T as _e}from"./TableCell-Do7VWhok.js";import{_ as ke}from"./SelectableBar-BMA_UiaG.js";import{_ as we}from"./NoResult-BiKMAkVj.js";import{T as J}from"./Trash-TUAkcl9a.js";import{_ as he}from"./Pagination-xEfeiBk8.js";import{_ as N}from"./PureButtonLink-PaYLzY0E.js";import{E as ge}from"./Eye-16K59JCb.js";import{_ as $e}from"./DropdownButton-DdQamZC7.js";import{A as ve}from"./ArrowTopRightOnSquare-509xbi7A.js";import{_ as be}from"./SearchInput-C73xFZvN.js";import{_ as ye}from"./Alert-nkqBEIg3.js";import{_ as xe}from"./Flex-B0LjVlwe.js";import"./QueueList-DM6iDr1_.js";import"./ChevronLeft-Dhng4OHZ.js";import"./EllipsisVertical-Cfd6Agro.js";const Ce={class:"flex flex-row items-center justify-end gap-xs"},Ie={__name:"WorkspaceItemAction",props:{itemId:{type:String,required:!0}},emits:["onDelete"],setup(o,{emit:a}){const{t:l}=L(),c=D("routePrefix"),_=D("confirmation"),$=o,v=a,{notify:k}=z();Y();const f=M(!1),C=()=>{_().title(l("workspace.delete_workspace")).description(l("workspace.confirm_delete_workspace")).destructive().onConfirm(u=>{u.isLoading(!0),O.delete(route(`${c}.workspaces.delete`,{workspace:$.itemId}),{onSuccess(){f.value=!1,k("success",l("workspace.workspace_deleted")),v("onDelete"),W.emit("workspaceDelete",$.itemId),u.reset()},onFinish(){u.isLoading(!1)}})}).show()};return(u,j)=>{const b=P("tooltip");return r(),g("div",null,[y("div",Ce,[S((r(),h(N,{href:u.route("mixpost.switchWorkspace",{workspace:o.itemId,redirect:!0}),method:"post",as:"button",type:"button"},{default:t(()=>[e(ve)]),_:1},8,["href"])),[[b,s(l)("general.open")]]),S((r(),h(N,{href:u.route(`${s(c)}.workspaces.view`,{workspace:o.itemId})},{default:t(()=>[e(ge)]),_:1},8,["href"])),[[b,s(l)("general.view")]]),e(ee,{placement:"bottom-end"},{trigger:t(()=>[e($e)]),content:t(()=>[e(q,{href:u.route(`${s(c)}.workspaces.edit`,{workspace:o.itemId})},{icon:t(()=>[e(Z)]),default:t(()=>[d(" "+p(s(l)("general.edit")),1)]),_:1},8,["href"]),e(q,{onClick:C,as:"button"},{icon:t(()=>[e(J,{class:"text-red-500"})]),default:t(()=>[d(" "+p(s(l)("general.delete")),1)]),_:1})]),_:1})])])}}},Ve={key:0,class:"flex justify-start"},De={key:0,class:"mt-xs"},Se={__name:"WorkspaceItem",props:{item:{type:Object,required:!0}},setup(o){const a=o,l=T(()=>V.sortBy(a.item.users.slice(0,3),"pivot.joined_at")),c=T(()=>a.item.users.slice(3).length);return(_,$)=>{const v=P("tooltip");return r(),h(G,{hoverable:!0},{default:t(()=>[e(i,{class:"w-10"},{default:t(()=>[te(_.$slots,"checkbox")]),_:3}),e(i,null,{default:t(()=>[e(A,{backgroundColor:o.item.hex_color,name:o.item.name,roundedClass:"rounded-lg"},null,8,["backgroundColor","name"])]),_:1}),e(i,null,{default:t(()=>[y("div",null,p(o.item.name),1)]),_:1}),e(i,null,{default:t(()=>[d(p(o.item.created_at),1)]),_:1}),e(i,null,{default:t(()=>[o.item.users.length?(r(),g("div",Ve,[(r(!0),g(U,null,H(l.value,(k,f)=>S((r(),h(A,{key:k.id,name:k.name,class:se([{"-ml-6":f>0},"cursor-default mr-xs last:mr-xs"])},null,8,["name","class"])),[[v,k.name]])),128)),c.value?(r(),g("div",De," +"+p(c.value),1)):x("",!0)])):x("",!0)]),_:1}),e(i,null,{default:t(()=>[e(Ie,{itemId:o.item.uuid},null,8,["itemId"])]),_:1})]),_:3})}}},je={class:"flex items-center"},Oe={__name:"Filters",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(o,{emit:a}){return T(()=>0),(l,c)=>(r(),g("div",je,[e(be,{modelValue:o.modelValue.keyword,"onUpdate:modelValue":c[0]||(c[0]=_=>o.modelValue.keyword=_),placeholder:l.$t("general.search")},null,8,["modelValue","placeholder"])]))}},We={class:"w-full mx-auto row-py"},Te={class:"mt-lg row-px w-full"},Ue=["href"],Pe={key:1,class:"mt-lg"},Re=oe({layout:me}),rt=Object.assign(Re,{__name:"Workspaces",props:{workspaces:{type:Object},filter:{type:Object,default:{}}},setup(o){const{t:a}=L(),l=D("routePrefix"),c=o,_=a("workspace.workspaces"),$=D("confirmation"),{notify:v}=z(),{enterpriseConsole:k}=ae(),{selectedRecords:f,putPageRecords:C,toggleSelectRecordsOnPage:u,deselectRecord:j,deselectAllRecords:b}=ue(),R=()=>c.workspaces.data.map(n=>n.uuid),I=M({keyword:c.filter.keyword});re(()=>{C(R()),W.on("workspaceDelete",n=>{j(n)})}),le(()=>{W.off("workspaceDelete")}),B(()=>c.workspaces.data,()=>{C(R())}),B(()=>V.cloneDeep(I.value),V.throttle(()=>{O.get(route(`${l}.workspaces.index`),V.pickBy(I.value),{preserveState:!0,only:["workspaces","filter"]})},300));const K=()=>{$().title(a("workspace.delete_workspaces")).description(a("workspace.confirm_delete_workspaces")).destructive().onConfirm(n=>{n.isLoading(!0),O.delete(route(`${l}.workspaces.deleteMultiple`),{data:{workspaces:f.value},preserveScroll:!0,onSuccess(){b(),v("success",a("workspace.workspaces_deleted"))},onFinish(){n.reset()}})}).show()};return(n,m)=>{const Q=P("tooltip");return r(),g(U,null,[e(s(ne),{title:s(_)},null,8,["title"]),y("div",We,[e(de,{title:s(_)},{description:t(()=>[d(p(s(a)("workspace.manage_brands_businesses")),1)]),_:1},8,["title"]),y("div",Te,[e(ke,{count:s(f).length,onClose:s(b)},{default:t(()=>[S((r(),h(pe,{onClick:K},{default:t(()=>[e(J)]),_:1})),[[Q,s(a)("general.delete")]])]),_:1},8,["count","onClose"]),s(k).url?(r(),h(ye,{key:0,variant:"warning",closeable:!1,class:"mb-lg"},{default:t(()=>[m[3]||(m[3]=d(" Manage Workspaces from the ")),y("a",{href:`${s(k).url}/workspaces`,class:"link"},"Enterprise Console",8,Ue),m[4]||(m[4]=d(" for more business actions. "))]),_:1})):x("",!0),e(xe,{class:"justify-between"},{default:t(()=>[e(s(ce),{href:n.route(`${s(l)}.workspaces.create`),class:"mb-xs sm:mb-0"},{default:t(()=>[e(ie,null,{default:t(()=>[d(p(s(a)("workspace.create_workspace")),1)]),_:1})]),_:1},8,["href"]),e(Oe,{modelValue:I.value,"onUpdate:modelValue":m[0]||(m[0]=w=>I.value=w)},null,8,["modelValue"])]),_:1}),e(fe,{"with-padding":!1,class:"mt-lg"},{default:t(()=>[e(_e,null,{head:t(()=>[e(G,null,{default:t(()=>[e(i,{component:"th",scope:"col",class:"w-10"},{default:t(()=>[e(F,{checked:s(u),"onUpdate:checked":m[1]||(m[1]=w=>E(u)?u.value=w:null),disabled:!n.$page.props.workspaces.meta.total},null,8,["checked","disabled"])]),_:1}),e(i,{component:"th",scope:"col"}),e(i,{component:"th",scope:"col"},{default:t(()=>[d(p(s(a)("general.name")),1)]),_:1}),e(i,{component:"th",scope:"col"},{default:t(()=>[d(p(s(a)("general.created_at")),1)]),_:1}),e(i,{component:"th",scope:"col"},{default:t(()=>[d(p(s(a)("user.users")),1)]),_:1}),e(i,{component:"th",scope:"col"})]),_:1})]),body:t(()=>[(r(!0),g(U,null,H(n.$page.props.workspaces.data,w=>(r(),h(Se,{key:w.uuid,item:w,onOnDelete:()=>{s(j)(w.uuid)}},{checkbox:t(()=>[e(F,{checked:s(f),"onUpdate:checked":m[2]||(m[2]=X=>E(f)?f.value=X:null),value:w.uuid},null,8,["checked","value"])]),_:2},1032,["item","onOnDelete"]))),128))]),_:1}),n.$page.props.workspaces.meta.total?x("",!0):(r(),h(we,{key:0,table:""}))]),_:1}),n.$page.props.workspaces.meta.links.length>3?(r(),g("div",Pe,[e(he,{meta:n.$page.props.workspaces.meta,links:n.$page.props.workspaces.links},null,8,["meta","links"])])):x("",!0)])])],64)}}});export{rt as default};
